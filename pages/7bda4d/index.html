<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.62" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/pages/7bda4d/"><meta property="og:site_name" content="å­¦ä¹ ç¬”è®°"><meta property="og:title" content="Docker Composeé¡¹ç›®éƒ¨ç½²"><meta property="og:description" content="Docker Composeä»‹ç» ä½¿ç”¨å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨ç³»ç»Ÿä¸€èˆ¬åŒ…å«è‹¥å¹²ä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸ªå¾®æœåŠ¡ä¸€èˆ¬éƒ½ä¼šéƒ¨ç½²å¤šä¸ªå®ä¾‹ã€‚å¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½è¦æ‰‹åŠ¨å¯åœï¼Œé‚£ä¹ˆæ•ˆç‡ä¹‹ä½ã€ç»´æŠ¤é‡ä¹‹å¤§å¯æƒ³è€ŒçŸ¥ã€‚æœ¬èŠ‚è¯¾å°†è®¨è®ºå¦‚ä½•ä½¿ç”¨ Docker Composeæ¥è½»æ¾ã€é«˜æ•ˆåœ°ç®¡ç†å®¹å™¨ã€‚ä¸ºäº†ç®€å•èµ·è§å°† Docker Composeç®€ç§°ä¸º Composeã€‚ Compose æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨çš„Dockeråº”ç”¨çš„å·¥å…·ã€‚ä½¿ç”¨Composeï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆyamlæ ¼å¼ï¼‰ä¸­é…ç½®ä½ åº”ç”¨çš„æœåŠ¡ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå³å¯åˆ›å»ºå¹¶å¯åŠ¨é…ç½®ä¸­å¼•ç”¨çš„æ‰€æœ‰æœåŠ¡ã€‚ä¸‹é¢æˆ‘ä»¬è¿›å…¥Composeçš„å®æˆ˜å§"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-05-24T11:27:53.000Z"><meta property="article:author" content="æ±Ÿ"><meta property="article:published_time" content="2022-11-10T11:14:48.000Z"><meta property="article:modified_time" content="2023-05-24T11:27:53.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Docker Composeé¡¹ç›®éƒ¨ç½²","image":[""],"datePublished":"2022-11-10T11:14:48.000Z","dateModified":"2023-05-24T11:27:53.000Z","author":[{"@type":"Person","name":"æ±Ÿ"}]}</script><title>Docker Composeé¡¹ç›®éƒ¨ç½² | å­¦ä¹ ç¬”è®°</title><meta name="description" content="Docker Composeä»‹ç» ä½¿ç”¨å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨ç³»ç»Ÿä¸€èˆ¬åŒ…å«è‹¥å¹²ä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸ªå¾®æœåŠ¡ä¸€èˆ¬éƒ½ä¼šéƒ¨ç½²å¤šä¸ªå®ä¾‹ã€‚å¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½è¦æ‰‹åŠ¨å¯åœï¼Œé‚£ä¹ˆæ•ˆç‡ä¹‹ä½ã€ç»´æŠ¤é‡ä¹‹å¤§å¯æƒ³è€ŒçŸ¥ã€‚æœ¬èŠ‚è¯¾å°†è®¨è®ºå¦‚ä½•ä½¿ç”¨ Docker Composeæ¥è½»æ¾ã€é«˜æ•ˆåœ°ç®¡ç†å®¹å™¨ã€‚ä¸ºäº†ç®€å•èµ·è§å°† Docker Composeç®€ç§°ä¸º Composeã€‚ Compose æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨çš„Dockeråº”ç”¨çš„å·¥å…·ã€‚ä½¿ç”¨Composeï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆyamlæ ¼å¼ï¼‰ä¸­é…ç½®ä½ åº”ç”¨çš„æœåŠ¡ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå³å¯åˆ›å»ºå¹¶å¯åŠ¨é…ç½®ä¸­å¼•ç”¨çš„æ‰€æœ‰æœåŠ¡ã€‚ä¸‹é¢æˆ‘ä»¬è¿›å…¥Composeçš„å®æˆ˜å§">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-d225b157.css" as="style"><link rel="stylesheet" href="/assets/style-d225b157.css">
    <link rel="modulepreload" href="/assets/app-c8395efa.js"><link rel="modulepreload" href="/assets/index.html-935e2e4c.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/index.html-254985ce.js"><link rel="prefetch" href="/assets/intro.html-d050d194.js" as="script"><link rel="prefetch" href="/assets/index.html-3841b971.js" as="script"><link rel="prefetch" href="/assets/slides.html-4bcf9c90.js" as="script"><link rel="prefetch" href="/assets/index.html-9da1f986.js" as="script"><link rel="prefetch" href="/assets/index.html-06aa5afc.js" as="script"><link rel="prefetch" href="/assets/index.html-3cde2e9d.js" as="script"><link rel="prefetch" href="/assets/04-Springä¹‹Beanç”Ÿå‘½å‘¨æœŸæºç è§£æä¸Š.html-e29efed5.js" as="script"><link rel="prefetch" href="/assets/index.html-056a7c7b.js" as="script"><link rel="prefetch" href="/assets/index.html-196aee9a.js" as="script"><link rel="prefetch" href="/assets/index.html-15356fd6.js" as="script"><link rel="prefetch" href="/assets/index.html-b2ea937f.js" as="script"><link rel="prefetch" href="/assets/index.html-fae2cce2.js" as="script"><link rel="prefetch" href="/assets/index.html-3de3ac13.js" as="script"><link rel="prefetch" href="/assets/index.html-4fc833f7.js" as="script"><link rel="prefetch" href="/assets/index.html-a9380d59.js" as="script"><link rel="prefetch" href="/assets/index.html-0c227f79.js" as="script"><link rel="prefetch" href="/assets/index.html-ca9e9edd.js" as="script"><link rel="prefetch" href="/assets/index.html-3d73ef7f.js" as="script"><link rel="prefetch" href="/assets/index.html-eff3b4ec.js" as="script"><link rel="prefetch" href="/assets/index.html-63004bbb.js" as="script"><link rel="prefetch" href="/assets/index.html-b443c91f.js" as="script"><link rel="prefetch" href="/assets/index.html-eb7dc294.js" as="script"><link rel="prefetch" href="/assets/index.html-b3f10bbb.js" as="script"><link rel="prefetch" href="/assets/index.html-6036577c.js" as="script"><link rel="prefetch" href="/assets/index.html-58352f8e.js" as="script"><link rel="prefetch" href="/assets/index.html-47cee948.js" as="script"><link rel="prefetch" href="/assets/index.html-1460385b.js" as="script"><link rel="prefetch" href="/assets/00.ç«™åœ¨å…¨å±€è§†è§’ç†è§£ç³»ç»Ÿé«˜å¹¶å‘.html-3a469a4c.js" as="script"><link rel="prefetch" href="/assets/index.html-1fffc64f.js" as="script"><link rel="prefetch" href="/assets/10.BIO NIOç¼–ç¨‹ä¸ç›´æ¥å†…å­˜é›¶æ‹·è´.html-0ab5e5cc.js" as="script"><link rel="prefetch" href="/assets/index.html-fbcf9615.js" as="script"><link rel="prefetch" href="/assets/index.html-a1cae865.js" as="script"><link rel="prefetch" href="/assets/index.html-e045b02c.js" as="script"><link rel="prefetch" href="/assets/index.html-ab40fe3b.js" as="script"><link rel="prefetch" href="/assets/100.é«˜å¹¶å‘ç¼“å­˜å®æˆ˜.html-58f47ed2.js" as="script"><link rel="prefetch" href="/assets/index.html-78dacd72.js" as="script"><link rel="prefetch" href="/assets/30.å¾®æœåŠ¡æ¶æ„æ‹†åˆ†å®æˆ˜.html-d6647704.js" as="script"><link rel="prefetch" href="/assets/index.html-59afda48.js" as="script"><link rel="prefetch" href="/assets/50.å¾®æœåŠ¡ç½‘å…³æ•´åˆOAuth2.0æˆæƒä¸­å¿ƒ.html-d969e8ed.js" as="script"><link rel="prefetch" href="/assets/index.html-edca6dc4.js" as="script"><link rel="prefetch" href="/assets/index.html-1ae26749.js" as="script"><link rel="prefetch" href="/assets/index.html-f93219f2.js" as="script"><link rel="prefetch" href="/assets/index.html-31118532.js" as="script"><link rel="prefetch" href="/assets/å·¥å‚æ¨¡å¼.html-ad9410a3.js" as="script"><link rel="prefetch" href="/assets/å»ºé€ æ¨¡å¼.html-a04d73b9.js" as="script"><link rel="prefetch" href="/assets/index.html-c071222c.js" as="script"><link rel="prefetch" href="/assets/index.html-a4f315bf.js" as="script"><link rel="prefetch" href="/assets/index.html-b0022173.js" as="script"><link rel="prefetch" href="/assets/index.html-38e14dc8.js" as="script"><link rel="prefetch" href="/assets/index.html-cc3cc56c.js" as="script"><link rel="prefetch" href="/assets/index.html-68bfa6a5.js" as="script"><link rel="prefetch" href="/assets/00.é«˜æ€§èƒ½MySQL-MySQLæ¶æ„.html-6d7f7e17.js" as="script"><link rel="prefetch" href="/assets/index.html-4cecd512.js" as="script"><link rel="prefetch" href="/assets/index.html-99ad6842.js" as="script"><link rel="prefetch" href="/assets/index.html-675c676e.js" as="script"><link rel="prefetch" href="/assets/index.html-2855e279.js" as="script"><link rel="prefetch" href="/assets/index.html-9c62895c.js" as="script"><link rel="prefetch" href="/assets/index.html-aa30bf04.js" as="script"><link rel="prefetch" href="/assets/index.html-18f91996.js" as="script"><link rel="prefetch" href="/assets/index.html-d4863e55.js" as="script"><link rel="prefetch" href="/assets/index.html-546eb3a2.js" as="script"><link rel="prefetch" href="/assets/06.MySQLäº‹åŠ¡åŸç†ä¸ä¼˜åŒ–æœ€ä½³å®è·µ.html-0e42a487.js" as="script"><link rel="prefetch" href="/assets/index.html-53d3a5ee.js" as="script"><link rel="prefetch" href="/assets/index.html-2ee74260.js" as="script"><link rel="prefetch" href="/assets/index.html-1f029277.js" as="script"><link rel="prefetch" href="/assets/index.html-c20a9e23.js" as="script"><link rel="prefetch" href="/assets/index.html-af52d031.js" as="script"><link rel="prefetch" href="/assets/index.html-9308d7ca.js" as="script"><link rel="prefetch" href="/assets/20.å…³ç³»å‹æ•°æ®åº“å±‚é¢çš„é«˜å¹¶å‘ä¼˜åŒ–.html-610c7929.js" as="script"><link rel="prefetch" href="/assets/Sharding-JDBCåˆ†åº“åˆ†è¡¨åº”ç”¨å®æˆ˜.html-fe196458.js" as="script"><link rel="prefetch" href="/assets/index.html-d1e1f170.js" as="script"><link rel="prefetch" href="/assets/10.ShardingJDBCåˆ†åº“åˆ†è¡¨å®æˆ˜æŒ‡å—.html-fbff4896.js" as="script"><link rel="prefetch" href="/assets/20.ShardingJDBCæºç ä¸å†…æ ¸è§£æ.html-1d5254a6.js" as="script"><link rel="prefetch" href="/assets/index.html-263f14aa.js" as="script"><link rel="prefetch" href="/assets/index.html-768ded15.js" as="script"><link rel="prefetch" href="/assets/index.html-25fcc8f6.js" as="script"><link rel="prefetch" href="/assets/index.html-8e0ddc23.js" as="script"><link rel="prefetch" href="/assets/index.html-ad1ece24.js" as="script"><link rel="prefetch" href="/assets/index.html-fb73493c.js" as="script"><link rel="prefetch" href="/assets/index.html-128d4b71.js" as="script"><link rel="prefetch" href="/assets/index.html-d9f15724.js" as="script"><link rel="prefetch" href="/assets/index.html-72ba2d35.js" as="script"><link rel="prefetch" href="/assets/index.html-951dfe3f.js" as="script"><link rel="prefetch" href="/assets/index.html-c6d45626.js" as="script"><link rel="prefetch" href="/assets/index.html-859c676b.js" as="script"><link rel="prefetch" href="/assets/index.html-fe205ef8.js" as="script"><link rel="prefetch" href="/assets/index.html-0cb20f1c.js" as="script"><link rel="prefetch" href="/assets/index.html-102cfae4.js" as="script"><link rel="prefetch" href="/assets/index.html-ae48c1df.js" as="script"><link rel="prefetch" href="/assets/index.html-814f7f1d.js" as="script"><link rel="prefetch" href="/assets/index.html-19779ea0.js" as="script"><link rel="prefetch" href="/assets/index.html-09cc3a43.js" as="script"><link rel="prefetch" href="/assets/index.html-cccbb13c.js" as="script"><link rel="prefetch" href="/assets/index.html-b8130103.js" as="script"><link rel="prefetch" href="/assets/index.html-1b4e8107.js" as="script"><link rel="prefetch" href="/assets/index.html-7045cf91.js" as="script"><link rel="prefetch" href="/assets/index.html-82e85232.js" as="script"><link rel="prefetch" href="/assets/index.html-46b70d01.js" as="script"><link rel="prefetch" href="/assets/index.html-a6c441fe.js" as="script"><link rel="prefetch" href="/assets/index.html-38736ecd.js" as="script"><link rel="prefetch" href="/assets/index.html-3d160279.js" as="script"><link rel="prefetch" href="/assets/index.html-70184545.js" as="script"><link rel="prefetch" href="/assets/index.html-0d7f9c84.js" as="script"><link rel="prefetch" href="/assets/index.html-50ec0628.js" as="script"><link rel="prefetch" href="/assets/index.html-6647c88b.js" as="script"><link rel="prefetch" href="/assets/index.html-e5fca210.js" as="script"><link rel="prefetch" href="/assets/index.html-4622c4d0.js" as="script"><link rel="prefetch" href="/assets/index.html-0aa16773.js" as="script"><link rel="prefetch" href="/assets/index.html-bcad5cb1.js" as="script"><link rel="prefetch" href="/assets/index.html-63434f2e.js" as="script"><link rel="prefetch" href="/assets/index.html-645f2ddf.js" as="script"><link rel="prefetch" href="/assets/index.html-a8a57423.js" as="script"><link rel="prefetch" href="/assets/index.html-60388c3a.js" as="script"><link rel="prefetch" href="/assets/index.html-159ca966.js" as="script"><link rel="prefetch" href="/assets/index.html-f0d68cb4.js" as="script"><link rel="prefetch" href="/assets/index.html-fbc23d80.js" as="script"><link rel="prefetch" href="/assets/index.html-d478e84e.js" as="script"><link rel="prefetch" href="/assets/index.html-2c89d1e5.js" as="script"><link rel="prefetch" href="/assets/index.html-22f6ba4c.js" as="script"><link rel="prefetch" href="/assets/index.html-8d73c7f5.js" as="script"><link rel="prefetch" href="/assets/index.html-1534c5b2.js" as="script"><link rel="prefetch" href="/assets/index.html-7c9f70b1.js" as="script"><link rel="prefetch" href="/assets/index.html-e60f4990.js" as="script"><link rel="prefetch" href="/assets/index.html-775dacd4.js" as="script"><link rel="prefetch" href="/assets/index.html-cd6512b5.js" as="script"><link rel="prefetch" href="/assets/index.html-0df55126.js" as="script"><link rel="prefetch" href="/assets/index.html-ee2ee741.js" as="script"><link rel="prefetch" href="/assets/index.html-0cefaac0.js" as="script"><link rel="prefetch" href="/assets/Seataäº‹åŠ¡æ¨¡å¼.html-c1a2d7b8.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡ç»„ä»¶Seata.html-1dd75d49.js" as="script"><link rel="prefetch" href="/assets/index.html-8129550b.js" as="script"><link rel="prefetch" href="/assets/index.html-e6f50774.js" as="script"><link rel="prefetch" href="/assets/index.html-881fba3f.js" as="script"><link rel="prefetch" href="/assets/02.RocketMQå¼€å‘æ¨¡å‹ä¸ç”Ÿäº§ç¯å¢ƒé—®é¢˜å‰–æ.html-eb0655fe.js" as="script"><link rel="prefetch" href="/assets/404.html-f4f9fdbe.js" as="script"><link rel="prefetch" href="/assets/index.html-ccedd87a.js" as="script"><link rel="prefetch" href="/assets/index.html-6b635626.js" as="script"><link rel="prefetch" href="/assets/index.html-0d639806.js" as="script"><link rel="prefetch" href="/assets/index.html-19b5aac4.js" as="script"><link rel="prefetch" href="/assets/index.html-f3c1ea90.js" as="script"><link rel="prefetch" href="/assets/index.html-e4505c26.js" as="script"><link rel="prefetch" href="/assets/index.html-c67c6358.js" as="script"><link rel="prefetch" href="/assets/index.html-08bdbe35.js" as="script"><link rel="prefetch" href="/assets/index.html-39a19522.js" as="script"><link rel="prefetch" href="/assets/index.html-4e6ecfce.js" as="script"><link rel="prefetch" href="/assets/index.html-c37db087.js" as="script"><link rel="prefetch" href="/assets/index.html-7f2f880b.js" as="script"><link rel="prefetch" href="/assets/index.html-f8546af5.js" as="script"><link rel="prefetch" href="/assets/index.html-36e6cb8c.js" as="script"><link rel="prefetch" href="/assets/index.html-27371869.js" as="script"><link rel="prefetch" href="/assets/index.html-4c15c6fc.js" as="script"><link rel="prefetch" href="/assets/index.html-116aca17.js" as="script"><link rel="prefetch" href="/assets/index.html-2a643c60.js" as="script"><link rel="prefetch" href="/assets/index.html-21236a9b.js" as="script"><link rel="prefetch" href="/assets/index.html-b238d9f4.js" as="script"><link rel="prefetch" href="/assets/index.html-46e55ee3.js" as="script"><link rel="prefetch" href="/assets/index.html-6d53c5d1.js" as="script"><link rel="prefetch" href="/assets/index.html-778d883e.js" as="script"><link rel="prefetch" href="/assets/index.html-d798a209.js" as="script"><link rel="prefetch" href="/assets/index.html-9fa57983.js" as="script"><link rel="prefetch" href="/assets/index.html-ab8b6fb7.js" as="script"><link rel="prefetch" href="/assets/index.html-200c9b62.js" as="script"><link rel="prefetch" href="/assets/index.html-d67216d5.js" as="script"><link rel="prefetch" href="/assets/index.html-30ef2e2b.js" as="script"><link rel="prefetch" href="/assets/index.html-2a6dfb95.js" as="script"><link rel="prefetch" href="/assets/index.html-3fd779a7.js" as="script"><link rel="prefetch" href="/assets/index.html-0118c6d9.js" as="script"><link rel="prefetch" href="/assets/index.html-41b511cf.js" as="script"><link rel="prefetch" href="/assets/index.html-942ff972.js" as="script"><link rel="prefetch" href="/assets/index.html-2be3f4a2.js" as="script"><link rel="prefetch" href="/assets/index.html-4b04c8af.js" as="script"><link rel="prefetch" href="/assets/index.html-f3f33451.js" as="script"><link rel="prefetch" href="/assets/index.html-940c35a3.js" as="script"><link rel="prefetch" href="/assets/index.html-1a8f23e9.js" as="script"><link rel="prefetch" href="/assets/index.html-c93e5cd2.js" as="script"><link rel="prefetch" href="/assets/index.html-6508b456.js" as="script"><link rel="prefetch" href="/assets/index.html-d92890df.js" as="script"><link rel="prefetch" href="/assets/index.html-b2b41008.js" as="script"><link rel="prefetch" href="/assets/index.html-ed0506a1.js" as="script"><link rel="prefetch" href="/assets/index.html-ac4c44c1.js" as="script"><link rel="prefetch" href="/assets/index.html-0ef231d8.js" as="script"><link rel="prefetch" href="/assets/intro.html-1534cff9.js" as="script"><link rel="prefetch" href="/assets/index.html-b9ef54d3.js" as="script"><link rel="prefetch" href="/assets/slides.html-c1f13126.js" as="script"><link rel="prefetch" href="/assets/index.html-c41c17ee.js" as="script"><link rel="prefetch" href="/assets/index.html-33a28639.js" as="script"><link rel="prefetch" href="/assets/index.html-99549339.js" as="script"><link rel="prefetch" href="/assets/04-Springä¹‹Beanç”Ÿå‘½å‘¨æœŸæºç è§£æä¸Š.html-ef0edff8.js" as="script"><link rel="prefetch" href="/assets/index.html-9bb02a02.js" as="script"><link rel="prefetch" href="/assets/index.html-593591fd.js" as="script"><link rel="prefetch" href="/assets/index.html-bc476d77.js" as="script"><link rel="prefetch" href="/assets/index.html-0411d0ed.js" as="script"><link rel="prefetch" href="/assets/index.html-5c950c27.js" as="script"><link rel="prefetch" href="/assets/index.html-fd5fb029.js" as="script"><link rel="prefetch" href="/assets/index.html-19bcbe86.js" as="script"><link rel="prefetch" href="/assets/index.html-11858a28.js" as="script"><link rel="prefetch" href="/assets/index.html-123e5ffb.js" as="script"><link rel="prefetch" href="/assets/index.html-c04a70de.js" as="script"><link rel="prefetch" href="/assets/index.html-3cb86069.js" as="script"><link rel="prefetch" href="/assets/index.html-7cead407.js" as="script"><link rel="prefetch" href="/assets/index.html-f35dbb09.js" as="script"><link rel="prefetch" href="/assets/index.html-b2e85ea0.js" as="script"><link rel="prefetch" href="/assets/index.html-f849173e.js" as="script"><link rel="prefetch" href="/assets/index.html-789c7f96.js" as="script"><link rel="prefetch" href="/assets/index.html-4fffbeeb.js" as="script"><link rel="prefetch" href="/assets/index.html-859e3097.js" as="script"><link rel="prefetch" href="/assets/index.html-4d3422c7.js" as="script"><link rel="prefetch" href="/assets/index.html-0292b67e.js" as="script"><link rel="prefetch" href="/assets/00.ç«™åœ¨å…¨å±€è§†è§’ç†è§£ç³»ç»Ÿé«˜å¹¶å‘.html-518d6a0e.js" as="script"><link rel="prefetch" href="/assets/index.html-97a62811.js" as="script"><link rel="prefetch" href="/assets/10.BIO NIOç¼–ç¨‹ä¸ç›´æ¥å†…å­˜é›¶æ‹·è´.html-df29a1a2.js" as="script"><link rel="prefetch" href="/assets/index.html-8c267f92.js" as="script"><link rel="prefetch" href="/assets/index.html-6c51f37f.js" as="script"><link rel="prefetch" href="/assets/index.html-1b69acc6.js" as="script"><link rel="prefetch" href="/assets/index.html-b5ab3d0a.js" as="script"><link rel="prefetch" href="/assets/100.é«˜å¹¶å‘ç¼“å­˜å®æˆ˜.html-04480c7b.js" as="script"><link rel="prefetch" href="/assets/index.html-5f798258.js" as="script"><link rel="prefetch" href="/assets/30.å¾®æœåŠ¡æ¶æ„æ‹†åˆ†å®æˆ˜.html-ff8d33ef.js" as="script"><link rel="prefetch" href="/assets/index.html-5f36b633.js" as="script"><link rel="prefetch" href="/assets/50.å¾®æœåŠ¡ç½‘å…³æ•´åˆOAuth2.0æˆæƒä¸­å¿ƒ.html-4cbc5e0a.js" as="script"><link rel="prefetch" href="/assets/index.html-79a9dcad.js" as="script"><link rel="prefetch" href="/assets/index.html-888d5791.js" as="script"><link rel="prefetch" href="/assets/index.html-45485371.js" as="script"><link rel="prefetch" href="/assets/index.html-fe8b12e5.js" as="script"><link rel="prefetch" href="/assets/å·¥å‚æ¨¡å¼.html-5d00ddae.js" as="script"><link rel="prefetch" href="/assets/å»ºé€ æ¨¡å¼.html-2f896000.js" as="script"><link rel="prefetch" href="/assets/index.html-f4cf0d43.js" as="script"><link rel="prefetch" href="/assets/index.html-bdcaed66.js" as="script"><link rel="prefetch" href="/assets/index.html-5e8162db.js" as="script"><link rel="prefetch" href="/assets/index.html-1053a2cd.js" as="script"><link rel="prefetch" href="/assets/index.html-b5c55f02.js" as="script"><link rel="prefetch" href="/assets/index.html-43dca84a.js" as="script"><link rel="prefetch" href="/assets/00.é«˜æ€§èƒ½MySQL-MySQLæ¶æ„.html-29da47a5.js" as="script"><link rel="prefetch" href="/assets/index.html-85748a34.js" as="script"><link rel="prefetch" href="/assets/index.html-82f9645c.js" as="script"><link rel="prefetch" href="/assets/index.html-5d93c981.js" as="script"><link rel="prefetch" href="/assets/index.html-b0527e36.js" as="script"><link rel="prefetch" href="/assets/index.html-f2247e3b.js" as="script"><link rel="prefetch" href="/assets/index.html-248a2ffe.js" as="script"><link rel="prefetch" href="/assets/index.html-b2b987f8.js" as="script"><link rel="prefetch" href="/assets/index.html-83d8990c.js" as="script"><link rel="prefetch" href="/assets/index.html-241661b4.js" as="script"><link rel="prefetch" href="/assets/06.MySQLäº‹åŠ¡åŸç†ä¸ä¼˜åŒ–æœ€ä½³å®è·µ.html-4175bb43.js" as="script"><link rel="prefetch" href="/assets/index.html-807bf4b3.js" as="script"><link rel="prefetch" href="/assets/index.html-dd33c233.js" as="script"><link rel="prefetch" href="/assets/index.html-4232d92b.js" as="script"><link rel="prefetch" href="/assets/index.html-3967073d.js" as="script"><link rel="prefetch" href="/assets/index.html-92dd5d75.js" as="script"><link rel="prefetch" href="/assets/index.html-0f01692d.js" as="script"><link rel="prefetch" href="/assets/20.å…³ç³»å‹æ•°æ®åº“å±‚é¢çš„é«˜å¹¶å‘ä¼˜åŒ–.html-b1767083.js" as="script"><link rel="prefetch" href="/assets/Sharding-JDBCåˆ†åº“åˆ†è¡¨åº”ç”¨å®æˆ˜.html-c0c4ed01.js" as="script"><link rel="prefetch" href="/assets/index.html-e2f05784.js" as="script"><link rel="prefetch" href="/assets/10.ShardingJDBCåˆ†åº“åˆ†è¡¨å®æˆ˜æŒ‡å—.html-d40c40d5.js" as="script"><link rel="prefetch" href="/assets/20.ShardingJDBCæºç ä¸å†…æ ¸è§£æ.html-4c6f716b.js" as="script"><link rel="prefetch" href="/assets/index.html-519339f5.js" as="script"><link rel="prefetch" href="/assets/index.html-c18428dd.js" as="script"><link rel="prefetch" href="/assets/index.html-07f44b51.js" as="script"><link rel="prefetch" href="/assets/index.html-a624eba4.js" as="script"><link rel="prefetch" href="/assets/index.html-c48fb7bf.js" as="script"><link rel="prefetch" href="/assets/index.html-90d7e407.js" as="script"><link rel="prefetch" href="/assets/index.html-06581ff6.js" as="script"><link rel="prefetch" href="/assets/index.html-ae50071f.js" as="script"><link rel="prefetch" href="/assets/index.html-7fd2c1d7.js" as="script"><link rel="prefetch" href="/assets/index.html-a3aa9d52.js" as="script"><link rel="prefetch" href="/assets/index.html-5be4934b.js" as="script"><link rel="prefetch" href="/assets/index.html-39cba0c1.js" as="script"><link rel="prefetch" href="/assets/index.html-3288f0b7.js" as="script"><link rel="prefetch" href="/assets/index.html-8780dd0c.js" as="script"><link rel="prefetch" href="/assets/index.html-a467bfa9.js" as="script"><link rel="prefetch" href="/assets/index.html-2c6c5ea2.js" as="script"><link rel="prefetch" href="/assets/index.html-07a1b646.js" as="script"><link rel="prefetch" href="/assets/index.html-d75eed32.js" as="script"><link rel="prefetch" href="/assets/index.html-433879d8.js" as="script"><link rel="prefetch" href="/assets/index.html-880aa5b3.js" as="script"><link rel="prefetch" href="/assets/index.html-e876545f.js" as="script"><link rel="prefetch" href="/assets/index.html-c5151dd6.js" as="script"><link rel="prefetch" href="/assets/index.html-ad73073a.js" as="script"><link rel="prefetch" href="/assets/index.html-ecb456de.js" as="script"><link rel="prefetch" href="/assets/index.html-041a51c1.js" as="script"><link rel="prefetch" href="/assets/index.html-228f661f.js" as="script"><link rel="prefetch" href="/assets/index.html-4c6c0b82.js" as="script"><link rel="prefetch" href="/assets/index.html-cf92b798.js" as="script"><link rel="prefetch" href="/assets/index.html-63a5728b.js" as="script"><link rel="prefetch" href="/assets/index.html-d8f8d18f.js" as="script"><link rel="prefetch" href="/assets/index.html-ee028baf.js" as="script"><link rel="prefetch" href="/assets/index.html-67d7e0d7.js" as="script"><link rel="prefetch" href="/assets/index.html-4542f54b.js" as="script"><link rel="prefetch" href="/assets/index.html-e45b0d7c.js" as="script"><link rel="prefetch" href="/assets/index.html-8a3c7439.js" as="script"><link rel="prefetch" href="/assets/index.html-9100611e.js" as="script"><link rel="prefetch" href="/assets/index.html-982db96e.js" as="script"><link rel="prefetch" href="/assets/index.html-75db7947.js" as="script"><link rel="prefetch" href="/assets/index.html-c1486706.js" as="script"><link rel="prefetch" href="/assets/index.html-f4d421e4.js" as="script"><link rel="prefetch" href="/assets/index.html-741750a6.js" as="script"><link rel="prefetch" href="/assets/index.html-459a901f.js" as="script"><link rel="prefetch" href="/assets/index.html-74a206d2.js" as="script"><link rel="prefetch" href="/assets/index.html-1edcf98d.js" as="script"><link rel="prefetch" href="/assets/index.html-860d465c.js" as="script"><link rel="prefetch" href="/assets/index.html-4c9840cd.js" as="script"><link rel="prefetch" href="/assets/index.html-009cbb5a.js" as="script"><link rel="prefetch" href="/assets/index.html-6a627085.js" as="script"><link rel="prefetch" href="/assets/index.html-0001981f.js" as="script"><link rel="prefetch" href="/assets/index.html-8e9ccb9d.js" as="script"><link rel="prefetch" href="/assets/index.html-e3af014b.js" as="script"><link rel="prefetch" href="/assets/index.html-991e95c6.js" as="script"><link rel="prefetch" href="/assets/index.html-a60497e1.js" as="script"><link rel="prefetch" href="/assets/index.html-c93dbbf6.js" as="script"><link rel="prefetch" href="/assets/index.html-85335f63.js" as="script"><link rel="prefetch" href="/assets/Seataäº‹åŠ¡æ¨¡å¼.html-e750a9ca.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡ç»„ä»¶Seata.html-10f3d852.js" as="script"><link rel="prefetch" href="/assets/index.html-225af986.js" as="script"><link rel="prefetch" href="/assets/index.html-af28632d.js" as="script"><link rel="prefetch" href="/assets/index.html-3042fd82.js" as="script"><link rel="prefetch" href="/assets/02.RocketMQå¼€å‘æ¨¡å‹ä¸ç”Ÿäº§ç¯å¢ƒé—®é¢˜å‰–æ.html-9bda0661.js" as="script"><link rel="prefetch" href="/assets/404.html-f74ec574.js" as="script"><link rel="prefetch" href="/assets/index.html-c5e3297b.js" as="script"><link rel="prefetch" href="/assets/index.html-24493dad.js" as="script"><link rel="prefetch" href="/assets/index.html-d8325fa4.js" as="script"><link rel="prefetch" href="/assets/index.html-d016ee37.js" as="script"><link rel="prefetch" href="/assets/index.html-767cfa58.js" as="script"><link rel="prefetch" href="/assets/index.html-936e543d.js" as="script"><link rel="prefetch" href="/assets/index.html-239174d3.js" as="script"><link rel="prefetch" href="/assets/index.html-67b87889.js" as="script"><link rel="prefetch" href="/assets/index.html-8a406f75.js" as="script"><link rel="prefetch" href="/assets/index.html-f4b35969.js" as="script"><link rel="prefetch" href="/assets/index.html-51708553.js" as="script"><link rel="prefetch" href="/assets/index.html-570ecc73.js" as="script"><link rel="prefetch" href="/assets/index.html-9d65b19a.js" as="script"><link rel="prefetch" href="/assets/index.html-3e573cf2.js" as="script"><link rel="prefetch" href="/assets/index.html-bdc5ba4b.js" as="script"><link rel="prefetch" href="/assets/index.html-49d045e2.js" as="script"><link rel="prefetch" href="/assets/index.html-ccb8fb88.js" as="script"><link rel="prefetch" href="/assets/index.html-fa60eb51.js" as="script"><link rel="prefetch" href="/assets/index.html-ffbf75c6.js" as="script"><link rel="prefetch" href="/assets/index.html-35dbd033.js" as="script"><link rel="prefetch" href="/assets/index.html-74ed93fa.js" as="script"><link rel="prefetch" href="/assets/index.html-8a9616f5.js" as="script"><link rel="prefetch" href="/assets/index.html-6f88a53e.js" as="script"><link rel="prefetch" href="/assets/index.html-7d3a4c18.js" as="script"><link rel="prefetch" href="/assets/index.html-1732a879.js" as="script"><link rel="prefetch" href="/assets/index.html-a48cdcb6.js" as="script"><link rel="prefetch" href="/assets/index.html-4b7dec97.js" as="script"><link rel="prefetch" href="/assets/index.html-5be637ac.js" as="script"><link rel="prefetch" href="/assets/index.html-eb906ebe.js" as="script"><link rel="prefetch" href="/assets/index.html-7276c6c9.js" as="script"><link rel="prefetch" href="/assets/index.html-edd3dae5.js" as="script"><link rel="prefetch" href="/assets/index.html-a90d842b.js" as="script"><link rel="prefetch" href="/assets/index.html-c658b86f.js" as="script"><link rel="prefetch" href="/assets/index.html-154ecd8f.js" as="script"><link rel="prefetch" href="/assets/index.html-a8f7d25f.js" as="script"><link rel="prefetch" href="/assets/index.html-2451b953.js" as="script"><link rel="prefetch" href="/assets/index.html-c4ed2fb0.js" as="script"><link rel="prefetch" href="/assets/index.html-3716febc.js" as="script"><link rel="prefetch" href="/assets/index.html-42098412.js" as="script"><link rel="prefetch" href="/assets/index.html-38dbc255.js" as="script"><link rel="prefetch" href="/assets/index.html-00584c59.js" as="script"><link rel="prefetch" href="/assets/index.html-a4aef757.js" as="script"><link rel="prefetch" href="/assets/index.html-b50135f9.js" as="script"><link rel="prefetch" href="/assets/index.html-b470873d.js" as="script"><link rel="prefetch" href="/assets/index.html-4ce33c0c.js" as="script"><link rel="prefetch" href="/assets/index.html-8450ba35.js" as="script"><link rel="prefetch" href="/assets/giscus-52604b1e.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-d0065dda.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-aba27bbf.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-2450701e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="å­¦ä¹ ç¬”è®°"><!----><span class="site-name hide-in-pad">å­¦ä¹ ç¬”è®°</span></a><!--]--><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Docker Composeé¡¹ç›®éƒ¨ç½²</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">æ±Ÿ</span></span><span property="author" content="æ±Ÿ"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2022-11-10T11:14:48.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 17 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT17M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category4 clickable" role="navigation">Docker</span><!--]--><meta property="articleSection" content="Docker"></span><!----></div><hr></div><!----><!----><div class="theme-hope-content"><p><strong>Docker Composeä»‹ç»</strong></p><p>ä½¿ç”¨å¾®æœåŠ¡æ¶æ„çš„åº”ç”¨ç³»ç»Ÿä¸€èˆ¬åŒ…å«è‹¥å¹²ä¸ªå¾®æœåŠ¡ï¼Œæ¯ä¸ªå¾®æœåŠ¡ä¸€èˆ¬éƒ½ä¼šéƒ¨ç½²å¤šä¸ªå®ä¾‹ã€‚å¦‚æœæ¯ä¸ªå¾®æœåŠ¡éƒ½è¦æ‰‹åŠ¨å¯åœï¼Œé‚£ä¹ˆæ•ˆç‡ä¹‹ä½ã€ç»´æŠ¤é‡ä¹‹å¤§å¯æƒ³è€ŒçŸ¥ã€‚æœ¬èŠ‚è¯¾å°†è®¨è®ºå¦‚ä½•ä½¿ç”¨ Docker Composeæ¥è½»æ¾ã€é«˜æ•ˆåœ°ç®¡ç†å®¹å™¨ã€‚ä¸ºäº†ç®€å•èµ·è§å°† Docker Composeç®€ç§°ä¸º Composeã€‚</p><p>Compose æ˜¯ä¸€ä¸ªç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨çš„Dockeråº”ç”¨çš„å·¥å…·ã€‚ä½¿ç”¨Composeï¼Œä½ å¯ä»¥åœ¨ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼ˆyamlæ ¼å¼ï¼‰ä¸­é…ç½®ä½ åº”ç”¨çš„æœåŠ¡ï¼Œç„¶åä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå³å¯åˆ›å»ºå¹¶å¯åŠ¨é…ç½®ä¸­å¼•ç”¨çš„æ‰€æœ‰æœåŠ¡ã€‚ä¸‹é¢æˆ‘ä»¬è¿›å…¥Composeçš„å®æˆ˜å§</p><p><strong>Docker Composeçš„å®‰è£…</strong></p><p>Composeçš„å®‰è£…æœ‰å¤šç§æ–¹å¼ï¼Œä¾‹å¦‚é€šè¿‡shellå®‰è£…ã€é€šè¿‡pipå®‰è£…ã€ä»¥åŠå°†composeä½œä¸ºå®¹å™¨å®‰è£…ç­‰ç­‰ã€‚æœ¬æ–‡è®²è§£é€šè¿‡shellå®‰è£…çš„æ–¹å¼ã€‚å…¶ä»–å®‰è£…æ–¹å¼å¦‚æœ‰å…´è¶£ï¼Œå¯ä»¥æŸ¥çœ‹Dockerçš„å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/install/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># docker composeå®‰è£…æ­¥éª¤</span>
 <span class="token function">sudo</span> yum update
 <span class="token function">sudo</span> yum <span class="token function">install</span> docker-compose-plugin
 <span class="token comment"># æŸ¥çœ‹ç‰ˆæœ¬</span>
 <span class="token function">docker</span> compose version
 
 <span class="token function">rpm</span> <span class="token parameter variable">-e</span> <span class="token parameter variable">--nodeps</span> <span class="token variable"><span class="token variable">`</span><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> docker-compose-plugin<span class="token variable">`</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>Docker Composeå…¥é—¨ç¤ºä¾‹</strong></p><p>Composeçš„ä½¿ç”¨éå¸¸ç®€å•ï¼Œåªéœ€è¦ç¼–å†™ä¸€ä¸ªdocker-compose.ymlï¼Œç„¶åä½¿ç”¨docker-compose å‘½ä»¤æ“ä½œå³å¯ã€‚docker-compose.ymlæè¿°äº†å®¹å™¨çš„é…ç½®ï¼Œè€Œdocker-compose å‘½ä»¤æè¿°äº†å¯¹å®¹å™¨çš„æ“ä½œã€‚æˆ‘ä»¬é¦–å…ˆé€šè¿‡ä¸€ä¸ªç¤ºä¾‹å¿«é€Ÿå…¥é—¨ï¼š</p><p>è¿˜è®°å¾—ä¸ŠèŠ‚è¯¾ï¼Œæˆ‘ä»¬ä½¿ç”¨Dockerfileä¸ºé¡¹ç›®microservice-eureka-serveræ„å»ºDockeré•œåƒå—ï¼Ÿæˆ‘ä»¬è¿˜ä»¥æ­¤é¡¹ç›®ä¸ºä¾‹æµ‹è¯•</p><ul><li>æˆ‘ä»¬åœ¨microservice-eureka-server-0.0.1-SNAPSHOT.jaræ‰€åœ¨ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•ï¼Œåˆ›å»ºdocker-compose.yml æ–‡ä»¶ã€‚</li></ul><p>ç›®å½•æ ‘ç»“æ„å¦‚ä¸‹ï¼š</p><figure><img src="https://img.jssjqd.cn/202211101632515.png" alt="image-20221110163224784" tabindex="0" loading="lazy"><figcaption>image-20221110163224784</figcaption></figure><ul><li>ç„¶ååœ¨docker-compose.yml ä¸­æ·»åŠ å†…å®¹å¦‚ä¸‹ï¼š</li></ul><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">eureka</span><span class="token punctuation">:</span>             <span class="token comment">#æŒ‡å®šæœåŠ¡å</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> microservice<span class="token punctuation">-</span>eureka<span class="token punctuation">-</span>server<span class="token punctuation">:</span>0.0.1  <span class="token comment">#æŒ‡å®šé•œåƒåç§°</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./eureka   <span class="token comment">#æŒ‡å®šDockfileæ‰€åœ¨è·¯å¾„</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8761:8761&quot;</span>   <span class="token comment">#æŒ‡å®šç«¯å£æ˜ å°„</span>
    <span class="token key atrule">expose</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token number">8761</span>          <span class="token comment">#å£°æ˜å®¹å™¨å¯¹å¤–æš´éœ²çš„ç«¯å£ </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>åœ¨docker-compose.yml æ‰€åœ¨è·¯å¾„æ‰§è¡Œï¼š</li></ul><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> compose up ï¼ˆåé¢åŠ -då¯ä»¥åå°å¯åŠ¨ï¼ŒåŠ --buildä¼šé‡æ–°æ„å»ºé•œåƒ<span class="token punctuation">)</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><figure><img src="https://img.jssjqd.cn/202211101633530.png" alt="image-20221110163340129" tabindex="0" loading="lazy"><figcaption>image-20221110163340129</figcaption></figure><p>å¦‚ä¸Šå›¾ï¼Œcomposeå¯åŠ¨ä¼šåšå‡ ä»¶äº‹ï¼š</p><p>1ã€åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„ç½‘ç»œapp_defaultï¼Œé»˜è®¤ä»¥composeæ‰€åœ¨æ–‡ä»¶ç›®å½•ååŠ &quot;_default&quot;å‘½åï¼Œcomposeå†…çš„æ‰€æœ‰å®¹å™¨éƒ½ä¼šåŠ å…¥æ­¤ç½‘ç»œï¼Œå¯ä»¥ç›¸äº’ç”¨æœåŠ¡åè®¿é—®ã€‚</p><p>2ã€å¦‚æœé•œåƒ microservice-eureka-server:0.0.1 ä¸å­˜åœ¨å…ˆæ„å»ºé•œåƒï¼Œå¦‚æœé•œåƒå­˜åœ¨åˆ™ä¸æ„å»ºï¼ŒåŠ ä¸Š --build å‚æ•°å¯ä»¥å¼ºåˆ¶å…ˆæ„å»ºé•œåƒï¼Œå¦‚æœé•œåƒä¹‹å‰æ„å»ºè¿‡ä¸”æ„å»ºæ–‡ä»¶æ²¡æœ‰å˜åŒ–æˆ–æ„å»ºçš„å†…å®¹æ²¡æœ‰å˜åŒ–ï¼Œå°±ç®—åŠ ä¸Š --build å‚æ•°ä¹Ÿä¸ä¼šé‡æ–°æ„å»ºã€‚</p><p>3ã€æ ¹æ®æ„å»ºçš„é•œåƒåˆ›å»ºä¸€ä¸ªåç§°å« app_eureka_1 çš„å®¹å™¨ã€‚</p><p>4ã€å¯åŠ¨å®¹å™¨ã€‚</p><ul><li>è®¿é—®ï¼š<a href="http://xn--IP-wz2c754c5qn:8761/" target="_blank" rel="noopener noreferrer">http://å®¿ä¸»æœºIP:8761/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> ï¼Œå‘ç°å¯ä»¥æ­£å¸¸è®¿é—®eurekaä¸»é¡µã€‚</li></ul><p><strong>Docker Composeç®¡ç†å®¹å™¨çš„ç»“æ„</strong></p><p>Docker Composeå°†æ‰€ç®¡ç†çš„å®¹å™¨åˆ†ä¸ºä¸‰å±‚ï¼Œ<strong>åˆ†åˆ«æ˜¯å·¥ç¨‹ï¼ˆ projectï¼‰ï¼ŒæœåŠ¡ï¼ˆserviceï¼‰ä»¥åŠå®¹å™¨ï¼ˆ containerï¼‰</strong>ã€‚ Docker Composeè¿è¡Œç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼ˆ docker-compose.ymlã€ extendsæ–‡ä»¶æˆ–ç¯å¢ƒå˜é‡æ–‡ä»¶ç­‰ï¼‰ç»„æˆä¸€ä¸ªå·¥ç¨‹ï¼ˆé»˜è®¤ä¸º docker-compose.ymlæ‰€åœ¨ç›®å½•çš„ç›®å½•åç§°ï¼‰ã€‚ä¸€ä¸ªå·¥ç¨‹å¯åŒ…å«å¤šä¸ªæœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡ä¸­å®šä¹‰äº†å®¹å™¨è¿è¡Œçš„é•œåƒã€å‚æ•°å’Œä¾èµ–ï¼Œä¸€ä¸ªæœåŠ¡å¯åŒ…æ‹¬å¤šä¸ªå®¹å™¨å®ä¾‹ã€‚</p><p>ä¸ŠèŠ‚ç¤ºä¾‹é‡Œå·¥ç¨‹åç§°æ˜¯ docker-compose.yml æ‰€åœ¨çš„ç›®å½•åã€‚è¯¥å·¥ç¨‹åŒ…å«äº†1ä¸ªæœåŠ¡ï¼ŒæœåŠ¡åç§°æ˜¯ eurekaï¼Œæ‰§è¡Œ docker-compose upæ—¶ï¼Œå¯åŠ¨äº†eurekaæœåŠ¡çš„1ä¸ªå®¹å™¨å®ä¾‹ã€‚</p><p>åŒä¸€ä¸ªdocker composeå†…éƒ¨çš„å®¹å™¨ä¹‹é—´å¯ä»¥ç”¨æœåŠ¡åç›¸äº’è®¿é—®ï¼Œ<strong>æœåŠ¡åå°±ç›¸å½“äºhostnameï¼Œå¯ä»¥ç›´æ¥ ping æœåŠ¡åï¼Œå¾—åˆ°çš„å°±æ˜¯æœåŠ¡å¯¹åº”å®¹å™¨çš„ipï¼Œå¦‚æœæœåŠ¡åšäº†æ‰©å®¹ï¼Œä¸€ä¸ªæœåŠ¡å¯¹åº”äº†å¤šä¸ªå®¹å™¨ï¼Œåˆ™ ping æœåŠ¡å ä¼šè½®è¯¢è®¿é—®æœåŠ¡å¯¹åº”çš„æ¯å°å®¹å™¨ip ï¼Œdockeråº•å±‚ç”¨äº†LVSç­‰æŠ€æœ¯å¸®æˆ‘ä»¬å®ç°è¿™ä¸ªè´Ÿè½½å‡è¡¡</strong>ã€‚</p><p><strong>docker-compose.ymlå¸¸ç”¨æŒ‡ä»¤</strong></p><p><strong>image</strong></p><p>æŒ‡å®šé•œåƒåç§°æˆ–è€…é•œåƒidï¼Œå¦‚æœè¯¥é•œåƒåœ¨æœ¬åœ°ä¸å­˜åœ¨ï¼ŒComposeä¼šå°è¯•pullä¸‹æ¥ã€‚</p><p>ç¤ºä¾‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> image: <span class="token function">java</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>build</strong></p><p>æŒ‡å®šDockerfileæ–‡ä»¶çš„è·¯å¾„ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªè·¯å¾„ï¼Œä¾‹å¦‚ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>build: ./dir              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç”¨ä»¥æŒ‡å®šDockerfileå’Œå‚æ•°ï¼Œä¾‹å¦‚ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">context</span><span class="token punctuation">:</span> ./dir
  <span class="token key atrule">dockerfile</span><span class="token punctuation">:</span> Dockerfile<span class="token punctuation">-</span>alternate
  <span class="token key atrule">args</span><span class="token punctuation">:</span>
    <span class="token key atrule">buildno</span><span class="token punctuation">:</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>command</strong></p><p>è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å‘½ä»¤ã€‚</p><p>ç¤ºä¾‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>command: bundle <span class="token builtin class-name">exec</span> thin <span class="token parameter variable">-p</span> <span class="token number">3000</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªlistï¼Œç±»ä¼¼äºDockerfileæ€»çš„CMDæŒ‡ä»¤ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>command: <span class="token punctuation">[</span>bundle, exec, thin, -p, <span class="token number">3000</span><span class="token punctuation">]</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>links</strong></p><p>æ˜¾ç¤ºé“¾æ¥åˆ°å…¶ä»–æœåŠ¡ä¸­çš„å®¹å™¨ã€‚å¯ä»¥æŒ‡å®šæœåŠ¡åç§°å’Œé“¾æ¥çš„åˆ«åä½¿ç”¨SERVICE:ALIAS çš„å½¢å¼ï¼Œæˆ–è€…åªæŒ‡å®šæœåŠ¡åç§°ï¼Œç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">web</span><span class="token punctuation">:</span>
  <span class="token key atrule">links</span><span class="token punctuation">:</span>
   <span class="token punctuation">-</span> db
   <span class="token punctuation">-</span> db<span class="token punctuation">:</span>database
   <span class="token punctuation">-</span> redis
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>external_links</strong></p><p>è¡¨ç¤ºé“¾æ¥åˆ°docker-compose.ymlå¤–éƒ¨çš„å®¹å™¨ï¼Œç”šè‡³å¹¶éComposeç®¡ç†çš„å®¹å™¨ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé‚£äº›æä¾›å…±äº«å®¹å™¨æˆ–å…±åŒæœåŠ¡ã€‚æ ¼å¼è·Ÿlinksç±»ä¼¼ï¼Œç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">external_links</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> redis_1
 <span class="token punctuation">-</span> project_db_1<span class="token punctuation">:</span>mysql
 <span class="token punctuation">-</span> project_db_1<span class="token punctuation">:</span>postgresql          
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ports</strong></p><p>æš´éœ²ç«¯å£ä¿¡æ¯ã€‚ä½¿ç”¨å®¿ä¸»ç«¯å£:å®¹å™¨ç«¯å£çš„æ ¼å¼ï¼Œæˆ–è€…ä»…ä»…æŒ‡å®šå®¹å™¨çš„ç«¯å£ï¼ˆæ­¤æ—¶å®¿ä¸»æœºå°†ä¼šéšæœºæŒ‡å®šç«¯å£ï¼‰ï¼Œç±»ä¼¼äºdocker run -p ï¼Œç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">ports</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;3000&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;3000-3005&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;8000:8000&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;9090-9091:8080-8081&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;49100:22&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;127.0.0.1:8001:8001&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;127.0.0.1:5000-5010:5000-5010&quot;</span>        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>expose</strong></p><p>æš´éœ²ç«¯å£ï¼Œåªå°†ç«¯å£æš´éœ²ç»™è¿æ¥çš„æœåŠ¡ï¼Œè€Œä¸æš´éœ²ç»™å®¿ä¸»æœºï¼Œç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">expose</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;3000&quot;</span>
 <span class="token punctuation">-</span> <span class="token string">&quot;8000&quot;</span>            
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>volumes</strong></p><p>å·æŒ‚è½½è·¯å¾„è®¾ç½®ã€‚å¯ä»¥è®¾ç½®å®¿ä¸»æœºè·¯å¾„ ï¼ˆHOST:CONTAINERï¼‰ æˆ–åŠ ä¸Šè®¿é—®æ¨¡å¼ ï¼ˆHOST:CONTAINER:roï¼‰ã€‚ç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">volumes</span><span class="token punctuation">:</span>
  <span class="token comment"># Just specify a path and let the Engine create a volume</span>
  <span class="token punctuation">-</span> /var/lib/mysql

  <span class="token comment"># Specify an absolute path mapping</span>
  <span class="token punctuation">-</span> /opt/data<span class="token punctuation">:</span>/var/lib/mysql

  <span class="token comment"># Path on the host, relative to the Compose file</span>
  <span class="token punctuation">-</span> ./cache<span class="token punctuation">:</span>/tmp/cache

  <span class="token comment"># User-relative path</span>
  <span class="token punctuation">-</span> ~/configs<span class="token punctuation">:</span>/etc/configs/<span class="token punctuation">:</span>ro

  <span class="token comment"># Named volume</span>
  <span class="token punctuation">-</span> datavolume<span class="token punctuation">:</span>/var/lib/mysql       
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>volumes_from</strong></p><p>ä»å¦ä¸€ä¸ªæœåŠ¡æˆ–è€…å®¹å™¨æŒ‚è½½å·ã€‚å¯ä»¥æŒ‡å®šåªè¯»æˆ–è€…å¯è¯»å†™ï¼Œå¦‚æœè®¿é—®æ¨¡å¼æ²¡æœ‰æŒ‡å®šï¼Œåˆ™é»˜è®¤æ˜¯å¯è¯»å†™ã€‚ç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">volumes_from</span><span class="token punctuation">:</span>
 <span class="token punctuation">-</span> service_name
 <span class="token punctuation">-</span> service_name<span class="token punctuation">:</span>ro
 <span class="token punctuation">-</span> container<span class="token punctuation">:</span>container_name
 <span class="token punctuation">-</span> container<span class="token punctuation">:</span>container_name<span class="token punctuation">:</span>rw      
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>environment</strong></p><p>è®¾ç½®ç¯å¢ƒå˜é‡ã€‚å¯ä»¥ä½¿ç”¨æ•°ç»„æˆ–è€…å­—å…¸ä¸¤ç§æ–¹å¼ã€‚åªæœ‰ä¸€ä¸ªkeyçš„ç¯å¢ƒå˜é‡å¯ä»¥åœ¨è¿è¡ŒComposeçš„æœºå™¨ä¸Šæ‰¾åˆ°å¯¹</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">environment</span><span class="token punctuation">:</span>
  <span class="token key atrule">RACK_ENV</span><span class="token punctuation">:</span> development
  <span class="token key atrule">SHOW</span><span class="token punctuation">:</span> <span class="token string">&#39;true&#39;</span>
  <span class="token key atrule">SESSION_SECRET</span><span class="token punctuation">:</span>

<span class="token key atrule">environment</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> RACK_ENV=development
  <span class="token punctuation">-</span> SHOW=true
  <span class="token punctuation">-</span> SESSION_SECRET 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>env_file</strong></p><p>ä»æ–‡ä»¶ä¸­è·å–ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥ä¸ºå•ç‹¬çš„æ–‡ä»¶è·¯å¾„æˆ–åˆ—è¡¨ã€‚å¦‚æœé€šè¿‡ docker-compose -f FILE æŒ‡å®šäº†æ¨¡æ¿æ–‡ä»¶ï¼Œåˆ™ env_file ä¸­è·¯å¾„ä¼šåŸºäºæ¨¡æ¿æ–‡ä»¶è·¯å¾„ã€‚å¦‚æœæœ‰å˜é‡åç§°ä¸ environment æŒ‡ä»¤å†²çªï¼Œåˆ™ä»¥envirment ä¸ºå‡†ã€‚ç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">env_file</span><span class="token punctuation">:</span> .env

<span class="token key atrule">env_file</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> ./common.env
  <span class="token punctuation">-</span> ./apps/web.env
  <span class="token punctuation">-</span> /opt/secrets.env    
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>extends</strong></p><p>ç»§æ‰¿å¦ä¸€ä¸ªæœåŠ¡ï¼ŒåŸºäºå·²æœ‰çš„æœåŠ¡è¿›è¡Œæ‰©å±•ã€‚</p><p><strong>net</strong></p><p>è®¾ç½®ç½‘ç»œæ¨¡å¼ã€‚ç¤ºä¾‹ï¼š</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>net: &quot;bridge&quot;
net: &quot;host&quot;
net: &quot;none&quot;
net: &quot;container:[service name or container name/id]&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>dns</strong></p><p>é…ç½®dnsæœåŠ¡å™¨ã€‚å¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ã€‚ç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">dns</span><span class="token punctuation">:</span> 8.8.8.8
<span class="token key atrule">dns</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> 8.8.8.8
  <span class="token punctuation">-</span> 9.9.9.9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>dns_search</strong></p><p>é…ç½®DNSçš„æœç´¢åŸŸï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå€¼ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œç¤ºä¾‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">dns_search</span><span class="token punctuation">:</span> example.com
<span class="token key atrule">dns_search</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> dc1.example.com
  <span class="token punctuation">-</span> dc2.example.com              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>å…¶ä»–</strong></p><p>docker-compose.yml è¿˜æœ‰å¾ˆå¤šå…¶ä»–å‘½ä»¤ï¼Œè¿™é‡Œä»…æŒ‘é€‰å¸¸ç”¨å‘½ä»¤è¿›è¡Œè®²è§£ï¼Œå…¶å®ƒä¸ä½œèµ˜è¿°ã€‚å¦‚æœæ„Ÿå…´è¶£çš„ï¼Œå¯ä»¥å‚è€ƒdocker-compose.ymlæ–‡ä»¶å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://docs.docker.com/compose/compose-file/" target="_blank" rel="noopener noreferrer">https://docs.docker.com/compose/compose-file/<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p><strong>ç”¨Docker Composeç¼–æ’Spring Cloudç”µå•†é¡¹ç›®å¾®æœåŠ¡</strong></p><p>å¦‚æœå¾®æœåŠ¡è¾ƒå¤šï¼Œåˆ™å¯ä»¥ç”¨docker composeæ¥ç»Ÿä¸€ç¼–æ’ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç”¨docker composeæ¥ç»Ÿä¸€ç¼–æ’ç”µå•†é¡¹ç›®çš„äº”ä¸ªå¾®æœåŠ¡ï¼štulingmall-authcenterï¼Œtulingmall-gatewayï¼Œtulingmall-memberï¼Œtulingmall-orderï¼Œtulingmall-product</p><p><strong>ç¼–æ’ç”µå•†é¡¹ç›®ä¾èµ–ç¯å¢ƒ</strong></p><p>1ã€åˆ›å»ºä¸€ä¸ªç©ºç›®å½•docker-mall</p><p>2ã€åœ¨docker-mallç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç¼–æ’æ–‡ä»¶docker-compose-env.ymlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">mysql</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mysql<span class="token punctuation">:</span><span class="token number">5.7</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mysql
    <span class="token key atrule">command</span><span class="token punctuation">:</span> mysqld <span class="token punctuation">-</span><span class="token punctuation">-</span>character<span class="token punctuation">-</span>set<span class="token punctuation">-</span>server=utf8mb4 <span class="token punctuation">-</span><span class="token punctuation">-</span>collation<span class="token punctuation">-</span>server=utf8mb4_unicode_ci  <span class="token comment">#è¦†ç›–å®¹å™¨å¯åŠ¨åé»˜è®¤æ‰§è¡Œçš„å¯åŠ¨mysqlå‘½ä»¤</span>
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always  <span class="token comment">#å…³æœºæˆ–è€…é‡å¯æœºå™¨æ—¶ï¼ŒdockeråŒæ—¶é‡å¯å®¹å™¨ï¼Œä¸€èˆ¬mysqlæœåŠ¡å¯ä»¥è¿™ä¹ˆè®¾ç½®ï¼Œä¿æŒæœåŠ¡ä¸€ç›´éƒ½åœ¨</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token key atrule">MYSQL_ROOT_PASSWORD</span><span class="token punctuation">:</span> root <span class="token comment">#è®¾ç½®rootå¸å·å¯†ç </span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 3306<span class="token punctuation">:</span><span class="token number">3306</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/mysql/data/db<span class="token punctuation">:</span>/var/lib/mysql <span class="token comment">#æ•°æ®æ–‡ä»¶æŒ‚è½½</span>
      <span class="token punctuation">-</span> /mydata/mysql/data/conf<span class="token punctuation">:</span>/etc/mysql/conf.d <span class="token comment">#é…ç½®æ–‡ä»¶æŒ‚è½½</span>
      <span class="token punctuation">-</span> /mydata/mysql/log<span class="token punctuation">:</span>/var/log/mysql <span class="token comment">#æ—¥å¿—æ–‡ä»¶æŒ‚è½½</span>
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>   
    <span class="token key atrule">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span><span class="token number">5.0</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">command</span><span class="token punctuation">:</span> redis<span class="token punctuation">-</span>server <span class="token punctuation">-</span><span class="token punctuation">-</span>appendonly yes  
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/redis/data<span class="token punctuation">:</span>/data <span class="token comment">#æ•°æ®æ–‡ä»¶æŒ‚è½½</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 6379<span class="token punctuation">:</span><span class="token number">6379</span>
  <span class="token key atrule">rabbitmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> rabbitmq<span class="token punctuation">:</span>3.7.25<span class="token punctuation">-</span>management
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> rabbitmq
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/rabbitmq/data<span class="token punctuation">:</span>/var/lib/rabbitmq <span class="token comment">#æ•°æ®æ–‡ä»¶æŒ‚è½½</span>
      <span class="token punctuation">-</span> /mydata/rabbitmq/log<span class="token punctuation">:</span>/var/log/rabbitmq <span class="token comment">#æ—¥å¿—æ–‡ä»¶æŒ‚è½½</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 5672<span class="token punctuation">:</span><span class="token number">5672</span>
      <span class="token punctuation">-</span> 15672<span class="token punctuation">:</span><span class="token number">15672</span>
  <span class="token key atrule">elasticsearch</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> elasticsearch<span class="token punctuation">:</span>6.4.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> elasticsearch
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;cluster.name=elasticsearch&quot;</span> <span class="token comment">#è®¾ç½®é›†ç¾¤åç§°ä¸ºelasticsearch</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;discovery.type=single-node&quot;</span> <span class="token comment">#ä»¥å•ä¸€èŠ‚ç‚¹æ¨¡å¼å¯åŠ¨</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;ES_JAVA_OPTS=-Xms512m -Xmx512m&quot;</span> <span class="token comment">#è®¾ç½®ä½¿ç”¨jvmå†…å­˜å¤§å°ï¼Œç¨å¾®é…ç½®å¤§ç‚¹ï¼Œä¸ç„¶æœ‰å¯èƒ½å¯åŠ¨ä¸æˆåŠŸ</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/elasticsearch/plugins<span class="token punctuation">:</span>/usr/share/elasticsearch/plugins <span class="token comment">#æ’ä»¶æ–‡ä»¶æŒ‚è½½</span>
      <span class="token punctuation">-</span> /mydata/elasticsearch/data<span class="token punctuation">:</span>/usr/share/elasticsearch/data <span class="token comment">#æ•°æ®æ–‡ä»¶æŒ‚è½½</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9200<span class="token punctuation">:</span><span class="token number">9200</span>
      <span class="token punctuation">-</span> 9300<span class="token punctuation">:</span><span class="token number">9300</span>
  <span class="token key atrule">kibana</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> kibana<span class="token punctuation">:</span>6.4.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> kibana
    <span class="token key atrule">links</span><span class="token punctuation">:</span>  <span class="token comment">#åŒä¸€ä¸ªcomposeæ–‡ä»¶ç®¡ç†çš„æœåŠ¡å¯ä»¥ç›´æ¥ç”¨æœåŠ¡åè®¿é—®ï¼Œå¦‚æœè¦ç»™æœåŠ¡å–åˆ«ååˆ™å¯ä»¥ç”¨linkså®ç°ï¼Œå¦‚ä¸‹é¢çš„eså°±æ˜¯elasticsearchæœåŠ¡çš„åˆ«å</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">:</span>es <span class="token comment">#å¯ä»¥ç”¨esè¿™ä¸ªåŸŸåè®¿é—®elasticsearchæœåŠ¡</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch <span class="token comment">#kibanaåœ¨elasticsearchå¯åŠ¨ä¹‹åå†å¯åŠ¨</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;elasticsearch.hosts=http://es:9200&quot;</span> <span class="token comment">#è®¾ç½®è®¿é—®elasticsearchçš„åœ°å€</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 5601<span class="token punctuation">:</span><span class="token number">5601</span>
  <span class="token key atrule">logstash</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> logstash<span class="token punctuation">:</span>6.4.0
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> logstash
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/logstash/logstash<span class="token punctuation">-</span>springboot.conf<span class="token punctuation">:</span>/usr/share/logstash/pipeline/logstash.conf <span class="token comment">#æŒ‚è½½logstashçš„é…ç½®æ–‡ä»¶ï¼Œdockerå¯¹å•ä¸ªæ–‡ä»¶çš„æŒ‚è½½éœ€è¦å…ˆåœ¨å®¿ä¸»æœºå»ºå¥½å¯¹åº”æ–‡ä»¶æ‰èƒ½æŒ‚è½½æˆåŠŸ</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch <span class="token comment">#kibanaåœ¨elasticsearchå¯åŠ¨ä¹‹åå†å¯åŠ¨</span>
    <span class="token key atrule">links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> elasticsearch<span class="token punctuation">:</span>es <span class="token comment">#å¯ä»¥ç”¨esè¿™ä¸ªåŸŸåè®¿é—®elasticsearchæœåŠ¡</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 4560<span class="token punctuation">:</span><span class="token number">4560</span>
  <span class="token key atrule">mongo</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">:</span><span class="token number">3.2</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> mongo
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/mongo/db<span class="token punctuation">:</span>/data/db <span class="token comment">#æ•°æ®æ–‡ä»¶æŒ‚è½½</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 27017<span class="token punctuation">:</span><span class="token number">27017</span>
  <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> nacos/nacos<span class="token punctuation">-</span>server<span class="token punctuation">:</span>1.4.2
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> nacos
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> MODE=standalone
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/nacos/logs/<span class="token punctuation">:</span>/home/nacos/logs
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> <span class="token string">&quot;8848:8848&quot;</span>
  <span class="token key atrule">zookeeper</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span><span class="token number">3.5</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 2181<span class="token punctuation">:</span><span class="token number">2181</span> 
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/zookeeper/data<span class="token punctuation">:</span>/data
      <span class="token punctuation">-</span> /mydata/zookeeper/conf<span class="token punctuation">:</span>/conf
      
  <span class="token key atrule">rocketmq</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> rocketmqinc/rocketmq
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> rocketmq
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9876<span class="token punctuation">:</span><span class="token number">9876</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/rocketmq/logs<span class="token punctuation">:</span>/home/rocketmq/logs
      <span class="token punctuation">-</span> /mydata/rocketmq/store<span class="token punctuation">:</span>/home/rocketmq/store
    <span class="token key atrule">command</span><span class="token punctuation">:</span> sh mqnamesrv
  <span class="token key atrule">broker</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> rocketmqinc/rocketmq
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> rmqbroker
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 10909<span class="token punctuation">:</span><span class="token number">10909</span>
      <span class="token punctuation">-</span> 10911<span class="token punctuation">:</span><span class="token number">10911</span>
      <span class="token punctuation">-</span> 10912<span class="token punctuation">:</span><span class="token number">10912</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /mydata/rocketmq/logs<span class="token punctuation">:</span>/home/rocketmq/logs
      <span class="token punctuation">-</span> /mydata/rocketmq/store<span class="token punctuation">:</span>/home/rocketmq/store
      <span class="token punctuation">-</span> /mydata/rocketmq/conf/broker.conf<span class="token punctuation">:</span>/opt/rocketmq<span class="token punctuation">-</span>4.4.0/conf/broker.conf  <span class="token comment">#è¿™ä¸ªé…ç½®éœ€è¦å…ˆåœ¨å®¿ä¸»æœºå¯¹åº”ç›®å½•æ”¾å¥½broker.confé…ç½®æ–‡ä»¶,æ–‡ä»¶å†…å®¹å‚è€ƒä¸‹é¢æ–‡æ¡£</span>
    <span class="token key atrule">command</span><span class="token punctuation">:</span> sh mqbroker <span class="token punctuation">-</span>n namesrv<span class="token punctuation">:</span>9876 <span class="token punctuation">-</span>c ../conf/broker.conf
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> rocketmq
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_HOME=/usr/lib/jvm/jre
  <span class="token key atrule">console</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> styletang/rocketmq<span class="token punctuation">-</span>console<span class="token punctuation">-</span>ng
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> rocketmq<span class="token punctuation">-</span>console<span class="token punctuation">-</span>ng
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8076<span class="token punctuation">:</span><span class="token number">8080</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> rocketmq
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_OPTS= <span class="token punctuation">-</span>Dlogging.level.root=info <span class="token punctuation">-</span>Drocketmq.namesrv.addr=rocketmq<span class="token punctuation">:</span><span class="token number">9876</span> 
      <span class="token punctuation">-</span> Dcom.rocketmq.sendMessageWithVIPChannel=false
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>broker.confæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">brokerName</span> <span class="token punctuation">=</span> <span class="token value attr-value">broker-a</span>
<span class="token key attr-name">brokerId</span> <span class="token punctuation">=</span> <span class="token value attr-value">0</span>
<span class="token key attr-name">deleteWhen</span> <span class="token punctuation">=</span> <span class="token value attr-value">04</span>
<span class="token key attr-name">fileReservedTime</span> <span class="token punctuation">=</span> <span class="token value attr-value">48</span>
<span class="token key attr-name">brokerRole</span> <span class="token punctuation">=</span> <span class="token value attr-value">ASYNC_MASTER</span>
<span class="token key attr-name">flushDiskType</span> <span class="token punctuation">=</span> <span class="token value attr-value">ASYNC_FLUSH</span>
<span class="token comment"># å®¿ä¸»æœºIP</span>
<span class="token key attr-name">brokerIP1</span><span class="token punctuation">=</span><span class="token value attr-value">192.168.65.42   </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ã€å¯åŠ¨composeæ‰€æœ‰å®¹å™¨ï¼Œåœ¨docker-mallç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-env.yml up <span class="token parameter variable">-d</span>              
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¸¸ç”¨çš„ä¸€äº›docker-composeå‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># æŸ¥çœ‹composeå†…çš„å®¹å™¨</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml <span class="token function">ps</span>
<span class="token comment"># å…³é—­æˆ–å¯åŠ¨æˆ–é‡å¯composeå†…çš„æŸä¸ªå®¹å™¨</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml stop/start/restart <span class="token operator">&lt;</span>æœåŠ¡å<span class="token operator">&gt;</span>
<span class="token comment"># å…³é—­æˆ–é‡å¯composeæ‰€æœ‰å®¹å™¨</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml stop/restart
<span class="token comment"># æŸ¥çœ‹composeæ‰€æœ‰å®¹å™¨çš„è¿è¡Œæ—¥å¿—</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml logs <span class="token parameter variable">-f</span>
<span class="token comment"># æŸ¥çœ‹composeä¸‹æŸä¸ªå®¹å™¨çš„è¿è¡Œæ—¥å¿—</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml logs <span class="token parameter variable">-f</span> <span class="token operator">&lt;</span>æœåŠ¡å<span class="token operator">&gt;</span>
<span class="token comment"># ä¹Ÿå¯ä»¥æŠŠcomposeçš„å®¹å™¨æ—¥å¿—è¾“å‡ºåˆ°æ—¥å¿—æ–‡ä»¶é‡Œå»ï¼Œç„¶åç”¨tail -f éšæ—¶æŸ¥çœ‹</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml logs <span class="token parameter variable">-f</span> <span class="token operator">&gt;&gt;</span> myDockerCompose.log <span class="token operator">&amp;</span>
<span class="token comment"># é‡æ–°æ„å»ºæœ‰å˜åŒ–çš„é•œåƒå¹¶æ›´æ–°åˆ°å®¹å™¨å†å¯åŠ¨</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml up <span class="token parameter variable">--build</span> <span class="token parameter variable">-d</span>
<span class="token comment"># é‡æ–°åˆ›å»ºdocker-compose.ymlé…ç½®æœ‰å˜åŒ–çš„å®¹å™¨å¹¶å¯åŠ¨</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml up --force-recreate <span class="token parameter variable">-d</span>
<span class="token comment">#åœæ‰å®¹å™¨å†åˆ é™¤å®¹å™¨</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml down        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¼–æ’ç”µå•†å¾®æœåŠ¡</strong></p><p>1ã€åœ¨docker-mallç›®å½•ä¸‹åˆ†åˆ«åˆ›å»ºtulingmall-authcenterï¼Œtulingmall-gatewayï¼Œtulingmall-memberï¼Œtulingmall-orderï¼Œtulingmall-productç›®å½•ã€‚</p><p>2ã€ä¿®æ”¹ç”µå•†é¡¹ç›®ä¸Šé¢è¿™å‡ ä¸ªå¾®æœåŠ¡é…ç½®æ–‡ä»¶é‡Œçš„ä¸­é—´ä»¶é…ç½®ä¸ºä¸Šé¢docker composeé‡Œçš„æœåŠ¡åï¼Œå¹¶æ‰“å¥½jaråŒ…æ”¾å…¥ä¸Šé¢å¯¹åº”çš„æ–‡ä»¶å¤¹ã€‚</p><p>ä»¥tulingmall-productæœåŠ¡ä¸ºä¾‹ï¼Œå¯¹åº”ä¿®æ”¹åçš„é…ç½®æ–‡ä»¶å¦‚ä¸‹(æ³¨æ„ï¼šå¤§å®¶æŒ‰ç…§è‡ªå·±ä¸‹è½½é¡¹ç›®çš„é…ç½®æ–‡ä»¶å»ä¿®æ”¹ï¼Œä¸è¦ç›´æ¥ç”¨æˆ‘è¿™é‡Œçš„é…ç½®ï¼Œæœ‰å¯èƒ½ç‰ˆæœ¬ä¸å¯¹)</p><p>bootstrap.ymlæ–‡ä»¶é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>product
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">config</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span><span class="token number">8848</span> <span class="token comment">#é…ç½®ä¸­å¿ƒçš„åœ°å€</span>
        <span class="token key atrule">file-extension</span><span class="token punctuation">:</span> yml <span class="token comment">#é…ç½®æ–‡ä»¶ç»“å°¾çš„é…ç½®</span>
        <span class="token key atrule">shared-dataids</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>nacos.yml<span class="token punctuation">,</span>tulingmall<span class="token punctuation">-</span>db<span class="token punctuation">-</span>common.yml <span class="token comment">#å›¾çµå•†åŸå…¬å…±é…ç½®</span>
  <span class="token key atrule">profiles</span><span class="token punctuation">:</span>
    <span class="token key atrule">active</span><span class="token punctuation">:</span> dev        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tulingmall-product-dev.ymlæ–‡ä»¶é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">server</span><span class="token punctuation">:</span>
  <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">8866</span>
  <span class="token key atrule">tomcat</span><span class="token punctuation">:</span>
    <span class="token key atrule">max-threads</span><span class="token punctuation">:</span> <span class="token number">100</span>
<span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">application</span><span class="token punctuation">:</span>
    <span class="token key atrule">name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>product
  <span class="token key atrule">redis</span><span class="token punctuation">:</span>
    <span class="token key atrule">host</span><span class="token punctuation">:</span> redis
    <span class="token key atrule">port</span><span class="token punctuation">:</span> <span class="token number">6379</span>
    <span class="token key atrule">password</span><span class="token punctuation">:</span>  <span class="token comment">#å¯†ç </span>
    <span class="token key atrule">timeout</span><span class="token punctuation">:</span> 5000ms
    <span class="token key atrule">lettuce</span><span class="token punctuation">:</span>
      <span class="token key atrule">pool</span><span class="token punctuation">:</span>
        <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">50</span>
        <span class="token key atrule">max-wait</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>1ms
        <span class="token key atrule">max-idle</span><span class="token punctuation">:</span> <span class="token number">8</span>
        <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">0</span>
        
<span class="token key atrule">management</span><span class="token punctuation">:</span> <span class="token comment">#å¼€å¯SpringBoot Adminçš„ç›‘æ§</span>
  <span class="token key atrule">endpoints</span><span class="token punctuation">:</span>
    <span class="token key atrule">web</span><span class="token punctuation">:</span>
      <span class="token key atrule">exposure</span><span class="token punctuation">:</span>
        <span class="token key atrule">include</span><span class="token punctuation">:</span> <span class="token string">&#39;*&#39;</span>
  <span class="token key atrule">endpoint</span><span class="token punctuation">:</span>
    <span class="token key atrule">health</span><span class="token punctuation">:</span>
      <span class="token key atrule">show-details</span><span class="token punctuation">:</span> always

<span class="token key atrule">seata</span><span class="token punctuation">:</span>
  <span class="token key atrule">config</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span><span class="token number">8848</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> nacos
  <span class="token key atrule">registry</span><span class="token punctuation">:</span>
    <span class="token key atrule">type</span><span class="token punctuation">:</span> nacos
  <span class="token key atrule">tx-service-group</span><span class="token punctuation">:</span> my_test_tx_group
  <span class="token key atrule">client</span><span class="token punctuation">:</span>
    <span class="token key atrule">support</span><span class="token punctuation">:</span>
      <span class="token key atrule">spring</span><span class="token punctuation">:</span>
        <span class="token key atrule">datasource-autoproxy</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>

<span class="token comment">#zké…ç½®</span>
<span class="token key atrule">zk</span><span class="token punctuation">:</span>
  <span class="token key atrule">curator</span><span class="token punctuation">:</span>
    <span class="token key atrule">retryCount</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">#é‡è¯•æ¬¡æ•°</span>
    <span class="token key atrule">elapsedTimeMs</span><span class="token punctuation">:</span> <span class="token number">5000</span> <span class="token comment">#</span>
    <span class="token key atrule">connectUrl</span><span class="token punctuation">:</span> zookeeper<span class="token punctuation">:</span><span class="token number">2181</span> <span class="token comment">#zkåœ°å€</span>
    <span class="token key atrule">sessionTimeOutMs</span><span class="token punctuation">:</span> <span class="token number">60000</span> <span class="token comment">#ä¼šè¯è¶…æ—¶æ—¶é—´</span>
    <span class="token key atrule">connectionTimeOutMs</span><span class="token punctuation">:</span> <span class="token number">5000</span> <span class="token comment">#è¿æ¥è¶…æ—¶æ—¶é—´        </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tulingmall-nacos.ymlæ–‡ä»¶é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">cloud</span><span class="token punctuation">:</span>
    <span class="token key atrule">nacos</span><span class="token punctuation">:</span>
      <span class="token key atrule">discovery</span><span class="token punctuation">:</span>
        <span class="token key atrule">server-addr</span><span class="token punctuation">:</span> nacos<span class="token punctuation">:</span><span class="token number">8848</span>      
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>tulingmall-db-common.ymlæ–‡ä»¶é…ç½®ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//db<span class="token punctuation">:</span>3306/micromall<span class="token punctuation">?</span>serverTimezone=UTC<span class="token important">&amp;useSSL=false&amp;useUnicode=true&amp;characterEncoding=UTF-</span><span class="token number">8</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span> root
    <span class="token key atrule">druid</span><span class="token punctuation">:</span>
      <span class="token key atrule">initial-size</span><span class="token punctuation">:</span> <span class="token number">5</span> <span class="token comment">#è¿æ¥æ± åˆå§‹åŒ–å¤§å°</span>
      <span class="token key atrule">min-idle</span><span class="token punctuation">:</span> <span class="token number">10</span> <span class="token comment">#æœ€å°ç©ºé—²è¿æ¥æ•°</span>
      <span class="token key atrule">max-active</span><span class="token punctuation">:</span> <span class="token number">20</span> <span class="token comment">#æœ€å¤§è¿æ¥æ•°</span>
      <span class="token key atrule">web-stat-filter</span><span class="token punctuation">:</span>
        <span class="token key atrule">exclusions</span><span class="token punctuation">:</span> <span class="token string">&quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;</span> <span class="token comment">#ä¸ç»Ÿè®¡è¿™äº›è¯·æ±‚æ•°æ®</span>
      <span class="token key atrule">stat-view-servlet</span><span class="token punctuation">:</span> <span class="token comment">#è®¿é—®ç›‘æ§ç½‘é¡µçš„ç™»å½•ç”¨æˆ·åå’Œå¯†ç </span>
        <span class="token key atrule">login-username</span><span class="token punctuation">:</span> druid
        <span class="token key atrule">login-password</span><span class="token punctuation">:</span> druid
<span class="token key atrule">mybatis</span><span class="token punctuation">:</span>
  <span class="token key atrule">mapper-locations</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> classpath<span class="token punctuation">:</span>dao/<span class="token important">*.xml</span>
    <span class="token punctuation">-</span> classpath<span class="token important">*:com/**/mapper/*.xml</span>       
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>3ã€åœ¨æ¯ä¸ªå¾®æœåŠ¡ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªDockerfileï¼Œå†…å®¹å¦‚ä¸‹ï¼Œä»¥tulingmall-productæœåŠ¡ä¸ºä¾‹ï¼Œå…¶å®ƒå¾®æœåŠ¡éƒ½ç±»ä¼¼ä¿®æ”¹ï¼š</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code><span class="token comment"># åŸºäºå“ªä¸ªé•œåƒ</span>
<span class="token instruction"><span class="token keyword">From</span> java:8</span>
<span class="token comment"># å¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨</span>
<span class="token instruction"><span class="token keyword">ADD</span> tulingmall-product-0.0.1-SNAPSHOT.jar /app.jar</span>
<span class="token comment"># é…ç½®å®¹å™¨å¯åŠ¨åæ‰§è¡Œçš„å‘½ä»¤</span>
<span class="token instruction"><span class="token keyword">ENTRYPOINT</span> [<span class="token string">&quot;java&quot;</span>,<span class="token string">&quot;-jar&quot;</span>,<span class="token string">&quot;/app.jar&quot;</span>]  </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>â€‹</p><p>4ã€åœ¨docker-mallç›®å½•ä¸‹æ–°å»ºå¾®æœåŠ¡ç¼–æ’æ–‡ä»¶docker-compose-app.ymlï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-docker line-numbers-mode" data-ext="docker"><pre class="language-docker"><code>version: &#39;3.8&#39;
services:
  tulingmall-authcenter:
    image: mall/tulingmall-authcenter:0.0.1  #æŒ‡å®šé•œåƒåç§°
    build: ./tulingmall-authcenter  #æŒ‡å®šDockfileæ‰€åœ¨è·¯å¾„
    container_name: tulingmall-authcenter  #æŒ‡å®šå¯åŠ¨å®¹å™¨åç§°
    ports:
      - 9999:9999
    volumes:
      - /etc/localtime:/etc/localtime:ro  #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´ï¼Œroä»£è¡¨readonlyåªè¯»
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:  #è®¿é—®ä¸åœ¨åŒä¸€ä¸ªcomposeæ–‡ä»¶ç®¡ç†çš„æœåŠ¡éœ€è¦ç”¨external_linksï¼Œå‰ææ˜¯è¿™äº›æœåŠ¡éƒ½åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹æ‰èƒ½æ­£å¸¸è®¿é—® 
      - nacos:nacos  #å¯ä»¥ç”¨nacosè¿™ä¸ªåŸŸåè®¿é—®nacosæœåŠ¡
      - mysql:db  #å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
  tulingmall-gateway:
    image: mall/tulingmall-gateway:0.0.1
    build: ./tulingmall-gateway
    container_name: tulingmall-gateway
    ports:
      - 8888:8888
    volumes:
      - /etc/localtime:/etc/localtime:ro #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    depends_on:
      - tulingmall-authcenter #gatewayåœ¨authcenterå¯åŠ¨ä¹‹åå†å¯åŠ¨
    external_links:
      - nacos:nacos
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
  tulingmall-member:
    image: mall/tulingmall-member:0.0.1
    build: ./tulingmall-member
    container_name: tulingmall-member
    ports:
      - 8877:8877
    volumes:
      - /etc/localtime:/etc/localtime:ro #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡
      - mongo
      - redis
      - rabbitmq
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
  tulingmall-product:
    image: mall/tulingmall-product:0.0.1
    build: ./tulingmall-product
    container_name: tulingmall-product
    ports:
      - 8866:8866
    volumes:
      - /etc/localtime:/etc/localtime:ro #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡
      - redis
      - zookeeper
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ 
  tulingmall-order:
    image: mall/tulingmall-order:0.0.1
    build: ./tulingmall-order
    container_name: tulingmall-order
    ports:
      - 8844:8844
    volumes:
      - /etc/localtime:/etc/localtime:ro #åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´
    environment:
      - JAVA_TOOL_OPTIONS=-Xmx1g -Xms1g -XX:MaxMetaspaceSize=512m -javaagent:/agent/skywalking-agent.jar -DSW_AGENT_NAME=tulingmall-order -DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204:11800
    external_links:
      - nacos:nacos
      - mysql:db #å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡
      - redis
      - rabbitmq
      - namesrv:rockermq
    cap_add:
      - SYS_PTRACE #è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ           
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>5ã€å¯åŠ¨composeçš„æ‰€æœ‰å¾®æœåŠ¡å®¹å™¨ï¼Œåœ¨docker-mallç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment">#è¿™é‡Œå¯åŠ¨çš„å¾®æœåŠ¡è·Ÿä¸Šé¢å¯åŠ¨çš„mysqlï¼Œredisè¿™äº›ä¸­é—´ä»¶æœåŠ¡å› ä¸ºéƒ½åœ¨docker-mallç›®å½•ä¸‹ï¼Œå³éƒ½æ˜¯åŒä¸€ä¸ªå·¥ç¨‹ä¸‹ï¼Œé»˜è®¤éƒ½åœ¨ç›¸åŒçš„ç½‘ç»œä¸‹ï¼Œå¯ä»¥ç›¸äº’è®¿é—®</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml up <span class="token parameter variable">-d</span>  
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>6ã€è®¿é—®ä¸‹å¾®æœåŠ¡çš„apiçœ‹æ˜¯å¦éƒ½æ­£å¸¸ï¼Œè®¿é—®æ¥å£å‚æ•°å‚çœ‹è§†é¢‘ï¼Œä¸ä¸€å®šè®¿é—®æˆ‘åˆ—çš„è¿™å‡ ä¸ªæ¥å£ï¼Œå…¶å®ƒçš„æ¥å£ä¹Ÿè¡Œ</p><div class="language-ba line-numbers-mode" data-ext="ba"><pre class="language-ba"><code>1ã€é€šè¿‡ç½‘å…³è®¿é—®ç™»å½•æ¥å£è·å–tokenï¼Œpostæ–¹å¼ï¼š
http://192.168.65.61:8888/sso/login?username=test&amp;password=test  
2ã€é€šè¿‡ç½‘å…³è®¿é—®æ·»åŠ è´­ç‰©è½¦æ¥å£ï¼Œpostæ–¹å¼ï¼š
http://192.168.65.61:8888/cart/add
3ã€é€šè¿‡ç½‘å…³è®¿é—®æŸ¥è¯¢è´­ç‰©è½¦æ¥å£ï¼Œgetæ–¹å¼ï¼š
http://192.168.65.61:8888/cart/list
4ã€é€šè¿‡ç½‘å…³è®¿é—®åˆ›å»ºè®¢å•æ¥å£ï¼Œpostæ–¹å¼ï¼š
http://192.168.65.61:8888/order/generateOrder   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>åŠ¨æ€æ‰©å®¹å¾®æœåŠ¡(å•ç‰©ç†æœºå†…æ‰©å®¹)</strong></p><p>æœ‰æ—¶æˆ‘ä»¬éœ€è¦æ‰©å®¹å¾®æœåŠ¡ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³æŠŠç”¨æˆ·å’Œè®¢å•å¾®æœåŠ¡å„éƒ¨ç½²ä¸¤ä¸ªå¾®æœåŠ¡ï¼Œåˆ™éœ€è¦å°†docker-compose.ymlé‡Œçš„æœåŠ¡çš„ç«¯å£æ˜ å°„å’Œå®¹å™¨åç§°éƒ½æ³¨é‡Šæ‰ï¼Œå› ä¸ºä¸å¯èƒ½ä¸¤ä¸ªè®¢å•æœåŠ¡çš„å®¹å™¨æ˜ å°„åˆ°å®¿ä¸»æœºçš„åŒä¸€ä¸ªç«¯å£ï¼Œä¿®æ”¹ä¹‹åçš„docker-compose-app.ymlå†…å®¹å¦‚ä¸‹ï¼š</p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">&#39;3.8&#39;</span>
<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">tulingmall-authcenter</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>authcenter<span class="token punctuation">:</span>0.0.1  <span class="token comment">#æŒ‡å®šé•œåƒåç§°</span>
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>authcenter  <span class="token comment">#æŒ‡å®šDockfileæ‰€åœ¨è·¯å¾„</span>
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>authcenter  <span class="token comment">#æŒ‡å®šå¯åŠ¨å®¹å™¨åç§°</span>
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 9999<span class="token punctuation">:</span><span class="token number">9999</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro  <span class="token comment">#åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´ï¼Œroä»£è¡¨readonlyåªè¯»</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>  <span class="token comment">#è®¿é—®ä¸åœ¨åŒä¸€ä¸ªcomposeæ–‡ä»¶ç®¡ç†çš„æœåŠ¡éœ€è¦ç”¨external_linksï¼Œå‰ææ˜¯è¿™äº›æœåŠ¡éƒ½åœ¨åŒä¸€ä¸ªç½‘ç»œä¸‹æ‰èƒ½æ­£å¸¸è®¿é—® </span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos  <span class="token comment">#å¯ä»¥ç”¨nacosè¿™ä¸ªåŸŸåè®¿é—®nacosæœåŠ¡</span>
      <span class="token punctuation">-</span> mysql<span class="token punctuation">:</span>db  <span class="token comment">#å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡</span>
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ </span>
  <span class="token key atrule">tulingmall-gateway</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>gateway<span class="token punctuation">:</span>0.0.1
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>gateway
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>gateway
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8888<span class="token punctuation">:</span><span class="token number">8888</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment">#åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> tulingmall<span class="token punctuation">-</span>authcenter <span class="token comment">#gatewayåœ¨authcenterå¯åŠ¨ä¹‹åå†å¯åŠ¨</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ </span>
  <span class="token key atrule">tulingmall-member</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>member<span class="token punctuation">:</span>0.0.1
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>member
    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> tulingmall<span class="token punctuation">-</span>member
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 8877<span class="token punctuation">:</span><span class="token number">8877</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment">#åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos
      <span class="token punctuation">-</span> mysql<span class="token punctuation">:</span>db <span class="token comment">#å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡</span>
      <span class="token punctuation">-</span> mongo
      <span class="token punctuation">-</span> redis
      <span class="token punctuation">-</span> rabbitmq
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ </span>
  <span class="token key atrule">tulingmall-product</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>product<span class="token punctuation">:</span>0.0.1
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>product
<span class="token comment">#    container_name: tulingmall-product</span>
<span class="token comment">#    ports:</span>
<span class="token comment">#      - 8866:8866</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment">#åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">deploy</span><span class="token punctuation">:</span>
      replicas<span class="token punctuation">:</span><span class="token number">2</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos
      <span class="token punctuation">-</span> mysql<span class="token punctuation">:</span>db <span class="token comment">#å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡</span>
      <span class="token punctuation">-</span> redis
      <span class="token punctuation">-</span> zookeeper
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ </span>
  <span class="token key atrule">tulingmall-order</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mall/tulingmall<span class="token punctuation">-</span>order<span class="token punctuation">:</span>0.0.1
    <span class="token key atrule">build</span><span class="token punctuation">:</span> ./tulingmall<span class="token punctuation">-</span>order
<span class="token comment">#    container_name: tulingmall-order</span>
<span class="token comment">#    ports:</span>
<span class="token comment">#      - 8844:8844</span>
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> /etc/localtime<span class="token punctuation">:</span>/etc/localtime<span class="token punctuation">:</span>ro <span class="token comment">#åŒæ­¥å®¿ä¸»æœºä¸å®¹å™¨æ—¶é—´</span>
    <span class="token key atrule">environment</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> JAVA_TOOL_OPTIONS=<span class="token punctuation">-</span>Xmx1g <span class="token punctuation">-</span>Xms1g <span class="token punctuation">-</span>XX<span class="token punctuation">:</span>MaxMetaspaceSize=256m <span class="token punctuation">-</span>javaagent<span class="token punctuation">:</span>/agent/skywalking<span class="token punctuation">-</span>agent.jar <span class="token punctuation">-</span>DSW_AGENT_NAME=tulingmall<span class="token punctuation">-</span>order <span class="token punctuation">-</span>DSW_AGENT_COLLECTOR_BACKEND_SERVICES=192.168.65.204<span class="token punctuation">:</span><span class="token number">11800</span>
    <span class="token key atrule">external_links</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> nacos<span class="token punctuation">:</span>nacos
      <span class="token punctuation">-</span> mysql<span class="token punctuation">:</span>db <span class="token comment">#å¯ä»¥ç”¨dbè¿™ä¸ªåŸŸåè®¿é—®mysqlæœåŠ¡</span>
      <span class="token punctuation">-</span> redis
      <span class="token punctuation">-</span> rabbitmq
      <span class="token punctuation">-</span> namesrv<span class="token punctuation">:</span>rockermq
    <span class="token key atrule">cap_add</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> SYS_PTRACE <span class="token comment">#è¿™ä¸ªå‚æ•°æ˜¯è®©dockerèƒ½æ”¯æŒåœ¨å®¹å™¨é‡Œèƒ½æ‰§è¡Œjdkè‡ªå¸¦çš„ç±»ä¼¼jinfoï¼Œjmapè¿™äº›å‘½ä»¤ï¼Œå¦‚æœä¸éœ€è¦åœ¨å®¹å™¨é‡Œæ‰§è¡Œè¿™äº›å‘½ä»¤å¯ä»¥ä¸åŠ </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œå¦‚ä¸‹æ‰©å®¹å‘½ä»¤ï¼Œ<strong>æœåŠ¡ä¸€æ—¦æ‰©å®¹å¯¹åº”äº†å¤šä¸ªå®¹å™¨ï¼Œåˆ™è®¿é—®æœåŠ¡ådockerä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è´Ÿè½½å‡è¡¡å»è®¿é—®æœåŠ¡å¯¹åº”çš„æ¯å°å®¹å™¨</strong>ï¼š</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml up --force-recreate <span class="token parameter variable">-d</span>     <span class="token comment">#å¿…é¡»å…ˆæ­£å¸¸ç¼–æ’å¾®æœåŠ¡ï¼Œç„¶åæ‰èƒ½åŠ¨æ€æ‰©å®¹,æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œéœ€è¦é‡æ–°åˆ›å»ºå®¹å™¨</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml scale tulingmall-order<span class="token operator">=</span><span class="token number">2</span> tulingmall-product<span class="token operator">=</span><span class="token number">2</span>   
<span class="token comment">#å¦‚æœè¦ç¼©å®¹æ‰§è¡Œå¦‚ä¸‹æ“ä½œ</span>
<span class="token function">docker</span> compose <span class="token parameter variable">-f</span> docker-compose-app.yml scale tulingmall-order<span class="token operator">=</span><span class="token number">1</span> tulingmall-product<span class="token operator">=</span><span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šdocker composeä¸»è¦ç”¨åœ¨å•ç‰©ç†æœºå†…æ‰©å®¹çš„æƒ…å†µï¼Œè¦åšå¤šæœºæ‰©å®¹è¿˜éœ€è‡ªå·±åœ¨å¤šä¸ªæœºå™¨ä¸Šåšå¾ˆå¤šå®šåˆ¶åŒ–é…ç½®ï¼Œå½“ç„¶ï¼Œè¦åšå¤šç‰©ç†æœºæ‰©å®¹ä¸€èˆ¬éƒ½ä¼šç”¨docker swarmæˆ–kubernetesã€‚</p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: thejqd@gmail.com">jiangqingdong</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><!----><div class="copyright">Copyright Â© 2023 æ±Ÿ</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-c8395efa.js" defer></script>
  </body>
</html>
