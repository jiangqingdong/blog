<!DOCTYPE html>
<html lang="zh-CN" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.62" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://mister-hope.github.io/pages/c6a494/"><meta property="og:site_name" content="å­¦ä¹ ç¬”è®°"><meta property="og:title" content="Tomcatæ•´ä½“æ¶æ„åŠå…¶è®¾è®¡ç²¾é«“"><meta property="og:description" content="Tomcatç‰ˆæœ¬ï¼š apache-tomcat-9.0.55 Tomcat9æºç é˜…è¯»ç¯å¢ƒæ­å»ºï¼šTomcat9æºç ç¼–è¯‘ Tomcatçš„è®¾è®¡æ€è·¯ï¼Œæ•´ä½“æ¶æ„ï¼Œè®¾è®¡ç²¾é«“ Tomcatçš„çº¿ç¨‹æ¨¡å‹è¯¦è§£åŠå…¶è°ƒä¼˜ Tomcatçš„ç±»åŠ è½½æœºåˆ¶å’Œçƒ­åŠ è½½çƒ­éƒ¨ç½²çš„å®ç°åŸç†"><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2023-08-01T18:24:48.000Z"><meta property="article:author" content="æ±Ÿ"><meta property="article:published_time" content="2023-03-19T21:14:41.000Z"><meta property="article:modified_time" content="2023-08-01T18:24:48.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Tomcatæ•´ä½“æ¶æ„åŠå…¶è®¾è®¡ç²¾é«“","image":[""],"datePublished":"2023-03-19T21:14:41.000Z","dateModified":"2023-08-01T18:24:48.000Z","author":[{"@type":"Person","name":"æ±Ÿ"}]}</script><title>Tomcatæ•´ä½“æ¶æ„åŠå…¶è®¾è®¡ç²¾é«“ | å­¦ä¹ ç¬”è®°</title><meta name="description" content="Tomcatç‰ˆæœ¬ï¼š apache-tomcat-9.0.55 Tomcat9æºç é˜…è¯»ç¯å¢ƒæ­å»ºï¼šTomcat9æºç ç¼–è¯‘ Tomcatçš„è®¾è®¡æ€è·¯ï¼Œæ•´ä½“æ¶æ„ï¼Œè®¾è®¡ç²¾é«“ Tomcatçš„çº¿ç¨‹æ¨¡å‹è¯¦è§£åŠå…¶è°ƒä¼˜ Tomcatçš„ç±»åŠ è½½æœºåˆ¶å’Œçƒ­åŠ è½½çƒ­éƒ¨ç½²çš„å®ç°åŸç†">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-d225b157.css" as="style"><link rel="stylesheet" href="/assets/style-d225b157.css">
    <link rel="modulepreload" href="/assets/app-18640bff.js"><link rel="modulepreload" href="/assets/index.html-263f14aa.js"><link rel="modulepreload" href="/assets/index.html-02739c7a.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="prefetch" href="/assets/intro.html-d050d194.js" as="script"><link rel="prefetch" href="/assets/index.html-3841b971.js" as="script"><link rel="prefetch" href="/assets/slides.html-4bcf9c90.js" as="script"><link rel="prefetch" href="/assets/index.html-9da1f986.js" as="script"><link rel="prefetch" href="/assets/index.html-06aa5afc.js" as="script"><link rel="prefetch" href="/assets/index.html-3cde2e9d.js" as="script"><link rel="prefetch" href="/assets/04-Springä¹‹Beanç”Ÿå‘½å‘¨æœŸæºç è§£æä¸Š.html-e29efed5.js" as="script"><link rel="prefetch" href="/assets/index.html-056a7c7b.js" as="script"><link rel="prefetch" href="/assets/index.html-196aee9a.js" as="script"><link rel="prefetch" href="/assets/index.html-15356fd6.js" as="script"><link rel="prefetch" href="/assets/index.html-b2ea937f.js" as="script"><link rel="prefetch" href="/assets/index.html-fae2cce2.js" as="script"><link rel="prefetch" href="/assets/index.html-3de3ac13.js" as="script"><link rel="prefetch" href="/assets/index.html-4fc833f7.js" as="script"><link rel="prefetch" href="/assets/index.html-a9380d59.js" as="script"><link rel="prefetch" href="/assets/index.html-0c227f79.js" as="script"><link rel="prefetch" href="/assets/index.html-ca9e9edd.js" as="script"><link rel="prefetch" href="/assets/index.html-3d73ef7f.js" as="script"><link rel="prefetch" href="/assets/index.html-eff3b4ec.js" as="script"><link rel="prefetch" href="/assets/index.html-63004bbb.js" as="script"><link rel="prefetch" href="/assets/index.html-b443c91f.js" as="script"><link rel="prefetch" href="/assets/index.html-eb7dc294.js" as="script"><link rel="prefetch" href="/assets/index.html-b3f10bbb.js" as="script"><link rel="prefetch" href="/assets/index.html-6036577c.js" as="script"><link rel="prefetch" href="/assets/index.html-58352f8e.js" as="script"><link rel="prefetch" href="/assets/index.html-47cee948.js" as="script"><link rel="prefetch" href="/assets/index.html-1460385b.js" as="script"><link rel="prefetch" href="/assets/00.ç«™åœ¨å…¨å±€è§†è§’ç†è§£ç³»ç»Ÿé«˜å¹¶å‘.html-3a469a4c.js" as="script"><link rel="prefetch" href="/assets/index.html-1fffc64f.js" as="script"><link rel="prefetch" href="/assets/10.BIO NIOç¼–ç¨‹ä¸ç›´æ¥å†…å­˜é›¶æ‹·è´.html-0ab5e5cc.js" as="script"><link rel="prefetch" href="/assets/index.html-fbcf9615.js" as="script"><link rel="prefetch" href="/assets/index.html-68bfa6a5.js" as="script"><link rel="prefetch" href="/assets/index.html-a1cae865.js" as="script"><link rel="prefetch" href="/assets/index.html-e045b02c.js" as="script"><link rel="prefetch" href="/assets/index.html-ab40fe3b.js" as="script"><link rel="prefetch" href="/assets/100.é«˜å¹¶å‘ç¼“å­˜å®æˆ˜.html-58f47ed2.js" as="script"><link rel="prefetch" href="/assets/index.html-78dacd72.js" as="script"><link rel="prefetch" href="/assets/30.å¾®æœåŠ¡æ¶æ„æ‹†åˆ†å®æˆ˜.html-d6647704.js" as="script"><link rel="prefetch" href="/assets/index.html-59afda48.js" as="script"><link rel="prefetch" href="/assets/50.å¾®æœåŠ¡ç½‘å…³æ•´åˆOAuth2.0æˆæƒä¸­å¿ƒ.html-d969e8ed.js" as="script"><link rel="prefetch" href="/assets/index.html-edca6dc4.js" as="script"><link rel="prefetch" href="/assets/index.html-1ae26749.js" as="script"><link rel="prefetch" href="/assets/index.html-f93219f2.js" as="script"><link rel="prefetch" href="/assets/index.html-31118532.js" as="script"><link rel="prefetch" href="/assets/å·¥å‚æ¨¡å¼.html-ad9410a3.js" as="script"><link rel="prefetch" href="/assets/å»ºé€ æ¨¡å¼.html-a04d73b9.js" as="script"><link rel="prefetch" href="/assets/index.html-c071222c.js" as="script"><link rel="prefetch" href="/assets/index.html-a4f315bf.js" as="script"><link rel="prefetch" href="/assets/index.html-b0022173.js" as="script"><link rel="prefetch" href="/assets/index.html-38e14dc8.js" as="script"><link rel="prefetch" href="/assets/index.html-cc3cc56c.js" as="script"><link rel="prefetch" href="/assets/index.html-d1e1f170.js" as="script"><link rel="prefetch" href="/assets/10.ShardingJDBCåˆ†åº“åˆ†è¡¨å®æˆ˜æŒ‡å—.html-fbff4896.js" as="script"><link rel="prefetch" href="/assets/20.ShardingJDBCæºç ä¸å†…æ ¸è§£æ.html-1d5254a6.js" as="script"><link rel="prefetch" href="/assets/index.html-9c62895c.js" as="script"><link rel="prefetch" href="/assets/index.html-aa30bf04.js" as="script"><link rel="prefetch" href="/assets/index.html-18f91996.js" as="script"><link rel="prefetch" href="/assets/index.html-d4863e55.js" as="script"><link rel="prefetch" href="/assets/index.html-546eb3a2.js" as="script"><link rel="prefetch" href="/assets/06.MySQLäº‹åŠ¡åŸç†ä¸ä¼˜åŒ–æœ€ä½³å®è·µ.html-0e42a487.js" as="script"><link rel="prefetch" href="/assets/index.html-53d3a5ee.js" as="script"><link rel="prefetch" href="/assets/index.html-2ee74260.js" as="script"><link rel="prefetch" href="/assets/index.html-1f029277.js" as="script"><link rel="prefetch" href="/assets/index.html-c20a9e23.js" as="script"><link rel="prefetch" href="/assets/index.html-af52d031.js" as="script"><link rel="prefetch" href="/assets/index.html-9308d7ca.js" as="script"><link rel="prefetch" href="/assets/index.html-8e0ddc23.js" as="script"><link rel="prefetch" href="/assets/index.html-ad1ece24.js" as="script"><link rel="prefetch" href="/assets/index.html-fb73493c.js" as="script"><link rel="prefetch" href="/assets/index.html-128d4b71.js" as="script"><link rel="prefetch" href="/assets/index.html-d9f15724.js" as="script"><link rel="prefetch" href="/assets/index.html-72ba2d35.js" as="script"><link rel="prefetch" href="/assets/index.html-951dfe3f.js" as="script"><link rel="prefetch" href="/assets/index.html-c6d45626.js" as="script"><link rel="prefetch" href="/assets/index.html-4cecd512.js" as="script"><link rel="prefetch" href="/assets/index.html-99ad6842.js" as="script"><link rel="prefetch" href="/assets/index.html-675c676e.js" as="script"><link rel="prefetch" href="/assets/index.html-2855e279.js" as="script"><link rel="prefetch" href="/assets/index.html-768ded15.js" as="script"><link rel="prefetch" href="/assets/index.html-25fcc8f6.js" as="script"><link rel="prefetch" href="/assets/00.é«˜æ€§èƒ½MySQL-MySQLæ¶æ„.html-6d7f7e17.js" as="script"><link rel="prefetch" href="/assets/index.html-859c676b.js" as="script"><link rel="prefetch" href="/assets/index.html-fe205ef8.js" as="script"><link rel="prefetch" href="/assets/index.html-0cb20f1c.js" as="script"><link rel="prefetch" href="/assets/index.html-102cfae4.js" as="script"><link rel="prefetch" href="/assets/index.html-ae48c1df.js" as="script"><link rel="prefetch" href="/assets/index.html-814f7f1d.js" as="script"><link rel="prefetch" href="/assets/index.html-19779ea0.js" as="script"><link rel="prefetch" href="/assets/index.html-09cc3a43.js" as="script"><link rel="prefetch" href="/assets/index.html-cccbb13c.js" as="script"><link rel="prefetch" href="/assets/index.html-b8130103.js" as="script"><link rel="prefetch" href="/assets/index.html-1b4e8107.js" as="script"><link rel="prefetch" href="/assets/index.html-7045cf91.js" as="script"><link rel="prefetch" href="/assets/index.html-82e85232.js" as="script"><link rel="prefetch" href="/assets/index.html-46b70d01.js" as="script"><link rel="prefetch" href="/assets/index.html-4622c4d0.js" as="script"><link rel="prefetch" href="/assets/index.html-0aa16773.js" as="script"><link rel="prefetch" href="/assets/index.html-bcad5cb1.js" as="script"><link rel="prefetch" href="/assets/index.html-63434f2e.js" as="script"><link rel="prefetch" href="/assets/index.html-50ec0628.js" as="script"><link rel="prefetch" href="/assets/index.html-6647c88b.js" as="script"><link rel="prefetch" href="/assets/index.html-e5fca210.js" as="script"><link rel="prefetch" href="/assets/index.html-a6c441fe.js" as="script"><link rel="prefetch" href="/assets/index.html-38736ecd.js" as="script"><link rel="prefetch" href="/assets/index.html-3d160279.js" as="script"><link rel="prefetch" href="/assets/index.html-70184545.js" as="script"><link rel="prefetch" href="/assets/index.html-0d7f9c84.js" as="script"><link rel="prefetch" href="/assets/index.html-645f2ddf.js" as="script"><link rel="prefetch" href="/assets/index.html-254985ce.js" as="script"><link rel="prefetch" href="/assets/index.html-a8a57423.js" as="script"><link rel="prefetch" href="/assets/index.html-60388c3a.js" as="script"><link rel="prefetch" href="/assets/index.html-159ca966.js" as="script"><link rel="prefetch" href="/assets/index.html-f0d68cb4.js" as="script"><link rel="prefetch" href="/assets/index.html-fbc23d80.js" as="script"><link rel="prefetch" href="/assets/index.html-cd6512b5.js" as="script"><link rel="prefetch" href="/assets/index.html-0df55126.js" as="script"><link rel="prefetch" href="/assets/index.html-ee2ee741.js" as="script"><link rel="prefetch" href="/assets/index.html-0cefaac0.js" as="script"><link rel="prefetch" href="/assets/index.html-e60f4990.js" as="script"><link rel="prefetch" href="/assets/index.html-775dacd4.js" as="script"><link rel="prefetch" href="/assets/index.html-d478e84e.js" as="script"><link rel="prefetch" href="/assets/index.html-2c89d1e5.js" as="script"><link rel="prefetch" href="/assets/index.html-22f6ba4c.js" as="script"><link rel="prefetch" href="/assets/index.html-8d73c7f5.js" as="script"><link rel="prefetch" href="/assets/index.html-1534c5b2.js" as="script"><link rel="prefetch" href="/assets/index.html-7c9f70b1.js" as="script"><link rel="prefetch" href="/assets/Seataäº‹åŠ¡æ¨¡å¼.html-c1a2d7b8.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡ç»„ä»¶Seata.html-1dd75d49.js" as="script"><link rel="prefetch" href="/assets/index.html-8129550b.js" as="script"><link rel="prefetch" href="/assets/index.html-e6f50774.js" as="script"><link rel="prefetch" href="/assets/index.html-881fba3f.js" as="script"><link rel="prefetch" href="/assets/02.RocketMQå¼€å‘æ¨¡å‹ä¸ç”Ÿäº§ç¯å¢ƒé—®é¢˜å‰–æ.html-eb0655fe.js" as="script"><link rel="prefetch" href="/assets/404.html-f4f9fdbe.js" as="script"><link rel="prefetch" href="/assets/index.html-ccedd87a.js" as="script"><link rel="prefetch" href="/assets/index.html-6b635626.js" as="script"><link rel="prefetch" href="/assets/index.html-0d639806.js" as="script"><link rel="prefetch" href="/assets/index.html-19b5aac4.js" as="script"><link rel="prefetch" href="/assets/index.html-f3c1ea90.js" as="script"><link rel="prefetch" href="/assets/index.html-e4505c26.js" as="script"><link rel="prefetch" href="/assets/index.html-c37db087.js" as="script"><link rel="prefetch" href="/assets/index.html-4e6ecfce.js" as="script"><link rel="prefetch" href="/assets/index.html-39a19522.js" as="script"><link rel="prefetch" href="/assets/index.html-c67c6358.js" as="script"><link rel="prefetch" href="/assets/index.html-08bdbe35.js" as="script"><link rel="prefetch" href="/assets/index.html-7f2f880b.js" as="script"><link rel="prefetch" href="/assets/index.html-f8546af5.js" as="script"><link rel="prefetch" href="/assets/index.html-36e6cb8c.js" as="script"><link rel="prefetch" href="/assets/index.html-27371869.js" as="script"><link rel="prefetch" href="/assets/index.html-4c15c6fc.js" as="script"><link rel="prefetch" href="/assets/index.html-116aca17.js" as="script"><link rel="prefetch" href="/assets/index.html-2a643c60.js" as="script"><link rel="prefetch" href="/assets/index.html-21236a9b.js" as="script"><link rel="prefetch" href="/assets/index.html-b238d9f4.js" as="script"><link rel="prefetch" href="/assets/index.html-46e55ee3.js" as="script"><link rel="prefetch" href="/assets/index.html-6d53c5d1.js" as="script"><link rel="prefetch" href="/assets/index.html-778d883e.js" as="script"><link rel="prefetch" href="/assets/index.html-d798a209.js" as="script"><link rel="prefetch" href="/assets/index.html-9fa57983.js" as="script"><link rel="prefetch" href="/assets/index.html-30ef2e2b.js" as="script"><link rel="prefetch" href="/assets/index.html-ab8b6fb7.js" as="script"><link rel="prefetch" href="/assets/index.html-200c9b62.js" as="script"><link rel="prefetch" href="/assets/index.html-d67216d5.js" as="script"><link rel="prefetch" href="/assets/index.html-0118c6d9.js" as="script"><link rel="prefetch" href="/assets/index.html-3fd779a7.js" as="script"><link rel="prefetch" href="/assets/index.html-942ff972.js" as="script"><link rel="prefetch" href="/assets/index.html-2a6dfb95.js" as="script"><link rel="prefetch" href="/assets/index.html-41b511cf.js" as="script"><link rel="prefetch" href="/assets/index.html-2be3f4a2.js" as="script"><link rel="prefetch" href="/assets/index.html-940c35a3.js" as="script"><link rel="prefetch" href="/assets/index.html-f3f33451.js" as="script"><link rel="prefetch" href="/assets/index.html-4b04c8af.js" as="script"><link rel="prefetch" href="/assets/index.html-1a8f23e9.js" as="script"><link rel="prefetch" href="/assets/index.html-c93e5cd2.js" as="script"><link rel="prefetch" href="/assets/index.html-6508b456.js" as="script"><link rel="prefetch" href="/assets/index.html-ed0506a1.js" as="script"><link rel="prefetch" href="/assets/index.html-d92890df.js" as="script"><link rel="prefetch" href="/assets/index.html-b2b41008.js" as="script"><link rel="prefetch" href="/assets/index.html-ac4c44c1.js" as="script"><link rel="prefetch" href="/assets/index.html-0ef231d8.js" as="script"><link rel="prefetch" href="/assets/intro.html-813261b1.js" as="script"><link rel="prefetch" href="/assets/index.html-d3fcfaca.js" as="script"><link rel="prefetch" href="/assets/slides.html-76de142e.js" as="script"><link rel="prefetch" href="/assets/index.html-4aa7c9e1.js" as="script"><link rel="prefetch" href="/assets/index.html-636d875c.js" as="script"><link rel="prefetch" href="/assets/index.html-e8ff592a.js" as="script"><link rel="prefetch" href="/assets/04-Springä¹‹Beanç”Ÿå‘½å‘¨æœŸæºç è§£æä¸Š.html-a9232a8a.js" as="script"><link rel="prefetch" href="/assets/index.html-a2bb6475.js" as="script"><link rel="prefetch" href="/assets/index.html-300e3111.js" as="script"><link rel="prefetch" href="/assets/index.html-b408badb.js" as="script"><link rel="prefetch" href="/assets/index.html-1575c3e9.js" as="script"><link rel="prefetch" href="/assets/index.html-5a76e665.js" as="script"><link rel="prefetch" href="/assets/index.html-8bbf709d.js" as="script"><link rel="prefetch" href="/assets/index.html-b368eea1.js" as="script"><link rel="prefetch" href="/assets/index.html-357360ce.js" as="script"><link rel="prefetch" href="/assets/index.html-8187702a.js" as="script"><link rel="prefetch" href="/assets/index.html-c6c053c5.js" as="script"><link rel="prefetch" href="/assets/index.html-adec0719.js" as="script"><link rel="prefetch" href="/assets/index.html-32631dd5.js" as="script"><link rel="prefetch" href="/assets/index.html-a36b7ea0.js" as="script"><link rel="prefetch" href="/assets/index.html-268ae577.js" as="script"><link rel="prefetch" href="/assets/index.html-67f58ff0.js" as="script"><link rel="prefetch" href="/assets/index.html-fc0a148e.js" as="script"><link rel="prefetch" href="/assets/index.html-6ece092a.js" as="script"><link rel="prefetch" href="/assets/index.html-9b6779ee.js" as="script"><link rel="prefetch" href="/assets/index.html-95e73525.js" as="script"><link rel="prefetch" href="/assets/index.html-57d72978.js" as="script"><link rel="prefetch" href="/assets/00.ç«™åœ¨å…¨å±€è§†è§’ç†è§£ç³»ç»Ÿé«˜å¹¶å‘.html-8c69ca53.js" as="script"><link rel="prefetch" href="/assets/index.html-ba51dbc8.js" as="script"><link rel="prefetch" href="/assets/10.BIO NIOç¼–ç¨‹ä¸ç›´æ¥å†…å­˜é›¶æ‹·è´.html-d3fb75f9.js" as="script"><link rel="prefetch" href="/assets/index.html-d3c0f9bc.js" as="script"><link rel="prefetch" href="/assets/index.html-7e1079c4.js" as="script"><link rel="prefetch" href="/assets/index.html-e75c118d.js" as="script"><link rel="prefetch" href="/assets/index.html-83978536.js" as="script"><link rel="prefetch" href="/assets/index.html-1c307c22.js" as="script"><link rel="prefetch" href="/assets/100.é«˜å¹¶å‘ç¼“å­˜å®æˆ˜.html-a9249361.js" as="script"><link rel="prefetch" href="/assets/index.html-f01c2d7f.js" as="script"><link rel="prefetch" href="/assets/30.å¾®æœåŠ¡æ¶æ„æ‹†åˆ†å®æˆ˜.html-dfdd6af9.js" as="script"><link rel="prefetch" href="/assets/index.html-f4e1bff7.js" as="script"><link rel="prefetch" href="/assets/50.å¾®æœåŠ¡ç½‘å…³æ•´åˆOAuth2.0æˆæƒä¸­å¿ƒ.html-c5e40a60.js" as="script"><link rel="prefetch" href="/assets/index.html-19449062.js" as="script"><link rel="prefetch" href="/assets/index.html-40a0b03e.js" as="script"><link rel="prefetch" href="/assets/index.html-f503759f.js" as="script"><link rel="prefetch" href="/assets/index.html-96322238.js" as="script"><link rel="prefetch" href="/assets/å·¥å‚æ¨¡å¼.html-52803660.js" as="script"><link rel="prefetch" href="/assets/å»ºé€ æ¨¡å¼.html-d7fc91d8.js" as="script"><link rel="prefetch" href="/assets/index.html-508ec895.js" as="script"><link rel="prefetch" href="/assets/index.html-1c49fafb.js" as="script"><link rel="prefetch" href="/assets/index.html-3a047517.js" as="script"><link rel="prefetch" href="/assets/index.html-e6bdcad0.js" as="script"><link rel="prefetch" href="/assets/index.html-ad804261.js" as="script"><link rel="prefetch" href="/assets/index.html-6dba3653.js" as="script"><link rel="prefetch" href="/assets/10.ShardingJDBCåˆ†åº“åˆ†è¡¨å®æˆ˜æŒ‡å—.html-0928f70e.js" as="script"><link rel="prefetch" href="/assets/20.ShardingJDBCæºç ä¸å†…æ ¸è§£æ.html-f4acc92c.js" as="script"><link rel="prefetch" href="/assets/index.html-017d22cd.js" as="script"><link rel="prefetch" href="/assets/index.html-89332744.js" as="script"><link rel="prefetch" href="/assets/index.html-0e0e677a.js" as="script"><link rel="prefetch" href="/assets/index.html-dc449936.js" as="script"><link rel="prefetch" href="/assets/index.html-43ca5609.js" as="script"><link rel="prefetch" href="/assets/06.MySQLäº‹åŠ¡åŸç†ä¸ä¼˜åŒ–æœ€ä½³å®è·µ.html-770d7908.js" as="script"><link rel="prefetch" href="/assets/index.html-cb4e958c.js" as="script"><link rel="prefetch" href="/assets/index.html-31d2fd55.js" as="script"><link rel="prefetch" href="/assets/index.html-56a56add.js" as="script"><link rel="prefetch" href="/assets/index.html-dd0afb9f.js" as="script"><link rel="prefetch" href="/assets/index.html-8c76a209.js" as="script"><link rel="prefetch" href="/assets/index.html-4c1d216a.js" as="script"><link rel="prefetch" href="/assets/index.html-8c466a86.js" as="script"><link rel="prefetch" href="/assets/index.html-84a01f38.js" as="script"><link rel="prefetch" href="/assets/index.html-8e6f71f4.js" as="script"><link rel="prefetch" href="/assets/index.html-331ac3de.js" as="script"><link rel="prefetch" href="/assets/index.html-49245b05.js" as="script"><link rel="prefetch" href="/assets/index.html-5571488a.js" as="script"><link rel="prefetch" href="/assets/index.html-0442381e.js" as="script"><link rel="prefetch" href="/assets/index.html-7762004d.js" as="script"><link rel="prefetch" href="/assets/index.html-8ed20d34.js" as="script"><link rel="prefetch" href="/assets/index.html-3c04fd19.js" as="script"><link rel="prefetch" href="/assets/index.html-8f058231.js" as="script"><link rel="prefetch" href="/assets/index.html-6d2004a2.js" as="script"><link rel="prefetch" href="/assets/index.html-6e604299.js" as="script"><link rel="prefetch" href="/assets/index.html-ce2f816a.js" as="script"><link rel="prefetch" href="/assets/00.é«˜æ€§èƒ½MySQL-MySQLæ¶æ„.html-bceb3d2f.js" as="script"><link rel="prefetch" href="/assets/index.html-23dec8fc.js" as="script"><link rel="prefetch" href="/assets/index.html-124af4b3.js" as="script"><link rel="prefetch" href="/assets/index.html-907dfb06.js" as="script"><link rel="prefetch" href="/assets/index.html-c188d702.js" as="script"><link rel="prefetch" href="/assets/index.html-eaf204dc.js" as="script"><link rel="prefetch" href="/assets/index.html-94e2d024.js" as="script"><link rel="prefetch" href="/assets/index.html-d19de605.js" as="script"><link rel="prefetch" href="/assets/index.html-ae982b6d.js" as="script"><link rel="prefetch" href="/assets/index.html-d79cee04.js" as="script"><link rel="prefetch" href="/assets/index.html-e6a16935.js" as="script"><link rel="prefetch" href="/assets/index.html-06b7fa1c.js" as="script"><link rel="prefetch" href="/assets/index.html-f1b79c6d.js" as="script"><link rel="prefetch" href="/assets/index.html-07398eed.js" as="script"><link rel="prefetch" href="/assets/index.html-77f217f9.js" as="script"><link rel="prefetch" href="/assets/index.html-723f8ddb.js" as="script"><link rel="prefetch" href="/assets/index.html-3510b4df.js" as="script"><link rel="prefetch" href="/assets/index.html-e570a315.js" as="script"><link rel="prefetch" href="/assets/index.html-6f5f303f.js" as="script"><link rel="prefetch" href="/assets/index.html-7752faee.js" as="script"><link rel="prefetch" href="/assets/index.html-f222372c.js" as="script"><link rel="prefetch" href="/assets/index.html-3308d5a1.js" as="script"><link rel="prefetch" href="/assets/index.html-267420bb.js" as="script"><link rel="prefetch" href="/assets/index.html-cd37e544.js" as="script"><link rel="prefetch" href="/assets/index.html-9f5e96fe.js" as="script"><link rel="prefetch" href="/assets/index.html-b7326eb3.js" as="script"><link rel="prefetch" href="/assets/index.html-edfaa838.js" as="script"><link rel="prefetch" href="/assets/index.html-e11b70f2.js" as="script"><link rel="prefetch" href="/assets/index.html-db7d17bf.js" as="script"><link rel="prefetch" href="/assets/index.html-a3f1dde9.js" as="script"><link rel="prefetch" href="/assets/index.html-b93b38d5.js" as="script"><link rel="prefetch" href="/assets/index.html-71146bdc.js" as="script"><link rel="prefetch" href="/assets/index.html-3b263964.js" as="script"><link rel="prefetch" href="/assets/index.html-6b248841.js" as="script"><link rel="prefetch" href="/assets/index.html-007aedb2.js" as="script"><link rel="prefetch" href="/assets/index.html-065e97ed.js" as="script"><link rel="prefetch" href="/assets/index.html-a110038a.js" as="script"><link rel="prefetch" href="/assets/index.html-ab5128be.js" as="script"><link rel="prefetch" href="/assets/index.html-eccabb88.js" as="script"><link rel="prefetch" href="/assets/index.html-7172142c.js" as="script"><link rel="prefetch" href="/assets/index.html-e0506ca7.js" as="script"><link rel="prefetch" href="/assets/index.html-d0541cbc.js" as="script"><link rel="prefetch" href="/assets/index.html-0cc523c6.js" as="script"><link rel="prefetch" href="/assets/index.html-acd56a98.js" as="script"><link rel="prefetch" href="/assets/index.html-6fba04c5.js" as="script"><link rel="prefetch" href="/assets/index.html-a7d189f3.js" as="script"><link rel="prefetch" href="/assets/Seataäº‹åŠ¡æ¨¡å¼.html-c5570b72.js" as="script"><link rel="prefetch" href="/assets/åˆ†å¸ƒå¼äº‹åŠ¡ç»„ä»¶Seata.html-4a6d8ad4.js" as="script"><link rel="prefetch" href="/assets/index.html-9d3346e4.js" as="script"><link rel="prefetch" href="/assets/index.html-a1c59eed.js" as="script"><link rel="prefetch" href="/assets/index.html-9fd5f979.js" as="script"><link rel="prefetch" href="/assets/02.RocketMQå¼€å‘æ¨¡å‹ä¸ç”Ÿäº§ç¯å¢ƒé—®é¢˜å‰–æ.html-48497863.js" as="script"><link rel="prefetch" href="/assets/404.html-699f0287.js" as="script"><link rel="prefetch" href="/assets/index.html-81cb4f0f.js" as="script"><link rel="prefetch" href="/assets/index.html-478df063.js" as="script"><link rel="prefetch" href="/assets/index.html-98df57e9.js" as="script"><link rel="prefetch" href="/assets/index.html-49cf12e7.js" as="script"><link rel="prefetch" href="/assets/index.html-d1189cbf.js" as="script"><link rel="prefetch" href="/assets/index.html-4f69a906.js" as="script"><link rel="prefetch" href="/assets/index.html-1acbb227.js" as="script"><link rel="prefetch" href="/assets/index.html-ce1b3045.js" as="script"><link rel="prefetch" href="/assets/index.html-3a52217c.js" as="script"><link rel="prefetch" href="/assets/index.html-68a1ec9f.js" as="script"><link rel="prefetch" href="/assets/index.html-43ccfa7c.js" as="script"><link rel="prefetch" href="/assets/index.html-01eec01e.js" as="script"><link rel="prefetch" href="/assets/index.html-07905aa6.js" as="script"><link rel="prefetch" href="/assets/index.html-048edb22.js" as="script"><link rel="prefetch" href="/assets/index.html-f78d4b52.js" as="script"><link rel="prefetch" href="/assets/index.html-ec68bc7c.js" as="script"><link rel="prefetch" href="/assets/index.html-563d74e4.js" as="script"><link rel="prefetch" href="/assets/index.html-5c510dfd.js" as="script"><link rel="prefetch" href="/assets/index.html-1ae06b8f.js" as="script"><link rel="prefetch" href="/assets/index.html-b98feb79.js" as="script"><link rel="prefetch" href="/assets/index.html-259a0ee8.js" as="script"><link rel="prefetch" href="/assets/index.html-78fbd704.js" as="script"><link rel="prefetch" href="/assets/index.html-60c5558b.js" as="script"><link rel="prefetch" href="/assets/index.html-dc6cc91f.js" as="script"><link rel="prefetch" href="/assets/index.html-f3e0f865.js" as="script"><link rel="prefetch" href="/assets/index.html-6f14b622.js" as="script"><link rel="prefetch" href="/assets/index.html-1f5b910b.js" as="script"><link rel="prefetch" href="/assets/index.html-78a1611d.js" as="script"><link rel="prefetch" href="/assets/index.html-303b73df.js" as="script"><link rel="prefetch" href="/assets/index.html-0c770884.js" as="script"><link rel="prefetch" href="/assets/index.html-14abce32.js" as="script"><link rel="prefetch" href="/assets/index.html-66f41eaf.js" as="script"><link rel="prefetch" href="/assets/index.html-c834ddb9.js" as="script"><link rel="prefetch" href="/assets/index.html-9d795a17.js" as="script"><link rel="prefetch" href="/assets/index.html-bcd2b533.js" as="script"><link rel="prefetch" href="/assets/index.html-02bb9288.js" as="script"><link rel="prefetch" href="/assets/index.html-77d130c9.js" as="script"><link rel="prefetch" href="/assets/index.html-a9371f9e.js" as="script"><link rel="prefetch" href="/assets/index.html-f727f268.js" as="script"><link rel="prefetch" href="/assets/index.html-751f7486.js" as="script"><link rel="prefetch" href="/assets/index.html-398772b5.js" as="script"><link rel="prefetch" href="/assets/index.html-501489a6.js" as="script"><link rel="prefetch" href="/assets/index.html-1067905f.js" as="script"><link rel="prefetch" href="/assets/index.html-63232ab5.js" as="script"><link rel="prefetch" href="/assets/index.html-6b29de51.js" as="script"><link rel="prefetch" href="/assets/index.html-422f53e3.js" as="script"><link rel="prefetch" href="/assets/giscus-52604b1e.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-dbbc75eb.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-e236d575.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-2450701e.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="skip-link sr-only">è·³è‡³ä¸»è¦å…§å®¹</a><!--]--><div class="theme-container no-sidebar has-toc"><!--[--><header class="navbar" id="navbar"><div class="navbar-start"><button type="button" class="toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a href="/" class="brand"><img class="logo" src="/logo.svg" alt="å­¦ä¹ ç¬”è®°"><!----><span class="site-name hide-in-pad">å­¦ä¹ ç¬”è®°</span></a><!--]--><!--[--><!----><!--]--></div><div class="navbar-center"><!--[--><!----><!--]--><!--[--><!----><!--]--><!--[--><!----><!--]--></div><div class="navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span class="button-container"><span class="button-top"></span><span class="button-middle"></span><span class="button-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside class="sidebar" id="sidebar"><!--[--><!----><!--]--><ul class="sidebar-links"></ul><!--[--><!----><!--]--></aside><!--[--><main class="page" id="main-content"><!--[--><!----><!----><nav class="breadcrumb disable"></nav><div class="page-title"><h1><!---->Tomcatæ•´ä½“æ¶æ„åŠå…¶è®¾è®¡ç²¾é«“</h1><div class="page-info"><span class="page-author-info" aria-label="ä½œè€…ğŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">æ±Ÿ</span></span><span property="author" content="æ±Ÿ"></span></span><!----><span class="page-date-info" aria-label="å†™ä½œæ—¥æœŸğŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-03-19T21:14:41.000Z"></span><!----><span class="page-reading-time-info" aria-label="é˜…è¯»æ—¶é—´âŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>å¤§çº¦ 23 åˆ†é’Ÿ</span><meta property="timeRequired" content="PT23M"></span><span class="page-category-info" aria-label="åˆ†ç±»ğŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category6 clickable" role="navigation">Tomcat</span><!--]--><meta property="articleSection" content="Tomcat"></span><!----></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">æ­¤é¡µå†…å®¹<button type="button" class="print-button" title="æ‰“å°"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a aria-current="page" href="/pages/c6a494/#tomcatæ•´ä½“æ¶æ„" class="router-link-active router-link-exact-active toc-link level3">Tomcatæ•´ä½“æ¶æ„</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/pages/c6a494/#tomcatæ ¸å¿ƒç»„ä»¶è¯¦è§£" class="router-link-active router-link-exact-active toc-link level3">Tomcatæ ¸å¿ƒç»„ä»¶è¯¦è§£</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/pages/c6a494/#tomcatå·¥ä½œåŸç†" class="router-link-active router-link-exact-active toc-link level3">Tomcatå·¥ä½œåŸç†</a></li><!----><!--]--><!--[--><li class="toc-item"><a aria-current="page" href="/pages/c6a494/#tomcatç”Ÿå‘½å‘¨æœŸå®ç°å‰–æ" class="router-link-active router-link-exact-active toc-link level3">Tomcatç”Ÿå‘½å‘¨æœŸå®ç°å‰–æ</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><p>Tomcatç‰ˆæœ¬ï¼š apache-tomcat-9.0.55</p><p>Tomcat9æºç é˜…è¯»ç¯å¢ƒæ­å»ºï¼š<a href="http://note.youdao.com/noteshare?id=da5a641d57ab90b00476c7798dcfb727&amp;sub=4EAE7A15026C4DC8BA6DBB439C24D71E" target="_blank" rel="noopener noreferrer">Tomcat9æºç ç¼–è¯‘<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li>Tomcatçš„è®¾è®¡æ€è·¯ï¼Œæ•´ä½“æ¶æ„ï¼Œè®¾è®¡ç²¾é«“</li><li>Tomcatçš„çº¿ç¨‹æ¨¡å‹è¯¦è§£åŠå…¶è°ƒä¼˜</li><li>Tomcatçš„ç±»åŠ è½½æœºåˆ¶å’Œçƒ­åŠ è½½çƒ­éƒ¨ç½²çš„å®ç°åŸç†</li></ul><h3 id="tomcatæ•´ä½“æ¶æ„" tabindex="-1"><a class="header-anchor" href="#tomcatæ•´ä½“æ¶æ„" aria-hidden="true">#</a> Tomcatæ•´ä½“æ¶æ„</h3><p>å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://tomcat.apache.org/tomcat-9.0-doc/index.html" target="_blank" rel="noopener noreferrer">https://tomcat.apache.org/tomcat-9.0-doc/index.html<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="tomcatä»‹ç»" tabindex="-1"><a class="header-anchor" href="#tomcatä»‹ç»" aria-hidden="true">#</a> Tomcatä»‹ç»</h4><p>å¼€æºçš„Java Webåº”ç”¨æœåŠ¡å™¨ï¼Œå®ç°äº†Java EE(Java Platform Enterprise Edition)çš„éƒ¨åˆ†æŠ€æœ¯è§„èŒƒï¼Œæ¯”å¦‚Java Servletã€JavaServer Pagesã€Java Expression Languageã€Java WebSocketç­‰ã€‚</p><p>Tomcatæ ¸å¿ƒï¼šHttpæœåŠ¡å™¨+Servletå®¹å™¨</p><figure><img src="https://img.jssjqd.cn/202303192118914.png" alt="image-20230319211854832" tabindex="0" loading="lazy"><figcaption>image-20230319211854832</figcaption></figure><p><a href="http://note.youdao.com/noteshare?id=66522c749887b41f27af805a3ca200e8&amp;sub=3A381591D25E4D0B9E94E7C5EAB62F7E" target="_blank" rel="noopener noreferrer"><strong>ServletåŸºç¡€å›é¡¾</strong><span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Servletè§„èŒƒï¼šServletæ¥å£+Servletå®¹å™¨</p><h4 id="ç›®å½•ç»“æ„" tabindex="-1"><a class="header-anchor" href="#ç›®å½•ç»“æ„" aria-hidden="true">#</a> ç›®å½•ç»“æ„</h4><p>Tomcatçš„è§£å‹ä¹‹åçš„ç›®å½•å¯ä»¥çœ‹åˆ°å¦‚ä¸‹çš„ç›®å½•ç»“æ„</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192121423.png" alt="image-20230319212130507" loading="lazy"></p><ul><li>bin</li></ul><p>binç›®å½•ä¸»è¦æ˜¯ç”¨æ¥å­˜æ”¾tomcatçš„è„šæœ¬ï¼Œ<a href="http://xn--startup-i22m.sh" target="_blank" rel="noopener noreferrer">å¦‚startup.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> , <a href="http://shutdown.sh" target="_blank" rel="noopener noreferrer">shutdown.sh<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><ul><li><p>conf</p></li><li><ul><li>catalina.policy: Tomcatå®‰å…¨ç­–ç•¥æ–‡ä»¶,æ§åˆ¶JVMç›¸å…³æƒé™,å…·ä½“å¯ä»¥å‚è€ƒjava. security.Permission</li><li>catalina.properties : Tomcat Catalinaè¡Œä¸ºæ§åˆ¶é…ç½®æ–‡ä»¶,æ¯”å¦‚Common ClassLoader</li><li>logging.properties : Tomcatæ—¥å¿—é…ç½®æ–‡ä»¶, JDK Logging</li><li>server.xml : Tomcat Serveré…ç½®æ–‡ä»¶</li><li>GlobalNamingResources :å…¨å±€JNDIèµ„æº</li><li>context.xml :å…¨å±€Contexté…ç½®æ–‡ä»¶</li><li>tomcat-users.xml : Tomcatè§’è‰²é…ç½®æ–‡ä»¶</li><li>web.xml : Servletæ ‡å‡†çš„web.xmléƒ¨ç½²æ–‡ä»¶, Tomcaté»˜è®¤å®ç°éƒ¨åˆ†é…ç½®å…¥å†…:</li></ul></li><li><ul><li><ul><li>org.apache.catalina.servlets.DefaultServlet</li><li>org.apache.jasper.servlet.JspServlet</li></ul></li></ul></li><li><p>lib</p></li></ul><p>å…¬å…±ç±»åº“</p><ul><li>logs</li></ul><p>tomcatåœ¨è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿçš„æ—¥å¿—æ–‡ä»¶</p><ul><li>webapps</li></ul><p>ç”¨æ¥å­˜æ”¾åº”ç”¨ç¨‹åºï¼Œå½“tomcatå¯åŠ¨æ—¶ä¼šå»åŠ è½½webappsç›®å½•ä¸‹çš„åº”ç”¨ç¨‹åº</p><ul><li>work</li></ul><p>ç”¨æ¥å­˜æ”¾tomcatåœ¨è¿è¡Œæ—¶çš„ç¼–è¯‘åæ–‡ä»¶ï¼Œä¾‹å¦‚JSPç¼–è¯‘åçš„æ–‡ä»¶</p><h4 id="webåº”ç”¨éƒ¨ç½²çš„æ–¹å¼" tabindex="-1"><a class="header-anchor" href="#webåº”ç”¨éƒ¨ç½²çš„æ–¹å¼" aria-hidden="true">#</a> webåº”ç”¨éƒ¨ç½²çš„æ–¹å¼</h4><ul><li>æ‹·è´åˆ°webappsç›®å½•ä¸‹</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>//æŒ‡å®šappBase     
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>localhost<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">appBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>webapps<span class="token punctuation">&quot;</span></span>
      <span class="token attr-name">unpackWARs</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token attr-name">autoDeploy</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>server.xml çš„Contextæ ‡ç­¾ä¸‹é…ç½®Context</li></ul><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span> <span class="token attr-name">docBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>D:\mvc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">path</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/mvc<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">reloadable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>path:æŒ‡å®šè®¿é—®è¯¥Webåº”ç”¨çš„URLå…¥å£ï¼ˆcontext-pathï¼‰</p><p>docBase:æŒ‡å®šWebåº”ç”¨çš„æ–‡ä»¶è·¯å¾„ï¼Œå¯ä»¥ç»™å®šç»å¯¹è·¯å¾„ï¼Œä¹Ÿå¯ä»¥ç»™å®šç›¸å¯¹äºçš„appBaseå±æ€§çš„ç›¸å¯¹è·¯å¾„ã€‚</p><p>reloadable:å¦‚æœè¿™ä¸ªå±æ€§è®¾ä¸ºtrueï¼ŒtomcatæœåŠ¡å™¨åœ¨è¿è¡ŒçŠ¶æ€ä¸‹ä¼šç›‘è§†åœ¨WEB-INF/classeså’ŒWEB-INF/libç›®å½•ä¸‹classæ–‡ä»¶çš„æ”¹åŠ¨ï¼Œå¦‚æœç›‘æµ‹åˆ°æœ‰classæ–‡ä»¶è¢«æ›´æ–°çš„ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨é‡æ–°åŠ è½½Webåº”ç”¨ã€‚</p><ul><li>åœ¨$CATALINA_BASE/conf/[enginename]/[hostname]/ ç›®å½•ä¸‹ï¼ˆé»˜è®¤conf/Catalina/localhostï¼‰åˆ›å»ºxmlæ–‡ä»¶ï¼Œæ–‡ä»¶åå°±æ˜¯contextPathã€‚</li></ul><p>æ¯”å¦‚åˆ›å»ºmvc.xmlï¼Œpathå°±æ˜¯/mvc</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span> <span class="token attr-name">docBase</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>D:\mvc<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">reloadable</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
æ³¨æ„ï¼šæƒ³è¦æ ¹è·¯å¾„è®¿é—®ï¼Œæ–‡ä»¶åä¸ºROOT.xml
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼šæƒ³è¦æ ¹è·¯å¾„è®¿é—®ï¼Œæ–‡ä»¶åä¸ºROOT.xml</p><h4 id="ç»“åˆserver-xmlç†è§£tomcatæ¶æ„" tabindex="-1"><a class="header-anchor" href="#ç»“åˆserver-xmlç†è§£tomcatæ¶æ„" aria-hidden="true">#</a> ç»“åˆServer.xmlç†è§£Tomcatæ¶æ„</h4><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡ Tomcat çš„ server.xml é…ç½®æ–‡ä»¶æ¥åŠ æ·±å¯¹ Tomcat æ¶æ„çš„ç†è§£ã€‚Tomcat é‡‡ç”¨äº†ç»„ä»¶åŒ–çš„è®¾è®¡ï¼Œå®ƒçš„æ„æˆç»„ä»¶éƒ½æ˜¯å¯é…ç½®çš„ï¼Œå…¶ä¸­æœ€å¤–å±‚çš„æ˜¯ Serverï¼Œå…¶ä»–ç»„ä»¶æŒ‰ç…§ä¸€å®šçš„æ ¼å¼è¦æ±‚é…ç½®åœ¨è¿™ä¸ªé¡¶å±‚å®¹å™¨ä¸­ã€‚</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Server</span><span class="token punctuation">&gt;</span></span>    //é¡¶å±‚ç»„ä»¶ï¼Œå¯ä»¥åŒ…æ‹¬å¤šä¸ªService
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Service</span><span class="token punctuation">&gt;</span></span>  //é¡¶å±‚ç»„ä»¶ï¼Œå¯åŒ…å«ä¸€ä¸ªEngineï¼Œå¤šä¸ªè¿æ¥å™¨
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Connector</span><span class="token punctuation">/&gt;</span></span>//è¿æ¥å™¨ç»„ä»¶ï¼Œä»£è¡¨é€šä¿¡æ¥å£		   
	    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Engine</span><span class="token punctuation">&gt;</span></span>//å®¹å™¨ç»„ä»¶ï¼Œä¸€ä¸ªEngineç»„ä»¶å¤„ç†Serviceä¸­çš„æ‰€æœ‰è¯·æ±‚ï¼ŒåŒ…å«å¤šä¸ªHost
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span><span class="token punctuation">&gt;</span></span>  //å®¹å™¨ç»„ä»¶ï¼Œå¤„ç†ç‰¹å®šçš„Hostä¸‹å®¢æˆ·è¯·æ±‚ï¼Œå¯åŒ…å«å¤šä¸ªContext
               <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span><span class="token punctuation">/&gt;</span></span>  //å®¹å™¨ç»„ä»¶ï¼Œä¸ºç‰¹å®šçš„Webåº”ç”¨å¤„ç†æ‰€æœ‰çš„å®¢æˆ·è¯·æ±‚
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Host</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Engine</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Service</span><span class="token punctuation">&gt;</span></span>	
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Server</span><span class="token punctuation">&gt;</span></span>	           
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Tomcatå¯åŠ¨æœŸé—´ä¼šé€šè¿‡è§£æ server.xmlï¼Œåˆ©ç”¨åå°„åˆ›å»ºç›¸åº”çš„ç»„ä»¶ï¼Œæ‰€ä»¥xmlä¸­çš„æ ‡ç­¾å’Œæºç ä¸€ä¸€å¯¹åº”ã€‚</p><h4 id="æ¶æ„å›¾" tabindex="-1"><a class="header-anchor" href="#æ¶æ„å›¾" aria-hidden="true">#</a> æ¶æ„å›¾</h4><figure><img src="https://img.jssjqd.cn/202303192308880.jpg" alt="5a26687d0001ca2712300718" tabindex="0" loading="lazy"><figcaption>5a26687d0001ca2712300718</figcaption></figure><p>ç®€åŒ–ä¹‹åçš„å›¾</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192125596.png" alt="image-20230319212534355" loading="lazy"></p><p>Tomcat è¦å®ç° 2 ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼š</p><ul><li>å¤„ç† Socket è¿æ¥ï¼Œè´Ÿè´£ç½‘ç»œå­—èŠ‚æµä¸ Request å’Œ Response å¯¹è±¡çš„è½¬åŒ–ã€‚</li><li>åŠ è½½å’Œç®¡ç† Servletï¼Œä»¥åŠå…·ä½“å¤„ç† Request è¯·æ±‚ã€‚</li></ul><p>å› æ­¤ Tomcat è®¾è®¡äº†ä¸¤ä¸ªæ ¸å¿ƒç»„ä»¶è¿æ¥å™¨ï¼ˆConnectorï¼‰å’Œå®¹å™¨ï¼ˆContainerï¼‰æ¥åˆ†åˆ«åšè¿™ä¸¤ä»¶äº‹æƒ…ã€‚è¿æ¥å™¨è´Ÿè´£å¯¹å¤–äº¤æµï¼Œå®¹å™¨è´Ÿè´£å†…éƒ¨å¤„ç†ã€‚</p><h3 id="tomcatæ ¸å¿ƒç»„ä»¶è¯¦è§£" tabindex="-1"><a class="header-anchor" href="#tomcatæ ¸å¿ƒç»„ä»¶è¯¦è§£" aria-hidden="true">#</a> Tomcatæ ¸å¿ƒç»„ä»¶è¯¦è§£</h3><h4 id="serverç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#serverç»„ä»¶" aria-hidden="true">#</a> Serverç»„ä»¶</h4><p>æŒ‡çš„å°±æ˜¯æ•´ä¸ª Tomcat æœåŠ¡å™¨ï¼ŒåŒ…å«å¤šç»„æœåŠ¡ï¼ˆServiceï¼‰ï¼Œè´Ÿè´£ç®¡ç†å’Œå¯åŠ¨å„ä¸ªServiceï¼ŒåŒæ—¶ç›‘å¬ 8005 ç«¯å£å‘è¿‡æ¥çš„ shutdown å‘½ä»¤ï¼Œç”¨äºå…³é—­æ•´ä¸ªå®¹å™¨ ã€‚</p><h4 id="serviceç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#serviceç»„ä»¶" aria-hidden="true">#</a> Serviceç»„ä»¶</h4><p>æ¯ä¸ª Service ç»„ä»¶éƒ½åŒ…å«äº†è‹¥å¹²ç”¨äºæ¥æ”¶å®¢æˆ·ç«¯æ¶ˆæ¯çš„ Connector ç»„ä»¶å’Œå¤„ç†è¯·æ±‚çš„ Engine ç»„ä»¶ã€‚ Service ç»„ä»¶è¿˜åŒ…å«äº†è‹¥å¹² Executor ç»„ä»¶ï¼Œæ¯ä¸ª Executor éƒ½æ˜¯ä¸€ä¸ªçº¿ç¨‹æ± ï¼Œå®ƒå¯ä»¥ä¸º Service å†…æ‰€æœ‰ç»„ä»¶æä¾›çº¿ç¨‹æ± æ‰§è¡Œä»»åŠ¡ã€‚</p><figure><img src="https://img.jssjqd.cn/202303192130383.png" alt="image-20230319213036248" tabindex="0" loading="lazy"><figcaption>image-20230319213036248</figcaption></figure><p>æ€è€ƒï¼š ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆè®¾è®¡ï¼Ÿ</p><p>Tomcat æ”¯æŒçš„å¤šç§ I/O æ¨¡å‹å’Œåº”ç”¨å±‚åè®®ã€‚Tomcat æ”¯æŒçš„ I/O æ¨¡å‹æœ‰ï¼š</p><ul><li>BIOï¼šé˜»å¡å¼I/Oï¼Œæ€§èƒ½ä½ä¸‹ï¼Œ8.5ç‰ˆæœ¬ä¹‹åå·²ç»ç§»é™¤</li><li>NIOï¼šéé˜»å¡ I/Oï¼Œé‡‡ç”¨ Java NIO ç±»åº“å®ç°ï¼ŒTomcatå†…éƒ¨å®ç°äº†Reactorçº¿ç¨‹æ¨¡å‹ï¼Œæ€§èƒ½è¾ƒé«˜</li><li>AIOï¼ˆNIO2ï¼‰ï¼šå¼‚æ­¥ I/Oï¼Œé‡‡ç”¨ JDK 7 æœ€æ–°çš„ NIO2 ç±»åº“å®ç°ã€‚</li><li>APRï¼šé‡‡ç”¨ Apache å¯ç§»æ¤è¿è¡Œåº“å®ç°ï¼Œæ˜¯ C/C++ ç¼–å†™çš„æœ¬åœ°åº“ã€‚æ˜¯ä»æ“ä½œç³»ç»Ÿçº§åˆ«æ¥è§£å†³å¼‚æ­¥çš„IOé—®é¢˜ï¼Œå¤§å¹…åº¦æé«˜äº†æ€§èƒ½</li></ul><p>Tomcat æ”¯æŒçš„åº”ç”¨å±‚åè®®æœ‰ï¼š</p><ul><li>HTTP/1.1ï¼šè¿™æ˜¯å¤§éƒ¨åˆ† Web åº”ç”¨é‡‡ç”¨çš„è®¿é—®åè®®ã€‚</li><li>AJPï¼šç”¨äºå’Œ Web æœåŠ¡å™¨é›†æˆï¼ˆå¦‚ Apacheï¼‰ã€‚</li><li>HTTP/2ï¼šHTTP 2.0 å¤§å¹…åº¦çš„æå‡äº† Web æ€§èƒ½ã€‚</li></ul><p>Tomcat ä¸ºäº†å®ç°æ”¯æŒå¤šç§ I/O æ¨¡å‹å’Œåº”ç”¨å±‚åè®®ï¼Œä¸€ä¸ªå®¹å™¨å¯èƒ½å¯¹æ¥å¤šä¸ªè¿æ¥å™¨ï¼Œå°±å¥½æ¯”ä¸€ä¸ªæˆ¿é—´æœ‰å¤šä¸ªé—¨ï¼Œä½†æ˜¯å•ç‹¬çš„è¿æ¥å™¨æˆ–è€…å®¹å™¨éƒ½ä¸èƒ½å¯¹å¤–æä¾›æœåŠ¡ï¼Œéœ€è¦æŠŠå®ƒä»¬ç»„è£…èµ·æ¥æ‰èƒ½å·¥ä½œï¼Œç»„è£…åè¿™ä¸ªæ•´ä½“å«ä½œ Service ç»„ä»¶ã€‚Service æœ¬èº«æ²¡æœ‰åšä»€ä¹ˆé‡è¦çš„äº‹æƒ…ï¼Œåªæ˜¯åœ¨è¿æ¥å™¨å’Œå®¹å™¨å¤–é¢å¤šåŒ…äº†ä¸€å±‚ï¼ŒæŠŠå®ƒä»¬ç»„è£…åœ¨ä¸€èµ·ã€‚Tomcat å†…å¯èƒ½æœ‰å¤šä¸ª Serviceï¼Œè¿™æ ·çš„è®¾è®¡ä¹Ÿæ˜¯å‡ºäºçµæ´»æ€§çš„è€ƒè™‘ã€‚é€šè¿‡åœ¨ Tomcat ä¸­é…ç½®å¤šä¸ª Serviceï¼Œå¯ä»¥å®ç°é€šè¿‡ä¸åŒçš„ç«¯å£å·æ¥è®¿é—®åŒä¸€å°æœºå™¨ä¸Šéƒ¨ç½²çš„ä¸åŒåº”ç”¨ã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192130997.png" alt="image-20230319213047899" loading="lazy"></p><p>ä»ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œæœ€é¡¶å±‚æ˜¯ Serverï¼Œè¿™é‡Œçš„ Server æŒ‡çš„å°±æ˜¯ä¸€ä¸ª Tomcat å®ä¾‹ã€‚ä¸€ä¸ª Server ä¸­æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ª Serviceï¼Œä¸€ä¸ª Service ä¸­æœ‰å¤šä¸ªè¿æ¥å™¨å’Œä¸€ä¸ªå®¹å™¨ã€‚è¿æ¥å™¨ä¸å®¹å™¨ä¹‹é—´é€šè¿‡æ ‡å‡†çš„ ServletRequest å’Œ ServletResponse é€šä¿¡ã€‚</p><h4 id="è¿æ¥å™¨connectorç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#è¿æ¥å™¨connectorç»„ä»¶" aria-hidden="true">#</a> è¿æ¥å™¨Connectorç»„ä»¶</h4><p>Tomcat ä¸å¤–éƒ¨ä¸–ç•Œçš„è¿æ¥å™¨ï¼Œç›‘å¬å›ºå®šç«¯å£æ¥æ”¶å¤–éƒ¨è¯·æ±‚ï¼Œä¼ é€’ç»™ Containerï¼Œå¹¶å°†Container å¤„ç†çš„ç»“æœè¿”å›ç»™å¤–éƒ¨ã€‚</p><p>è¿æ¥å™¨å¯¹ Servlet å®¹å™¨å±è”½äº†ä¸åŒçš„åº”ç”¨å±‚åè®®åŠ I/O æ¨¡å‹ï¼Œæ— è®ºæ˜¯ HTTP è¿˜æ˜¯ AJPï¼Œåœ¨å®¹å™¨ä¸­è·å–åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ ServletRequest å¯¹è±¡ã€‚è¿æ¥å™¨éœ€è¦å®ç°çš„åŠŸèƒ½ï¼š</p><ul><li>ç›‘å¬ç½‘ç»œç«¯å£ã€‚</li><li>æ¥å—ç½‘ç»œè¿æ¥è¯·æ±‚ã€‚</li><li>è¯»å–è¯·æ±‚ç½‘ç»œå­—èŠ‚æµã€‚</li><li>æ ¹æ®å…·ä½“åº”ç”¨å±‚åè®®ï¼ˆHTTP/AJPï¼‰è§£æå­—èŠ‚æµï¼Œç”Ÿæˆç»Ÿä¸€çš„ Tomcat Request å¯¹è±¡ã€‚</li><li>å°† Tomcat Request å¯¹è±¡è½¬æˆæ ‡å‡†çš„ ServletRequestã€‚</li><li>è°ƒç”¨ Servlet å®¹å™¨ï¼Œå¾—åˆ° ServletResponseã€‚</li><li>å°† ServletResponse è½¬æˆ Tomcat Response å¯¹è±¡ã€‚</li><li>å°† Tomcat Response è½¬æˆç½‘ç»œå­—èŠ‚æµã€‚</li><li>å°†å“åº”å­—èŠ‚æµå†™å›ç»™æµè§ˆå™¨ã€‚</li></ul><p>ä¼˜ç§€çš„æ¨¡å—åŒ–è®¾è®¡åº”è¯¥è€ƒè™‘é«˜å†…èšã€ä½è€¦åˆï¼š</p><p>é«˜å†…èšæ˜¯æŒ‡ç›¸å…³åº¦æ¯”è¾ƒé«˜çš„åŠŸèƒ½è¦å°½å¯èƒ½é›†ä¸­ï¼Œä¸è¦åˆ†æ•£ã€‚</p><p>ä½è€¦åˆæ˜¯æŒ‡ä¸¤ä¸ªç›¸å…³çš„æ¨¡å—è¦å°½å¯èƒ½å‡å°‘ä¾èµ–çš„éƒ¨åˆ†å’Œé™ä½ä¾èµ–çš„ç¨‹åº¦ï¼Œä¸è¦è®©ä¸¤ä¸ªæ¨¡å—äº§ç”Ÿå¼ºä¾èµ–ã€‚</p><p>åˆ†æè¿æ¥å™¨è¯¦ç»†åŠŸèƒ½åˆ—è¡¨ï¼Œæˆ‘ä»¬ä¼šå‘ç°è¿æ¥å™¨éœ€è¦å®Œæˆ 3 ä¸ªé«˜å†…èšçš„åŠŸèƒ½ï¼š</p><ul><li>ç½‘ç»œé€šä¿¡ã€‚</li><li>åº”ç”¨å±‚åè®®è§£æã€‚</li><li>Tomcat Request/Response ä¸ ServletRequest/ServletResponse çš„è½¬åŒ–ã€‚</li></ul><p>å› æ­¤ Tomcat çš„è®¾è®¡è€…è®¾è®¡äº† 3 ä¸ªç»„ä»¶æ¥å®ç°è¿™ 3 ä¸ªåŠŸèƒ½ï¼Œåˆ†åˆ«æ˜¯ EndPointã€Processor å’Œ Adapterã€‚</p><ul><li>EndPoint è´Ÿè´£æä¾›å­—èŠ‚æµç»™ Processorï¼›</li><li>Processor è´Ÿè´£æä¾› Tomcat Request å¯¹è±¡ç»™ Adapterï¼›</li><li>Adapter è´Ÿè´£æä¾› ServletRequest å¯¹è±¡ç»™å®¹å™¨ã€‚</li></ul><p>ç»„ä»¶ä¹‹é—´é€šè¿‡æŠ½è±¡æ¥å£äº¤äº’ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯å°è£…å˜åŒ–ã€‚è¿™æ˜¯é¢å‘å¯¹è±¡è®¾è®¡çš„ç²¾é«“ï¼Œå°†ç³»ç»Ÿä¸­ç»å¸¸å˜åŒ–çš„éƒ¨åˆ†å’Œç¨³å®šçš„éƒ¨åˆ†éš”ç¦»ï¼Œæœ‰åŠ©äºå¢åŠ å¤ç”¨æ€§ï¼Œå¹¶é™ä½ç³»ç»Ÿè€¦åˆåº¦ã€‚</p><p>ç”±äº I/O æ¨¡å‹å’Œåº”ç”¨å±‚åè®®å¯ä»¥è‡ªç”±ç»„åˆï¼Œæ¯”å¦‚ NIO + HTTP æˆ–è€… NIO2 + AJPã€‚Tomcat çš„è®¾è®¡è€…å°†ç½‘ç»œé€šä¿¡å’Œåº”ç”¨å±‚åè®®è§£ææ”¾åœ¨ä¸€èµ·è€ƒè™‘ï¼Œè®¾è®¡äº†ä¸€ä¸ªå« ProtocolHandler çš„æ¥å£æ¥å°è£…è¿™ä¸¤ç§å˜åŒ–ç‚¹ã€‚å„ç§åè®®å’Œé€šä¿¡æ¨¡å‹çš„ç»„åˆæœ‰ç›¸åº”çš„å…·ä½“å®ç°ç±»ã€‚æ¯”å¦‚ï¼šHttp11NioProtocol å’Œ AjpNioProtocolã€‚</p><p>é™¤äº†è¿™äº›å˜åŒ–ç‚¹ï¼Œç³»ç»Ÿä¹Ÿå­˜åœ¨ä¸€äº›ç›¸å¯¹ç¨³å®šçš„éƒ¨åˆ†ï¼Œå› æ­¤ Tomcat è®¾è®¡äº†ä¸€ç³»åˆ—æŠ½è±¡åŸºç±»æ¥å°è£…è¿™äº›ç¨³å®šçš„éƒ¨åˆ†ï¼ŒæŠ½è±¡åŸºç±» AbstractProtocol å®ç°äº† ProtocolHandler æ¥å£ã€‚æ¯ä¸€ç§åº”ç”¨å±‚åè®®æœ‰è‡ªå·±çš„æŠ½è±¡åŸºç±»ï¼Œæ¯”å¦‚ AbstractAjpProtocol å’Œ AbstractHttp11Protocolï¼Œå…·ä½“åè®®çš„å®ç°ç±»æ‰©å±•äº†åè®®å±‚æŠ½è±¡åŸºç±»ã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192131059.png" alt="image-20230319213111812" loading="lazy"></p><h4 id="protocolhandlerç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#protocolhandlerç»„ä»¶" aria-hidden="true">#</a> ProtocolHandlerç»„ä»¶</h4><p>è¿æ¥å™¨ç”¨ ProtocolHandler æ¥å¤„ç†ç½‘ç»œè¿æ¥å’Œåº”ç”¨å±‚åè®®ï¼ŒåŒ…å«äº† 2 ä¸ªé‡è¦éƒ¨ä»¶ï¼šEndPoint å’Œ Processorã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192131769.png" alt="image-20230319213122764" loading="lazy"></p><p>è¿æ¥å™¨ç”¨ ProtocolHandler æ¥å£æ¥å°è£…é€šä¿¡åè®®å’Œ I/O æ¨¡å‹çš„å·®å¼‚ï¼ŒProtocolHandler å†…éƒ¨åˆåˆ†ä¸º EndPoint å’Œ Processor æ¨¡å—ï¼ŒEndPoint è´Ÿè´£åº•å±‚ Socket é€šä¿¡ï¼ŒProccesor è´Ÿè´£åº”ç”¨å±‚åè®®è§£æã€‚è¿æ¥å™¨é€šè¿‡é€‚é…å™¨ Adapter è°ƒç”¨å®¹å™¨ã€‚</p><h5 id="endpoint" tabindex="-1"><a class="header-anchor" href="#endpoint" aria-hidden="true">#</a> <strong>EndPoint</strong></h5><p>EndPoint æ˜¯é€šä¿¡ç«¯ç‚¹ï¼Œå³é€šä¿¡ç›‘å¬çš„æ¥å£ï¼Œæ˜¯å…·ä½“çš„ Socket æ¥æ”¶å’Œå‘é€å¤„ç†å™¨ï¼Œæ˜¯å¯¹ä¼ è¾“å±‚çš„æŠ½è±¡ï¼Œå› æ­¤ EndPoint æ˜¯ç”¨æ¥å®ç° TCP/IP åè®®çš„ã€‚</p><p>EndPoint æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå¯¹åº”çš„æŠ½è±¡å®ç°ç±»æ˜¯ AbstractEndpointï¼Œè€Œ AbstractEndpoint çš„å…·ä½“å­ç±»ï¼Œæ¯”å¦‚åœ¨ NioEndpoint å’Œ Nio2Endpoint ä¸­ï¼Œæœ‰ä¸¤ä¸ªé‡è¦çš„å­ç»„ä»¶ï¼šAcceptor å’Œ SocketProcessorã€‚å…¶ä¸­ Acceptor ç”¨äºç›‘å¬ Socket è¿æ¥è¯·æ±‚ã€‚SocketProcessor ç”¨äºå¤„ç†æ¥æ”¶åˆ°çš„ Socket è¯·æ±‚ï¼Œå®ƒå®ç° Runnable æ¥å£ï¼Œåœ¨ Run æ–¹æ³•é‡Œè°ƒç”¨åè®®å¤„ç†ç»„ä»¶ Processor è¿›è¡Œå¤„ç†ã€‚ä¸ºäº†æé«˜å¤„ç†èƒ½åŠ›ï¼ŒSocketProcessor è¢«æäº¤åˆ°çº¿ç¨‹æ± æ¥æ‰§è¡Œï¼Œè€Œè¿™ä¸ªçº¿ç¨‹æ± å«ä½œæ‰§è¡Œå™¨ï¼ˆExecutor)ã€‚</p><h5 id="processor" tabindex="-1"><a class="header-anchor" href="#processor" aria-hidden="true">#</a> Processor</h5><p>Processor ç”¨æ¥å®ç° HTTP/AJP åè®®ï¼ŒProcessor æ¥æ”¶æ¥è‡ª EndPoint çš„ Socketï¼Œè¯»å–å­—èŠ‚æµè§£ææˆ Tomcat Request å’Œ Response å¯¹è±¡ï¼Œå¹¶é€šè¿‡ Adapter å°†å…¶æäº¤åˆ°å®¹å™¨å¤„ç†ï¼ŒProcessor æ˜¯å¯¹åº”ç”¨å±‚åè®®çš„æŠ½è±¡ã€‚</p><p>Processor æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå®šä¹‰äº†è¯·æ±‚çš„å¤„ç†ç­‰æ–¹æ³•ã€‚å®ƒçš„æŠ½è±¡å®ç°ç±» AbstractProcessor å¯¹ä¸€äº›åè®®å…±æœ‰çš„å±æ€§è¿›è¡Œå°è£…ï¼Œæ²¡æœ‰å¯¹æ–¹æ³•è¿›è¡Œå®ç°ã€‚å…·ä½“çš„å®ç°æœ‰ AJPProcessorã€HTTP11Processor ç­‰ï¼Œè¿™äº›å…·ä½“å®ç°ç±»å®ç°äº†ç‰¹å®šåè®®çš„è§£ææ–¹æ³•å’Œè¯·æ±‚å¤„ç†æ–¹å¼ã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192131613.png" alt="image-20230319213141587" loading="lazy"></p><p>EndPoint æ¥æ”¶åˆ° Socket è¿æ¥åï¼Œç”Ÿæˆä¸€ä¸ª SocketProcessor ä»»åŠ¡æäº¤åˆ°çº¿ç¨‹æ± å»å¤„ç†ï¼ŒSocketProcessor çš„ Run æ–¹æ³•ä¼šè°ƒç”¨ Processor ç»„ä»¶å»è§£æåº”ç”¨å±‚åè®®ï¼ŒProcessor é€šè¿‡è§£æç”Ÿæˆ Request å¯¹è±¡åï¼Œä¼šè°ƒç”¨ Adapter çš„ Service æ–¹æ³•ã€‚</p><h4 id="adapter-ç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#adapter-ç»„ä»¶" aria-hidden="true">#</a> Adapter ç»„ä»¶</h4><p>ç”±äºåè®®ä¸åŒï¼Œå®¢æˆ·ç«¯å‘è¿‡æ¥çš„è¯·æ±‚ä¿¡æ¯ä¹Ÿä¸å°½ç›¸åŒï¼ŒTomcat å®šä¹‰äº†è‡ªå·±çš„ Request ç±»æ¥â€œå­˜æ”¾â€è¿™äº›è¯·æ±‚ä¿¡æ¯ã€‚ProtocolHandler æ¥å£è´Ÿè´£è§£æè¯·æ±‚å¹¶ç”Ÿæˆ Tomcat Request ç±»ã€‚ä½†æ˜¯è¿™ä¸ª Request å¯¹è±¡ä¸æ˜¯æ ‡å‡†çš„ ServletRequestï¼Œä¹Ÿå°±æ„å‘³ç€ï¼Œä¸èƒ½ç”¨ Tomcat Request ä½œä¸ºå‚æ•°æ¥è°ƒç”¨å®¹å™¨ã€‚Tomcat è®¾è®¡è€…çš„è§£å†³æ–¹æ¡ˆæ˜¯å¼•å…¥ CoyoteAdapterï¼Œè¿™æ˜¯é€‚é…å™¨æ¨¡å¼çš„ç»å…¸è¿ç”¨ï¼Œè¿æ¥å™¨è°ƒç”¨ CoyoteAdapter çš„ Sevice æ–¹æ³•ï¼Œä¼ å…¥çš„æ˜¯ Tomcat Request å¯¹è±¡ï¼ŒCoyoteAdapter è´Ÿè´£å°† Tomcat Request è½¬æˆ ServletRequestï¼Œå†è°ƒç”¨å®¹å™¨çš„ Service æ–¹æ³•ã€‚</p><p>è®¾è®¡å¤æ‚ç³»ç»Ÿçš„åŸºæœ¬æ€è·¯ï¼š</p><p>é¦–å…ˆè¦åˆ†æéœ€æ±‚ï¼Œæ ¹æ®é«˜å†…èšä½è€¦åˆçš„åŸåˆ™ç¡®å®šå­æ¨¡å—ï¼Œç„¶åæ‰¾å‡ºå­æ¨¡å—ä¸­çš„å˜åŒ–ç‚¹å’Œä¸å˜ç‚¹ï¼Œç”¨æ¥å£å’ŒæŠ½è±¡åŸºç±»å»å°è£…ä¸å˜ç‚¹ï¼Œåœ¨æŠ½è±¡åŸºç±»ä¸­å®šä¹‰æ¨¡æ¿æ–¹æ³•ï¼Œè®©å­ç±»è‡ªè¡Œå®ç°æŠ½è±¡æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å…·ä½“å­ç±»å»å®ç°å˜åŒ–ç‚¹ã€‚</p><h4 id="å®¹å™¨containerç»„ä»¶" tabindex="-1"><a class="header-anchor" href="#å®¹å™¨containerç»„ä»¶" aria-hidden="true">#</a> å®¹å™¨Containerç»„ä»¶</h4><p>å®¹å™¨ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ç”¨æ¥è£…è½½ä¸œè¥¿çš„å™¨å…·ï¼Œåœ¨ Tomcat é‡Œï¼Œå®¹å™¨å°±æ˜¯ç”¨æ¥è£…è½½ Servlet çš„ã€‚Tomcat é€šè¿‡ä¸€ç§åˆ†å±‚çš„æ¶æ„ï¼Œä½¿å¾— Servlet å®¹å™¨å…·æœ‰å¾ˆå¥½çš„çµæ´»æ€§ã€‚Tomcat è®¾è®¡äº† 4 ç§å®¹å™¨ï¼Œåˆ†åˆ«æ˜¯ Engineã€Hostã€Context å’Œ Wrapperã€‚è¿™ 4 ç§å®¹å™¨ä¸æ˜¯å¹³è¡Œå…³ç³»ï¼Œè€Œæ˜¯çˆ¶å­å…³ç³»ã€‚</p><ul><li>Engineï¼šå¼•æ“ï¼ŒServlet çš„é¡¶å±‚å®¹å™¨ï¼Œç”¨æ¥ç®¡ç†å¤šä¸ªè™šæ‹Ÿç«™ç‚¹ï¼Œä¸€ä¸ª Service æœ€å¤šåªèƒ½æœ‰ä¸€ä¸ª Engineï¼›</li><li>Hostï¼šè™šæ‹Ÿä¸»æœºï¼Œè´Ÿè´£ web åº”ç”¨çš„éƒ¨ç½²å’Œ Context çš„åˆ›å»ºã€‚å¯ä»¥ç»™ Tomcat é…ç½®å¤šä¸ªè™šæ‹Ÿä¸»æœºåœ°å€ï¼Œè€Œä¸€ä¸ªè™šæ‹Ÿä¸»æœºä¸‹å¯ä»¥éƒ¨ç½²å¤šä¸ª Web åº”ç”¨ç¨‹åºï¼›</li><li>Contextï¼šWeb åº”ç”¨ä¸Šä¸‹æ–‡ï¼ŒåŒ…å«å¤šä¸ª Wrapperï¼Œè´Ÿè´£ web é…ç½®çš„è§£æã€ç®¡ç†æ‰€æœ‰çš„ Web èµ„æºã€‚ä¸€ä¸ªContextå¯¹åº”ä¸€ä¸ª Web åº”ç”¨ç¨‹åºã€‚</li><li>Wrapperï¼šè¡¨ç¤ºä¸€ä¸ª Servletï¼Œæœ€åº•å±‚çš„å®¹å™¨ï¼Œæ˜¯å¯¹ Servlet çš„å°è£…ï¼Œè´Ÿè´£ Servlet å®ä¾‹çš„åˆ›å»ºã€æ‰§è¡Œå’Œé”€æ¯ã€‚</li></ul><figure><img src="https://img.jssjqd.cn/202303192132855.png" alt="image-20230319213206707" tabindex="0" loading="lazy"><figcaption>image-20230319213206707</figcaption></figure><p>æ€è€ƒï¼šTomcat æ˜¯æ€ä¹ˆç®¡ç†è¿™äº›å®¹å™¨çš„ï¼Ÿ</p><p>Tomcat é‡‡ç”¨ç»„åˆæ¨¡å¼æ¥ç®¡ç†è¿™äº›å®¹å™¨ã€‚å…·ä½“å®ç°æ–¹æ³•æ˜¯ï¼Œæ‰€æœ‰å®¹å™¨ç»„ä»¶éƒ½å®ç°äº† Container æ¥å£ï¼Œå› æ­¤ç»„åˆæ¨¡å¼å¯ä»¥ä½¿å¾—ç”¨æˆ·å¯¹å•å®¹å™¨å¯¹è±¡å’Œç»„åˆå®¹å™¨å¯¹è±¡çš„ä½¿ç”¨å…·æœ‰ä¸€è‡´æ€§ã€‚</p><p>Container æ¥å£å®šä¹‰å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Container</span> <span class="token keyword">extends</span> <span class="token class-name">Lifecycle</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setName</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Container</span> <span class="token function">getParent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setParent</span><span class="token punctuation">(</span><span class="token class-name">Container</span> container<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addChild</span><span class="token punctuation">(</span><span class="token class-name">Container</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">removeChild</span><span class="token punctuation">(</span><span class="token class-name">Container</span> child<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Container</span> <span class="token function">findChild</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>         
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="tomcatå·¥ä½œåŸç†" tabindex="-1"><a class="header-anchor" href="#tomcatå·¥ä½œåŸç†" aria-hidden="true">#</a> Tomcatå·¥ä½œåŸç†</h3><p>æ€è€ƒï¼šTomcat æ˜¯æ€ä¹ˆç¡®å®šè¯·æ±‚æ˜¯ç”±å“ªä¸ª Wrapper å®¹å™¨é‡Œçš„ Servlet æ¥å¤„ç†çš„å‘¢ï¼Ÿ</p><h4 id="è¯·æ±‚å®šä½servletçš„è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚å®šä½servletçš„è¿‡ç¨‹" aria-hidden="true">#</a> è¯·æ±‚å®šä½Servletçš„è¿‡ç¨‹</h4><p>Tomcat æ˜¯ç”¨ Mapper ç»„ä»¶æ¥å®Œæˆè¿™ä¸ªä»»åŠ¡çš„ã€‚Mapper ç»„ä»¶çš„åŠŸèƒ½å°±æ˜¯å°†ç”¨æˆ·è¯·æ±‚çš„ URL å®šä½åˆ°ä¸€ä¸ª Servletï¼Œå®ƒçš„å·¥ä½œåŸç†æ˜¯ï¼šMapper ç»„ä»¶é‡Œä¿å­˜äº† Web åº”ç”¨çš„é…ç½®ä¿¡æ¯ï¼Œå…¶å®å°±æ˜¯å®¹å™¨ç»„ä»¶ä¸è®¿é—®è·¯å¾„çš„æ˜ å°„å…³ç³»ï¼Œæ¯”å¦‚ Host å®¹å™¨é‡Œé…ç½®çš„åŸŸåã€Context å®¹å™¨é‡Œçš„ Web åº”ç”¨è·¯å¾„ï¼Œä»¥åŠ Wrapper å®¹å™¨é‡Œ Servlet æ˜ å°„çš„è·¯å¾„ï¼Œä½ å¯ä»¥æƒ³è±¡è¿™äº›é…ç½®ä¿¡æ¯å°±æ˜¯ä¸€ä¸ªå¤šå±‚æ¬¡çš„ Mapã€‚å½“ä¸€ä¸ªè¯·æ±‚åˆ°æ¥æ—¶ï¼ŒMapper ç»„ä»¶é€šè¿‡è§£æè¯·æ±‚ URL é‡Œçš„åŸŸåå’Œè·¯å¾„ï¼Œå†åˆ°è‡ªå·±ä¿å­˜çš„ Map é‡Œå»æŸ¥æ‰¾ï¼Œå°±èƒ½å®šä½åˆ°ä¸€ä¸ª Servletã€‚ä¸€ä¸ªè¯·æ±‚ URL æœ€ååªä¼šå®šä½åˆ°ä¸€ä¸ª Wrapper å®¹å™¨ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ª Servletã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192133252.png" alt="image-20230319213325000" loading="lazy"></p><h4 id="è¯·æ±‚åœ¨å®¹å™¨ä¸­çš„è°ƒç”¨è¿‡ç¨‹" tabindex="-1"><a class="header-anchor" href="#è¯·æ±‚åœ¨å®¹å™¨ä¸­çš„è°ƒç”¨è¿‡ç¨‹" aria-hidden="true">#</a> è¯·æ±‚åœ¨å®¹å™¨ä¸­çš„è°ƒç”¨è¿‡ç¨‹</h4><p>è¿æ¥å™¨ä¸­çš„ Adapter ä¼šè°ƒç”¨å®¹å™¨çš„ Service æ–¹æ³•æ¥æ‰§è¡Œ Servletï¼Œæœ€å…ˆæ‹¿åˆ°è¯·æ±‚çš„æ˜¯ Engine å®¹å™¨ï¼ŒEngine å®¹å™¨å¯¹è¯·æ±‚åšä¸€äº›å¤„ç†åï¼Œä¼šæŠŠè¯·æ±‚ä¼ ç»™è‡ªå·±å­å®¹å™¨ Host ç»§ç»­å¤„ç†ï¼Œä¾æ¬¡ç±»æ¨ï¼Œæœ€åè¿™ä¸ªè¯·æ±‚ä¼šä¼ ç»™ Wrapper å®¹å™¨ï¼ŒWrapper ä¼šè°ƒç”¨æœ€ç»ˆçš„ Servlet æ¥å¤„ç†ã€‚é‚£ä¹ˆè¿™ä¸ªè°ƒç”¨è¿‡ç¨‹å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨ Pipeline-Valve ç®¡é“ã€‚</p><p>Pipeline-Valve æ˜¯è´£ä»»é“¾æ¨¡å¼ï¼Œè´£ä»»é“¾æ¨¡å¼æ˜¯æŒ‡åœ¨ä¸€ä¸ªè¯·æ±‚å¤„ç†çš„è¿‡ç¨‹ä¸­æœ‰å¾ˆå¤šå¤„ç†è€…ä¾æ¬¡å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œæ¯ä¸ªå¤„ç†è€…è´Ÿè´£åšè‡ªå·±ç›¸åº”çš„å¤„ç†ï¼Œå¤„ç†å®Œä¹‹åå°†å†è°ƒç”¨ä¸‹ä¸€ä¸ªå¤„ç†è€…ç»§ç»­å¤„ç†ã€‚</p><p>Valve è¡¨ç¤ºä¸€ä¸ªå¤„ç†ç‚¹ï¼Œæ¯”å¦‚æƒé™è®¤è¯å’Œè®°å½•æ—¥å¿—ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Valve</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Valve</span> <span class="token function">getNext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setNext</span><span class="token punctuation">(</span><span class="token class-name">Valve</span> valve<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">invoke</span><span class="token punctuation">(</span><span class="token class-name">Request</span> request<span class="token punctuation">,</span> <span class="token class-name">Response</span> response<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">Pipeline</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">Valve</span> <span class="token function">getBasic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setBasic</span><span class="token punctuation">(</span><span class="token class-name">Valve</span> valve<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addValve</span><span class="token punctuation">(</span><span class="token class-name">Valve</span> valve<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">Valve</span> <span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>        
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Pipeline ä¸­ç»´æŠ¤äº† Valve é“¾è¡¨ï¼ŒValve å¯ä»¥æ’å…¥åˆ° Pipeline ä¸­ï¼Œå¯¹è¯·æ±‚åšæŸäº›å¤„ç†ã€‚æ•´ä¸ªè°ƒç”¨é“¾çš„è§¦å‘æ˜¯ Valve æ¥å®Œæˆçš„ï¼ŒValve å®Œæˆè‡ªå·±çš„å¤„ç†åï¼Œè°ƒç”¨ getNext.invoke() æ¥è§¦å‘ä¸‹ä¸€ä¸ª Valve è°ƒç”¨ã€‚æ¯ä¸€ä¸ªå®¹å™¨éƒ½æœ‰ä¸€ä¸ª Pipeline å¯¹è±¡ï¼Œåªè¦è§¦å‘è¿™ä¸ª Pipeline çš„ç¬¬ä¸€ä¸ª Valveï¼Œè¿™ä¸ªå®¹å™¨é‡Œ Pipeline ä¸­çš„ Valve å°±éƒ½ä¼šè¢«è°ƒç”¨åˆ°ã€‚Basic Valve å¤„äº Valve é“¾è¡¨çš„æœ«ç«¯ï¼Œå®ƒæ˜¯ Pipeline ä¸­å¿…ä¸å¯å°‘çš„ä¸€ä¸ª Valveï¼Œè´Ÿè´£è°ƒç”¨ä¸‹å±‚å®¹å™¨çš„ Pipeline é‡Œçš„ç¬¬ä¸€ä¸ª Valveã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192145508.png" alt="image-20230319214500293" loading="lazy"></p><p>æ•´ä¸ªè°ƒç”¨è¿‡ç¨‹ç”±è¿æ¥å™¨ä¸­çš„ Adapter è§¦å‘çš„ï¼Œå®ƒä¼šè°ƒç”¨ Engine çš„ç¬¬ä¸€ä¸ª Valveï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//org.apache.catalina.connector.CoyoteAdapter#service</span>
<span class="token comment">// Calling the container</span>
connector<span class="token punctuation">.</span><span class="token function">getService</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPipeline</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getFirst</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">invoke</span><span class="token punctuation">(</span>request<span class="token punctuation">,</span> response<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Wrapper å®¹å™¨çš„æœ€åä¸€ä¸ª Valve ä¼šåˆ›å»ºä¸€ä¸ª Filter é“¾ï¼Œå¹¶è°ƒç”¨ doFilter() æ–¹æ³•ï¼Œæœ€ç»ˆä¼šè°ƒåˆ° Servlet çš„ service æ–¹æ³•ã€‚</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">//org.apache.catalina.core.StandardWrapperValve#invoke</span>
filterChain<span class="token punctuation">.</span><span class="token function">doFilter</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> response<span class="token punctuation">.</span><span class="token function">getResponse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>Valve å’Œ Filter çš„åŒºåˆ«ï¼š</p><ul><li>Valve æ˜¯ Tomcat çš„ç§æœ‰æœºåˆ¶ï¼Œä¸ Tomcat çš„åŸºç¡€æ¶æ„ /API æ˜¯ç´§è€¦åˆçš„ã€‚Servlet API æ˜¯å…¬æœ‰çš„æ ‡å‡†ï¼Œæ‰€æœ‰çš„ Web å®¹å™¨åŒ…æ‹¬ Jetty éƒ½æ”¯æŒ Filter æœºåˆ¶ã€‚</li><li>Valve å·¥ä½œåœ¨ Web å®¹å™¨çº§åˆ«ï¼Œæ‹¦æˆªæ‰€æœ‰åº”ç”¨çš„è¯·æ±‚ï¼›è€Œ Servlet Filter å·¥ä½œåœ¨åº”ç”¨çº§åˆ«ï¼Œåªèƒ½æ‹¦æˆªæŸä¸ª Web åº”ç”¨çš„æ‰€æœ‰è¯·æ±‚ã€‚</li></ul><h3 id="tomcatç”Ÿå‘½å‘¨æœŸå®ç°å‰–æ" tabindex="-1"><a class="header-anchor" href="#tomcatç”Ÿå‘½å‘¨æœŸå®ç°å‰–æ" aria-hidden="true">#</a> <strong>Tomcatç”Ÿå‘½å‘¨æœŸå®ç°å‰–æ</strong></h3><p>é€šè¿‡å¯¹Tomcatæ¶æ„çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“äº†Tomcat éƒ½æœ‰å“ªäº›ç»„ä»¶ï¼Œç»„ä»¶ä¹‹é—´æ˜¯ä»€ä¹ˆæ ·çš„å…³ç³»ï¼Œä»¥åŠ Tomcat æ˜¯æ€ä¹ˆå¤„ç†ä¸€ä¸ª HTTP è¯·æ±‚çš„ã€‚å¦‚æœæƒ³è®©Tomcatèƒ½å¤Ÿå¯¹å¤–æä¾›æœåŠ¡ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºã€ç»„è£…å¹¶å¯åŠ¨Tomcatç»„ä»¶ï¼›åœ¨æœåŠ¡åœæ­¢çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é‡Šæ”¾èµ„æºï¼Œé”€æ¯Tomcatç»„ä»¶ï¼Œè¿™æ˜¯ä¸€ä¸ªåŠ¨æ€çš„è¿‡ç¨‹ã€‚Tomcat éœ€è¦åŠ¨æ€åœ°ç®¡ç†è¿™äº›ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸã€‚</p><p>åœ¨æˆ‘ä»¬å®é™…çš„å·¥ä½œä¸­ï¼Œå¦‚æœä½ éœ€è¦è®¾è®¡ä¸€ä¸ªæ¯”è¾ƒå¤§çš„ç³»ç»Ÿæˆ–è€…æ¡†æ¶æ—¶ï¼Œä½ åŒæ ·ä¹Ÿéœ€è¦è€ƒè™‘è¿™å‡ ä¸ªé—®é¢˜ï¼šå¦‚ä½•ç»Ÿä¸€ç®¡ç†ç»„ä»¶çš„åˆ›å»ºã€åˆå§‹åŒ–ã€å¯åŠ¨ã€åœæ­¢å’Œé”€æ¯ï¼Ÿå¦‚ä½•åšåˆ°ä»£ç é€»è¾‘æ¸…æ™°ï¼Ÿå¦‚ä½•æ–¹ä¾¿åœ°æ·»åŠ æˆ–è€…åˆ é™¤ç»„ä»¶ï¼Ÿå¦‚ä½•åšåˆ°ç»„ä»¶å¯åŠ¨å’Œåœæ­¢ä¸é—æ¼ã€ä¸é‡å¤ï¼Ÿ</p><p>Tomcatç»„ä»¶å…·æœ‰ä¸¤å±‚å…³ç³»ï¼š</p><ul><li>ç¬¬ä¸€å±‚å…³ç³»æ˜¯ç»„ä»¶æœ‰å¤§æœ‰å°ï¼Œå¤§ç»„ä»¶ç®¡ç†å°ç»„ä»¶ï¼Œæ¯”å¦‚ Server ç®¡ç† Serviceï¼ŒService åˆç®¡ç†è¿æ¥å™¨å’Œå®¹å™¨ã€‚</li><li>ç¬¬äºŒå±‚å…³ç³»æ˜¯ç»„ä»¶æœ‰å¤–æœ‰å†…ï¼Œå¤–å±‚ç»„ä»¶æ§åˆ¶å†…å±‚ç»„ä»¶ï¼Œæ¯”å¦‚è¿æ¥å™¨æ˜¯å¤–å±‚ç»„ä»¶ï¼Œè´Ÿè´£å¯¹å¤–äº¤æµï¼Œå¤–å±‚ç»„ä»¶è°ƒç”¨å†…å±‚ç»„ä»¶å®Œæˆä¸šåŠ¡åŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯·æ±‚çš„å¤„ç†è¿‡ç¨‹æ˜¯ç”±å¤–å±‚ç»„ä»¶æ¥é©±åŠ¨çš„ã€‚</li></ul><p>è¿™ä¸¤å±‚å…³ç³»å†³å®šäº†ç³»ç»Ÿåœ¨åˆ›å»ºç»„ä»¶æ—¶åº”è¯¥éµå¾ªä¸€å®šçš„é¡ºåºã€‚</p><ul><li>ç¬¬ä¸€ä¸ªåŸåˆ™æ˜¯å…ˆåˆ›å»ºå­ç»„ä»¶ï¼Œå†åˆ›å»ºçˆ¶ç»„ä»¶ï¼Œå­ç»„ä»¶éœ€è¦è¢«â€œæ³¨å…¥â€åˆ°çˆ¶ç»„ä»¶ä¸­ã€‚</li><li>ç¬¬äºŒä¸ªåŸåˆ™æ˜¯å…ˆåˆ›å»ºå†…å±‚ç»„ä»¶ï¼Œå†åˆ›å»ºå¤–å±‚ç»„ä»¶ï¼Œå†…å±‚ç»„å»ºéœ€è¦è¢«â€œæ³¨å…¥â€åˆ°å¤–å±‚ç»„ä»¶ã€‚</li></ul><p>æœ€ç›´è§‚çš„åšæ³•å°±æ˜¯å°†æ‰€æœ‰çš„ç»„ä»¶æŒ‰ç…§å…ˆå°åå¤§ã€å…ˆå†…åå¤–çš„é¡ºåºåˆ›å»ºå‡ºæ¥ï¼Œç„¶åç»„è£…åœ¨ä¸€èµ·ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ€è·¯ä¸ä»…ä¼šé€ æˆä»£ç é€»è¾‘æ··ä¹±å’Œç»„ä»¶é—æ¼ï¼Œè€Œä¸”ä¹Ÿä¸åˆ©äºåæœŸçš„åŠŸèƒ½æ‰©å±•ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ç§é€šç”¨çš„ã€ç»Ÿä¸€çš„æ–¹æ³•æ¥ç®¡ç†ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œå°±åƒæ±½è½¦â€œä¸€é”®å¯åŠ¨â€é‚£æ ·çš„æ•ˆæœã€‚</p><h4 id="ä¸€é”®å¼å¯åœ-lifecycle-æ¥å£" tabindex="-1"><a class="header-anchor" href="#ä¸€é”®å¼å¯åœ-lifecycle-æ¥å£" aria-hidden="true">#</a> ä¸€é”®å¼å¯åœï¼šLifeCycle æ¥å£</h4><p>ç³»ç»Ÿè®¾è®¡å°±æ˜¯è¦æ‰¾åˆ°ç³»ç»Ÿçš„å˜åŒ–ç‚¹å’Œä¸å˜ç‚¹ã€‚è¿™é‡Œçš„ä¸å˜ç‚¹å°±æ˜¯æ¯ä¸ªç»„ä»¶éƒ½è¦ç»å†åˆ›å»ºã€åˆå§‹åŒ–ã€å¯åŠ¨è¿™å‡ ä¸ªè¿‡ç¨‹ï¼Œè¿™äº›çŠ¶æ€ä»¥åŠçŠ¶æ€çš„è½¬åŒ–æ˜¯ä¸å˜çš„ã€‚è€Œå˜åŒ–ç‚¹æ˜¯æ¯ä¸ªå…·ä½“ç»„ä»¶çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¯åŠ¨æ–¹æ³•æ˜¯ä¸ä¸€æ ·çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŠŠä¸å˜ç‚¹æŠ½è±¡å‡ºæ¥æˆä¸ºä¸€ä¸ªæ¥å£ï¼Œè¿™ä¸ªæ¥å£è·Ÿç”Ÿå‘½å‘¨æœŸæœ‰å…³ï¼Œå«ä½œ LifeCycleã€‚LifeCycle æ¥å£é‡Œåº”è¯¥å®šä¹‰è¿™ä¹ˆå‡ ä¸ªæ–¹æ³•ï¼šinit()ã€start()ã€stop() å’Œ destroy()ï¼Œæ¯ä¸ªå…·ä½“çš„ç»„ä»¶å»å®ç°è¿™äº›æ–¹æ³•ã€‚</p><p>åœ¨çˆ¶ç»„ä»¶çš„ init() æ–¹æ³•é‡Œéœ€è¦åˆ›å»ºå­ç»„ä»¶å¹¶è°ƒç”¨å­ç»„ä»¶çš„ init() æ–¹æ³•ã€‚åŒæ ·ï¼Œåœ¨çˆ¶ç»„ä»¶çš„ start() æ–¹æ³•é‡Œä¹Ÿéœ€è¦è°ƒç”¨å­ç»„ä»¶çš„ start() æ–¹æ³•ï¼Œå› æ­¤è°ƒç”¨è€…å¯ä»¥æ— å·®åˆ«çš„è°ƒç”¨å„ç»„ä»¶çš„ init() æ–¹æ³•å’Œ start() æ–¹æ³•ï¼Œè¿™å°±æ˜¯ç»„åˆæ¨¡å¼çš„ä½¿ç”¨ï¼Œå¹¶ä¸”åªè¦è°ƒç”¨æœ€é¡¶å±‚ç»„ä»¶ï¼Œä¹Ÿå°±æ˜¯ Server ç»„ä»¶çš„ init() å’Œ start() æ–¹æ³•ï¼Œæ•´ä¸ª Tomcat å°±è¢«å¯åŠ¨èµ·æ¥äº†ã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192258518.png" alt="image-20230319225825393" loading="lazy"></p><h4 id="å¯æ‰©å±•æ€§-lifecycleäº‹ä»¶" tabindex="-1"><a class="header-anchor" href="#å¯æ‰©å±•æ€§-lifecycleäº‹ä»¶" aria-hidden="true">#</a> å¯æ‰©å±•æ€§ï¼šLifeCycleäº‹ä»¶</h4><p>å› ä¸ºå„ä¸ªç»„ä»¶ init() å’Œ start() æ–¹æ³•çš„å…·ä½“å®ç°æ˜¯å¤æ‚å¤šå˜çš„ï¼Œæ¯”å¦‚åœ¨ Host å®¹å™¨çš„å¯åŠ¨æ–¹æ³•é‡Œéœ€è¦æ‰«æ webapps ç›®å½•ä¸‹çš„ Web åº”ç”¨ï¼Œåˆ›å»ºç›¸åº”çš„ Context å®¹å™¨ï¼Œå¦‚æœå°†æ¥éœ€è¦å¢åŠ æ–°çš„é€»è¾‘ï¼Œç›´æ¥ä¿®æ”¹ start() æ–¹æ³•ï¼Ÿè¿™æ ·ä¼šè¿åå¼€é—­åŸåˆ™ï¼Œé‚£å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿå¼€é—­åŸåˆ™è¯´çš„æ˜¯ä¸ºäº†æ‰©å±•ç³»ç»Ÿçš„åŠŸèƒ½ï¼Œä½ ä¸èƒ½ç›´æ¥ä¿®æ”¹ç³»ç»Ÿä¸­å·²æœ‰çš„ç±»ï¼Œä½†æ˜¯ä½ å¯ä»¥å®šä¹‰æ–°çš„ç±»ã€‚</p><p>ç»„ä»¶çš„ init() å’Œ start() è°ƒç”¨æ˜¯ç”±å®ƒçš„çˆ¶ç»„ä»¶çš„çŠ¶æ€å˜åŒ–è§¦å‘çš„ï¼Œä¸Šå±‚ç»„ä»¶çš„åˆå§‹åŒ–ä¼šè§¦å‘å­ç»„ä»¶çš„åˆå§‹åŒ–ï¼Œä¸Šå±‚ç»„ä»¶çš„å¯åŠ¨ä¼šè§¦å‘å­ç»„ä»¶çš„å¯åŠ¨ï¼Œå› æ­¤æˆ‘ä»¬æŠŠç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå®šä¹‰æˆä¸€ä¸ªä¸ªçŠ¶æ€ï¼ŒæŠŠçŠ¶æ€çš„è½¬å˜çœ‹ä½œæ˜¯ä¸€ä¸ªäº‹ä»¶ã€‚è€Œäº‹ä»¶æ˜¯æœ‰ç›‘å¬å™¨çš„ï¼Œåœ¨ç›‘å¬å™¨é‡Œå¯ä»¥å®ç°ä¸€äº›é€»è¾‘ï¼Œå¹¶ä¸”ç›‘å¬å™¨ä¹Ÿå¯ä»¥æ–¹ä¾¿çš„æ·»åŠ å’Œåˆ é™¤ï¼Œè¿™å°±æ˜¯å…¸å‹çš„è§‚å¯Ÿè€…æ¨¡å¼ã€‚</p><p>å…·ä½“æ¥è¯´å°±æ˜¯åœ¨ LifeCycle æ¥å£é‡ŒåŠ å…¥ä¸¤ä¸ªæ–¹æ³•ï¼šæ·»åŠ ç›‘å¬å™¨å’Œåˆ é™¤ç›‘å¬å™¨ã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192258281.png" alt="image-20230319225833208" loading="lazy"></p><p>æˆ‘ä»¬è¿˜éœ€è¦å®šä¹‰ä¸€ä¸ª Enum æ¥è¡¨ç¤ºç»„ä»¶æœ‰å“ªäº›çŠ¶æ€ï¼Œä»¥åŠå¤„åœ¨ä»€ä¹ˆçŠ¶æ€ä¼šè§¦å‘ä»€ä¹ˆæ ·çš„äº‹ä»¶ã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192258899.png" alt="image-20230319225836980" loading="lazy"></p><p>ç»„ä»¶ç”Ÿå‘½å‘¨æœŸçŠ¶æ€å˜åŒ–å¦‚ä¸‹ï¼š</p><figure><img src="https://img.jssjqd.cn/202303192258992.png" alt="image-20230319225847912" tabindex="0" loading="lazy"><figcaption>image-20230319225847912</figcaption></figure><h4 id="é‡ç”¨æ€§-lifecyclebaseæŠ½è±¡åŸºç±»" tabindex="-1"><a class="header-anchor" href="#é‡ç”¨æ€§-lifecyclebaseæŠ½è±¡åŸºç±»" aria-hidden="true">#</a> é‡ç”¨æ€§ï¼šLifeCycleBaseæŠ½è±¡åŸºç±»</h4><p>æœ‰äº†æ¥å£ï¼Œæˆ‘ä»¬å°±è¦ç”¨ç±»å»å®ç°æ¥å£ã€‚ä¸€èˆ¬æ¥è¯´å®ç°ç±»ä¸æ­¢ä¸€ä¸ªï¼Œä¸åŒçš„ç±»åœ¨å®ç°æ¥å£æ—¶å¾€å¾€ä¼šæœ‰ä¸€äº›ç›¸åŒçš„é€»è¾‘ï¼Œå¦‚æœè®©å„ä¸ªå­ç±»éƒ½å»å®ç°ä¸€éï¼Œå°±ä¼šæœ‰é‡å¤ä»£ç ã€‚é‚£å­ç±»å¦‚ä½•é‡ç”¨è¿™éƒ¨åˆ†é€»è¾‘å‘¢ï¼Ÿå…¶å®å°±æ˜¯å®šä¹‰ä¸€ä¸ªåŸºç±»æ¥å®ç°å…±åŒçš„é€»è¾‘ï¼Œç„¶åè®©å„ä¸ªå­ç±»å»ç»§æ‰¿å®ƒï¼Œå°±è¾¾åˆ°äº†é‡ç”¨çš„ç›®çš„ã€‚è€ŒåŸºç±»ä¸­å¾€å¾€ä¼šå®šä¹‰ä¸€äº›æŠ½è±¡æ–¹æ³•ï¼Œæ‰€è°“çš„æŠ½è±¡æ–¹æ³•å°±æ˜¯è¯´åŸºç±»ä¸ä¼šå»å®ç°è¿™äº›æ–¹æ³•ï¼Œè€Œæ˜¯è°ƒç”¨è¿™äº›æ–¹æ³•æ¥å®ç°éª¨æ¶é€»è¾‘ã€‚æŠ½è±¡æ–¹æ³•æ˜¯ç•™ç»™å„ä¸ªå­ç±»å»å®ç°çš„ï¼Œå¹¶ä¸”å­ç±»å¿…é¡»å®ç°ï¼Œå¦åˆ™æ— æ³•å®ä¾‹åŒ–ã€‚</p><p>Tomcat å®šä¹‰ä¸€ä¸ªåŸºç±» LifeCycleBase æ¥å®ç° LifeCycle æ¥å£ï¼ŒæŠŠä¸€äº›å…¬å…±çš„é€»è¾‘æ”¾åˆ°åŸºç±»ä¸­å»ï¼Œæ¯”å¦‚ç”Ÿå‘½çŠ¶æ€çš„è½¬å˜ä¸ç»´æŠ¤ã€ç”Ÿå‘½å‘¨æœŸäº‹ä»¶çš„è§¦å‘ä»¥åŠç›‘å¬å™¨çš„æ·»åŠ å’Œåˆ é™¤ç­‰ï¼Œè€Œå­ç±»å°±è´Ÿè´£å®ç°è‡ªå·±çš„åˆå§‹åŒ–ã€å¯åŠ¨å’Œåœæ­¢ç­‰æ–¹æ³•ã€‚ä¸ºäº†é¿å…è·ŸåŸºç±»ä¸­çš„æ–¹æ³•åŒåï¼Œæˆ‘ä»¬æŠŠå…·ä½“å­ç±»çš„å®ç°æ–¹æ³•æ”¹ä¸ªåå­—ï¼Œåœ¨åé¢åŠ ä¸Š Internalï¼Œå« initInternal()ã€startInternal() ç­‰ã€‚</p><figure><img src="https://img.jssjqd.cn/202303192259377.png" alt="image-20230319225904729" tabindex="0" loading="lazy"><figcaption>image-20230319225904729</figcaption></figure><p>LifeCycleBase å®ç°äº† LifeCycle æ¥å£ä¸­æ‰€æœ‰çš„æ–¹æ³•ï¼Œè¿˜å®šä¹‰äº†ç›¸åº”çš„æŠ½è±¡æ–¹æ³•äº¤ç»™å…·ä½“å­ç±»å»å®ç°ï¼Œè¿™æ˜¯å…¸å‹çš„æ¨¡æ¿è®¾è®¡æ¨¡å¼ï¼ˆéª¨æ¶æŠ½è±¡ç±»å’Œæ¨¡æ¿æ–¹æ³•ï¼‰ã€‚</p><p>LifeCycleBase çš„ init() æ–¹æ³•å®ç°ï¼š</p><figure><img src="https://img.jssjqd.cn/202303192259063.png" alt="image-20230319225914053" tabindex="0" loading="lazy"><figcaption>image-20230319225914053</figcaption></figure><p>æ€è€ƒï¼šæ˜¯ä»€ä¹ˆæ—¶å€™ã€è°æŠŠç›‘å¬å™¨æ³¨å†Œè¿›æ¥çš„å‘¢ï¼Ÿ</p><ul><li><p>Tomcat è‡ªå®šä¹‰äº†ä¸€äº›ç›‘å¬å™¨ï¼Œè¿™äº›ç›‘å¬å™¨æ˜¯çˆ¶ç»„ä»¶åœ¨åˆ›å»ºå­ç»„ä»¶çš„è¿‡ç¨‹ä¸­æ³¨å†Œåˆ°å­ç»„ä»¶çš„ã€‚æ¯”å¦‚ MemoryLeakTrackingListenerç›‘å¬å™¨ï¼Œç”¨æ¥æ£€æµ‹ Context å®¹å™¨ä¸­çš„å†…å­˜æ³„æ¼ï¼Œè¿™ä¸ªç›‘å¬å™¨æ˜¯ Host å®¹å™¨åœ¨åˆ›å»º Context å®¹å™¨æ—¶æ³¨å†Œåˆ° Context ä¸­çš„ã€‚</p></li><li><p>æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ server.xml ä¸­å®šä¹‰è‡ªå·±çš„ç›‘å¬å™¨ï¼ŒTomcat åœ¨å¯åŠ¨æ—¶ä¼šè§£æ server.xmlï¼Œåˆ›å»ºç›‘å¬å™¨å¹¶æ³¨å†Œåˆ°å®¹å™¨ç»„ä»¶ã€‚</p></li></ul><h4 id="ç”Ÿå‘½å‘¨æœŸæ€»ä½“ç±»å›¾" tabindex="-1"><a class="header-anchor" href="#ç”Ÿå‘½å‘¨æœŸæ€»ä½“ç±»å›¾" aria-hidden="true">#</a> ç”Ÿå‘½å‘¨æœŸæ€»ä½“ç±»å›¾</h4><figure><img src="https://img.jssjqd.cn/202303192259179.png" alt="image-20230319225931384" tabindex="0" loading="lazy"><figcaption>image-20230319225931384</figcaption></figure><p>StandardServerã€StandardService æ˜¯ Server å’Œ Service ç»„ä»¶çš„å…·ä½“å®ç°ç±»ï¼Œå®ƒä»¬éƒ½ç»§æ‰¿äº† LifeCycleBaseã€‚StandardEngineã€StandardHostã€StandardContext å’Œ StandardWrapper æ˜¯ç›¸åº”å®¹å™¨ç»„ä»¶çš„å…·ä½“å®ç°ç±»ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯å®¹å™¨ï¼Œæ‰€ä»¥ç»§æ‰¿äº† ContainerBase æŠ½è±¡åŸºç±»ï¼Œè€Œ ContainerBase å®ç°äº† Container æ¥å£ï¼Œä¹Ÿç»§æ‰¿äº† LifeCycleBase ç±»ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†æ¥å£å’ŒåŠŸèƒ½æ¥å£æ˜¯åˆ†å¼€çš„ï¼Œè¿™ä¹Ÿç¬¦åˆè®¾è®¡ä¸­æ¥å£åˆ†ç¦»çš„åŸåˆ™ã€‚</p><p>Tomcat ä¸ºäº†å®ç°ä¸€é”®å¼å¯åœä»¥åŠä¼˜é›…çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼Œå¹¶è€ƒè™‘åˆ°äº†å¯æ‰©å±•æ€§å’Œå¯é‡ç”¨æ€§ï¼Œå°†é¢å‘å¯¹è±¡æ€æƒ³å’Œè®¾è®¡æ¨¡å¼å‘æŒ¥åˆ°äº†æè‡´ï¼Œåˆ†åˆ«è¿ç”¨äº†ç»„åˆæ¨¡å¼ã€è§‚å¯Ÿè€…æ¨¡å¼ã€éª¨æ¶æŠ½è±¡ç±»å’Œæ¨¡æ¿æ–¹æ³•ã€‚å¦‚æœä½ éœ€è¦ç»´æŠ¤ä¸€å †å…·æœ‰çˆ¶å­å…³ç³»çš„å®ä½“ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ç»„åˆæ¨¡å¼ã€‚è§‚å¯Ÿè€…æ¨¡å¼å¬èµ·æ¥â€œé«˜å¤§ä¸Šâ€ï¼Œå…¶å®å°±æ˜¯å½“ä¸€ä¸ªäº‹ä»¶å‘ç”Ÿåï¼Œéœ€è¦æ‰§è¡Œä¸€è¿ä¸²æ›´æ–°æ“ä½œã€‚ä¼ ç»Ÿçš„å®ç°æ–¹å¼æ˜¯åœ¨äº‹ä»¶å“åº”ä»£ç é‡Œç›´æ¥åŠ æ›´æ–°é€»è¾‘ï¼Œå½“æ›´æ–°é€»è¾‘åŠ å¤šäº†ä¹‹åï¼Œä»£ç ä¼šå˜å¾—è‡ƒè‚¿ï¼Œå¹¶ä¸”è¿™ç§æ–¹å¼æ˜¯ç´§è€¦åˆçš„ã€ä¾µå…¥å¼çš„ã€‚è§‚å¯Ÿè€…æ¨¡å¼å®ç°äº†ä½è€¦åˆã€éä¾µå…¥å¼çš„é€šçŸ¥ä¸æ›´æ–°æœºåˆ¶ã€‚æ¨¡æ¿æ–¹æ³•åœ¨æŠ½è±¡åŸºç±»ä¸­ç»å¸¸ç”¨åˆ°ï¼Œç”¨æ¥å®ç°é€šç”¨é€»è¾‘ã€‚</p><p><strong>Tomcatå¯åŠ¨æµç¨‹</strong></p><p><a href="https://www.processon.com/view/link/61af4ca2e401fd21c048c9ea" target="_blank" rel="noopener noreferrer">https://www.processon.com/view/link/61af4ca2e401fd21c048c9ea<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h4 id="ä¼˜åŒ–å¹¶æé«˜tomcatå¯åŠ¨é€Ÿåº¦" tabindex="-1"><a class="header-anchor" href="#ä¼˜åŒ–å¹¶æé«˜tomcatå¯åŠ¨é€Ÿåº¦" aria-hidden="true">#</a> ä¼˜åŒ–å¹¶æé«˜Tomcatå¯åŠ¨é€Ÿåº¦</h4><p>æˆ‘ä»¬åœ¨ä½¿ç”¨ Tomcat æ—¶å¯èƒ½ä¼šç¢°åˆ°å¯åŠ¨æ¯”è¾ƒæ…¢çš„é—®é¢˜ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„ç³»ç»Ÿå‘å¸ƒæ–°ç‰ˆæœ¬ä¸Šçº¿æ—¶ï¼Œå¯èƒ½éœ€è¦é‡å¯æœåŠ¡ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¸Œæœ› Tomcat èƒ½å¿«é€Ÿå¯åŠ¨èµ·æ¥æä¾›æœåŠ¡ã€‚</p><p><strong>æ¸…ç†Tomcat</strong></p><ul><li>æ¸…ç†ä¸å¿…è¦çš„ Web åº”ç”¨</li></ul><p>åˆ é™¤æ‰ webapps æ–‡ä»¶å¤¹ä¸‹ä¸éœ€è¦çš„å·¥ç¨‹ï¼Œä¸€èˆ¬æ˜¯ host-managerã€exampleã€doc ç­‰è¿™äº›é»˜è®¤çš„å·¥ç¨‹ï¼Œå¯èƒ½è¿˜æœ‰ä»¥å‰æ·»åŠ çš„ä½†ç°åœ¨ç”¨ä¸ç€çš„å·¥ç¨‹</p><ul><li>æ¸…ç† ä¸å¿…è¦çš„XML é…ç½®</li><li>æ¸…ç† ä¸å¿…è¦çš„JAR æ–‡ä»¶</li><li>æ¸…ç†å…¶ä»–æ–‡ä»¶</li></ul><p>åŠæ—¶æ¸…ç†æ—¥å¿—ï¼Œåˆ é™¤ logs æ–‡ä»¶å¤¹ä¸‹ä¸éœ€è¦çš„æ—¥å¿—æ–‡ä»¶ã€‚åŒæ ·è¿˜æœ‰ work æ–‡ä»¶å¤¹ä¸‹çš„ catalina æ–‡ä»¶å¤¹ï¼Œå®ƒå…¶å®æ˜¯ Tomcat æŠŠ JSP è½¬æ¢ä¸º Class æ–‡ä»¶çš„å·¥ä½œç›®å½•ã€‚æœ‰æ—¶å€™æˆ‘ä»¬ä¹Ÿè®¸ä¼šé‡åˆ°ä¿®æ”¹äº†ä»£ç ï¼Œé‡å¯äº† Tomcatï¼Œä½†æ˜¯ä»æ²¡æ•ˆæœï¼Œè¿™æ—¶å€™ä¾¿å¯ä»¥åˆ é™¤æ‰è¿™ä¸ªæ–‡ä»¶å¤¹ï¼ŒTomcat ä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™ä¼šé‡æ–°ç”Ÿæˆã€‚</p><p><strong>ç¦æ­¢ Tomcat TLD æ‰«æ</strong></p><p>Tomcat ä¸ºäº†æ”¯æŒ JSPï¼Œåœ¨åº”ç”¨å¯åŠ¨çš„æ—¶å€™ä¼šæ‰«æ JAR åŒ…é‡Œé¢çš„ TLD æ–‡ä»¶ï¼ŒåŠ è½½é‡Œé¢å®šä¹‰çš„æ ‡ç­¾åº“ã€‚Tomcatæ‰«æwebåº”ç”¨ä¸‹çš„jaråŒ…ï¼Œå‘ç°jaré‡Œé¢æ²¡æœ‰TLDæ–‡ä»¶ï¼Œä¼šå»ºè®®ä¸è¦å»æ‰«æè¿™äº›jaråŒ…ï¼Œè¿™æ ·å¯ä»¥æé«˜ Tomcat çš„å¯åŠ¨é€Ÿåº¦ï¼Œå¹¶èŠ‚çœ JSP ç¼–è¯‘æ—¶é—´ã€‚</p><p>â€‹ <img src="https://img.jssjqd.cn/202303192259863.png" alt="image-20230319225959040" loading="lazy"></p><ul><li>å¦‚æœé¡¹ç›®ä¸­æ²¡æœ‰ä½¿ç”¨ JSP ä½œä¸º Web é¡µé¢æ¨¡æ¿ï¼Œå¯ä»¥ç›´æ¥ç¦ç”¨TLDæ‰«æ</li></ul><p>ä¿®æ”¹conf/context.xmlï¼Œæ·»åŠ ä¸‹é¢çš„é…ç½®</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>JarScanner</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>JarScanFilter</span> <span class="token attr-name">defaultTldScan</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>JarScanner</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>é¡¹ç›®ä¸­ä½¿ç”¨äº†JSPï¼Œå¯ä»¥é…ç½®åªæ‰«æåŒ…å«TLDæ–‡ä»¶çš„jaråŒ…</li></ul><p>ä¿®æ”¹conf/catalina.properties</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">tomcat.util.scan.StandardJarScanFilter.jarsToSkip</span><span class="token punctuation">=</span><span class="token value attr-value">xxx.jar</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>å…³é—­ WebSocket æ”¯æŒ</strong></p><p>Tomcat ä¼šæ‰«æ WebSocket æ³¨è§£çš„ API å®ç°ï¼Œæ¯”å¦‚@ServerEndpointæ³¨è§£çš„ç±»ã€‚å¦‚æœä¸éœ€è¦ä½¿ç”¨ WebSockets å°±å¯ä»¥å…³é—­å®ƒï¼Œåœ¨conf/context.xmlä¸­ç»™ Context æ ‡ç­¾åŠ ä¸€ä¸ªcontainerSciFilterå±æ€§</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span> <span class="token attr-name">containerSciFilter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.tomcat.websocket.server.WsSci<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Context</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœä¸éœ€è¦WebSockets è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥åˆ é™¤Tomcat libç›®å½•ä¸‹çš„websocket-api.jarå’Œtomcat-websocket.jarã€‚</p><p><strong>å…³é—­ JSP æ”¯æŒ</strong></p><p>è·Ÿå…³é—­WebSocketç±»ä¼¼</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Context</span> <span class="token attr-name">containerSciFilter</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.tomcat.websocket.server.JasperInitializer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Context</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>WebSocket å’Œ JSPéƒ½å…³é—­</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>&lt;Context containerSciFilter=&quot;org.apache.tomcat.websocket.server.WsSci | org.apache.tomcat.websocket.server.JasperInitializer&quot;&gt;
&lt;/Context&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>ç¦æ­¢ Servlet æ³¨è§£æ‰«æ</strong></p><p>Servlet 3.0 å¼•å…¥äº†æ³¨è§£ Servletï¼ŒTomcat ä¸ºäº†æ”¯æŒè¿™ä¸ªç‰¹æ€§ï¼Œä¼šåœ¨ Web åº”ç”¨å¯åŠ¨æ—¶æ‰«æä½ çš„ç±»æ–‡ä»¶ï¼Œå› æ­¤å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨ Servlet æ³¨è§£è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥å‘Šè¯‰ Tomcat ä¸è¦å»æ‰«æ Servlet æ³¨è§£ã€‚</p><p>åœ¨webåº”ç”¨çš„web.xmlä¸­é…ç½®</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>web-app</span> <span class="token attr-name">metadata-complete</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>web-app</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>metadata-completeçš„æ„æ€æ˜¯ï¼Œweb.xmlé‡Œé…ç½®çš„ Servlet æ˜¯å®Œæ•´çš„ï¼Œä¸éœ€è¦å†å»åº“ç±»ä¸­æ‰¾ Servlet çš„å®šä¹‰ã€‚</p><p><strong>å¹¶è¡Œå¯åŠ¨å¤šä¸ª Web åº”ç”¨</strong></p><p>Tomcat å¯åŠ¨çš„æ—¶å€™ï¼Œé»˜è®¤æƒ…å†µä¸‹ Web åº”ç”¨éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªå¯åŠ¨çš„ï¼Œç­‰æ‰€æœ‰ Web åº”ç”¨å…¨éƒ¨å¯åŠ¨å®Œæˆï¼ŒTomcat æ‰ç®—å¯åŠ¨å®Œæ¯•ã€‚å¦‚æœåœ¨ä¸€ä¸ª Tomcat ä¸‹ä½ æœ‰å¤šä¸ª Web åº”ç”¨ï¼Œä¸ºäº†ä¼˜åŒ–å¯åŠ¨é€Ÿåº¦ï¼Œå¯ä»¥é…ç½®å¤šä¸ªåº”ç”¨ç¨‹åºå¹¶è¡Œå¯åŠ¨ã€‚</p><p>ä¿®æ”¹conf/server.xmlä¸­Host æ ‡ç­¾çš„ startStopThreads å±æ€§</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Host</span> <span class="token attr-name">startStopThreads</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Host</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">ä¸Šæ¬¡ç¼–è¾‘äº: </span><!----></div><div class="contributors"><span class="label">è´¡çŒ®è€…: </span><!--[--><!--[--><span class="contributor" title="email: thejqd@gmail.com">jiangqingdong</span><!--]--><!--]--></div></div></footer><!----><!----><!----><!--]--></main><!--]--><footer class="footer-wrapper"><!----><div class="copyright">Copyright Â© 2023 æ±Ÿ</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-18640bff.js" defer></script>
  </body>
</html>
